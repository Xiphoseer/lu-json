{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cage"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"string"},"value":{"type":"Identifier","name":"string"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"table"},"value":{"type":"Identifier","name":"table"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"math"},"value":{"type":"Identifier","name":"math"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"next"},"value":{"type":"Identifier","name":"next"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ipairs"},"value":{"type":"Identifier","name":"ipairs"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"pairs"},"value":{"type":"Identifier","name":"pairs"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"require"},"value":{"type":"Identifier","name":"require"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"type"},"value":{"type":"Identifier","name":"type"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"tonumber"},"value":{"type":"Identifier","name":"tonumber"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"tostring"},"value":{"type":"Identifier","name":"tostring"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"unpack"},"value":{"type":"Identifier","name":"unpack"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"setmetatable"},"value":{"type":"Identifier","name":"setmetatable"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"getmetatable"},"value":{"type":"Identifier","name":"getmetatable"}}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"mt"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"__index"},"value":{"type":"Identifier","name":"cage"}}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"scriptLoader"},"isLocal":false,"parameters":[{"type":"Identifier","name":"scriptname"},{"type":"Identifier","name":"envName"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"scriptenv"}],"init":[{"type":"TableConstructorExpression","fields":[]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"setmetatable"},"arguments":[{"type":"Identifier","name":"scriptenv"},{"type":"Identifier","name":"mt"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"chunk"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"loadfile"},"arguments":[{"type":"Identifier","name":"scriptname"}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"setfenv"},"arguments":[{"type":"Identifier","name":"chunk"},{"type":"Identifier","name":"scriptenv"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"chunk"},"arguments":[]}},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"_G"},"index":{"type":"Identifier","name":"envName"}}],"init":[{"type":"Identifier","name":"scriptenv"}]}]}],"comments":[{"type":"Comment","value":" import some packages:","raw":"-- import some packages:"},{"type":"Comment","value":"coroutine = coroutine,","raw":"--coroutine = coroutine,"},{"type":"Comment","value":" some 'global' functions:","raw":"-- some 'global' functions:"},{"type":"Comment","value":" modified global functions:","raw":"-- modified global functions:"},{"type":"Comment","value":"print = myprint,","raw":"--print = myprint,"},{"type":"Comment","value":"error = myerror","raw":"--error = myerror"},{"type":"Comment","value":" my own api:","raw":"-- my own api:"},{"type":"Comment","value":"move = move","raw":"--move = move"},{"type":"Comment","value":"kill = kill","raw":"--kill = kill"},{"type":"Comment","value":"-------------------------","raw":"---------------------------"}]}