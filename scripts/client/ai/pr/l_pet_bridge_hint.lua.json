{"type":"Chunk","body":[{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetProximityRadius"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"radius"},"value":{"type":"NumericLiteral","value":8,"raw":"8"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"ALL","raw":"\"ALL\""}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetProximityRadius"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"radius"},"value":{"type":"NumericLiteral","value":4,"raw":"4"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"LEAVE_MESSAGE","raw":"\"LEAVE_MESSAGE\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DISABLE","raw":"\"DISABLE\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"REBUILD_ICON_FOUND","raw":"\"REBUILD_ICON_FOUND\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"BRIDGE_FOUND","raw":"\"BRIDGE_FOUND\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onProximityUpdate"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"status"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"LEAVE","raw":"\"LEAVE\""}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"LEAVE_MESSAGE","raw":"\"LEAVE_MESSAGE\""}}},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bIsInFaction"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"BelongsToFaction"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objId"},"base":{"type":"Identifier","name":"msg"}}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"factionID"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}}]}}}},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DISABLE","raw":"\"DISABLE\""}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"FindBridge"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"foundObj"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetProximityObjects"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"ALL","raw":"\"ALL\""}}]}}}]},{"type":"ForNumericStatement","variable":{"type":"Identifier","name":"i"},"start":{"type":"NumericLiteral","value":1,"raw":"1"},"end":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"maxn"},"base":{"type":"Identifier","name":"table"}},"arguments":[{"type":"Identifier","name":"foundObj"}]},"step":null,"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"IndexExpression","base":{"type":"Identifier","name":"foundObj"},"index":{"type":"Identifier","name":"i"}}},"arguments":[]}},"right":{"type":"NumericLiteral","value":1692,"raw":"1692"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"REBUILD_ICON_FOUND","raw":"\"REBUILD_ICON_FOUND\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"BreakStatement"}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"REBUILD_ICON_FOUND","raw":"\"REBUILD_ICON_FOUND\""}],"inParens":true},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"BRIDGE_FOUND","raw":"\"BRIDGE_FOUND\""}]},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DISABLE","raw":"\"DISABLE\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objId"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"DisplayTooltip"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bShow"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"strText"},"value":{"type":"StringLiteral","value":"That broken bridge has the bricks I need!","raw":"\"That broken bridge has the bricks I need!\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"iTime"},"value":{"type":"NumericLiteral","value":5000,"raw":"5000"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":5,"raw":"5"},{"type":"StringLiteral","value":"temp_disable","raw":"\"temp_disable\""},{"type":"Identifier","name":"self"}]}}]}]}]}]}]}]}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"onTimerDone"}],"init":[{"type":"FunctionDeclaration","identifier":null,"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"temp_disable","raw":"\"temp_disable\""}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DISABLE","raw":"\"DISABLE\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"REBUILD_ICON_FOUND","raw":"\"REBUILD_ICON_FOUND\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"BRIDGE_FOUND","raw":"\"BRIDGE_FOUND\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"FindBridge"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cylinder"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"grp_name","raw":"\"grp_name\""}]}}]}}}]},{"type":"ForNumericStatement","variable":{"type":"Identifier","name":"i"},"start":{"type":"NumericLiteral","value":1,"raw":"1"},"end":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"maxn"},"base":{"type":"Identifier","name":"table"}},"arguments":[{"type":"Identifier","name":"cylinder"}]},"step":null,"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"IndexExpression","base":{"type":"Identifier","name":"cylinder"},"index":{"type":"Identifier","name":"i"}}},"arguments":[]},"inParens":true},"right":{"type":"NumericLiteral","value":3881,"raw":"3881"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"BRIDGE_FOUND","raw":"\"BRIDGE_FOUND\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]}]}]}]}],"comments":[{"type":"Comment","value":"require('o_mis')","raw":"--require('o_mis')"},{"type":"Comment","value":" When the Object with this script attacthed (self) loads or \"starts up,\"","raw":"-- When the Object with this script attacthed (self) loads or \"starts up,\""},{"type":"Comment","value":"print(\"started up TEST\")","raw":"--print(\"started up TEST\")"},{"type":"Comment","value":" returns objId ","raw":"-- returns objId "},{"type":"Comment","value":"print (msg.status)","raw":"--print (msg.status)"},{"type":"Comment","value":"print (msg.name)","raw":"--print (msg.name)"},{"type":"Comment","value":"Hint message will only be displayed when the player leaves the area, so this message won't conflict with the \"you don't have enough bricks\" message from the rebuild activator","raw":"--Hint message will only be displayed when the player leaves the area, so this message won't conflict with the \"you don't have enough bricks\" message from the rebuild activator"},{"type":"Comment","value":"print (\"left region\")","raw":"--print (\"left region\")"},{"type":"Comment","value":" If the hint message is not currently disabled, proceed","raw":"-- If the hint message is not currently disabled, proceed"},{"type":"Comment","value":" Look to see what objects are nearby","raw":"-- Look to see what objects are nearby"},{"type":"Comment","value":"Check to see if the rebuild activator (1692) is present","raw":"--Check to see if the rebuild activator (1692) is present"},{"type":"Comment","value":"print (\"rebuild activator found\")","raw":"--print (\"rebuild activator found\")"},{"type":"Comment","value":"If the rebuild Icon is present AND the bridge is present","raw":"--If the rebuild Icon is present AND the bridge is present"},{"type":"Comment","value":" get the ID of the thing that sent the collision message","raw":"-- get the ID of the thing that sent the collision message"},{"type":"Comment","value":"display hint message and leave it on until player turns it off","raw":"--display hint message and leave it on until player turns it off"},{"type":"Comment","value":"-------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------"},{"type":"Comment","value":" Check to see if the broken bridge is there or not","raw":"-- Check to see if the broken bridge is there or not"},{"type":"Comment","value":"-------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------"},{"type":"Comment","value":"print (\"Inside FindBridge Function\")","raw":"--print (\"Inside FindBridge Function\")"},{"type":"Comment","value":"print (\"looking for bridge\")","raw":"--print (\"looking for bridge\")"},{"type":"Comment","value":"3881 is bridge smashable","raw":"--3881 is bridge smashable"},{"type":"Comment","value":"print (\"Bridge has been found\")","raw":"--print (\"Bridge has been found\")"}]}