{"type":"Chunk","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"o_mis","raw":"'o_mis'"}]}}],"comments":[{"type":"Comment","value":"local bHasBeenUsed = false","raw":"--local bHasBeenUsed = false"},{"type":"Comment","value":"local bCINEMA_ONCE = false\r\n\r\n\r\n\r\nfunction onStartup(self)\r\n    --print (\"Bouncer Cine Script Started!\")\r\n    \r\n    -- Set variable on self to remember if the Rancher has been found\r\n    self:SetVar(\"RancherFound\", false)                                                      \r\n\r\nend\r\n    \r\n\r\n-- Something touches the phantom object\r\nfunction onCollisionPhantom(self, msg)                                                      \r\n    \r\n    -- define the message sender from the collision as \"player\"    \r\n    local player = msg.objectID                                                             \r\n    \r\n    -- Define myMissionState as the current state of mission 136, for the TargetID\r\n    local PetFoodMissionStatus = player:GetMissionState{missionID = 111}.missionState       \r\n    \r\n    -- Cinematic should only happen once, and only during the Pet Food Mission\r\n    if (bCINEMA_ONCE == false and PetFoodMissionStatus == 2) then                           \r\n    \r\n        -- Have we looked for the Rancher yet?\r\n        if ( self:GetVar(\"RancherFound\") == false) then                                     \r\n\t\r\n\t\t\t-- Call function to find the Rancher\r\n            FindRancher(self)                                                               \r\n\t\t\t\r\n            -- Make sure to never call function again \r\n            self:SetVar(\"RancherFound\", true)                                               \r\n\t\r\n\t    end \r\n    \r\n        --print (\"Collision Detected\")\r\n        \r\n        -- Disable player control and set a timer to return it\r\n        --player:SetUserCtrlCompPause{bPaused = true}                                        \r\n        GAMEOBJ:GetTimer():AddTimerWithCancel( 5 , \"PauseTime\", self )                      \r\n        \r\n        -- Play cinematic.\r\n        player:PlayCinematic { pathName = \"Bouncer_Cine\" }                                  \r\n        player:DisplayTooltip { bShow = true, strText = \"CINEMATIC: Pet needs food. Pet Rancher gives food. Now try clicking your pet\", iTime = 10000 }\r\n        \r\n        -- Call up the Pet Rancher from where it was stored on they cylinder (self)\r\n        local PetRancher = getObjectByName(self, \"PetRancher\")                              \r\n\r\n        -- Play animation on Pet Rancher (two methods)\r\n        --PetRancher:PlayAnimation{animationID = \"throw-food\"}                              \r\n        Emote.emote(PetRancher, PetRancher, \"throw-food\" )\r\n        \r\n        -- Update bool so that cinematic never plays again.\r\n        bCINEMA_ONCE = true                                                                 \r\n\r\n    end\r\n\r\nend\r\n\r\n\r\n\r\nfunction FindRancher(self)                        \r\n  --print (\"Inside FindRancher Function\")\r\n\r\n\tlocal cylinder = self:GetObjectsInGroup{ group = self:GetVar(\"grp_name\") }.objects\r\n\t\r\n    for i = 1, table.maxn (cylinder) do\r\n        \r\n        --print (\"looking for Rancher\")\r\n        --print (self:GetVar(\"grp_name\"))\r\n            \r\n        --print(tostring(table.maxn (cylinder)))\r\n        --print(tostring(cylinder[i]:GetLOT().objtemplate))\r\n        \r\n        \r\n        \r\n        if (cylinder[i]:GetLOT().objtemplate) == 3257  then                --3257 is Pet Rancher\r\n        \r\n        --print( type(cylinder[i]:GetLOT().objtemplate))\r\n        --print( type(3257))\r\n        \t\t\r\n        storeObjectByName(self, \"PetRancher\", cylinder[i])                  -- Stores the Pet Ranch ID under the name Pet Rancher\r\n        storeObjectByName(cylinder[i], \"cylinder\", self)\r\n        --print (\"Rancher has been found\")\r\n            \r\n        end\r\n\r\n    end         \r\n      \t\r\nend\r\n\r\n\r\n--------------------------------------------------------------\r\n-- Timers\r\n--------------------------------------------------------------\r\nfunction onTimerDone(self, msg)\r\n\t\r\n    if (msg.name == \"PauseTime\") then\r\n        \r\n        print (\"Timer is done!\")\r\n\t    \r\n        -- Get the player again (local variables aren't shared by different functions) and return player control\r\n        local player = GAMEOBJ:GetObjectByID(GAMEOBJ:GetLocalCharID())\r\n        --player:SetUserCtrlCompPause{bPaused = false}                                        \r\n\r\n    end\r\n\t\r\nend\r\n\r\n \r\n","raw":"--[[\r\nlocal bCINEMA_ONCE = false\r\n\r\n\r\n\r\nfunction onStartup(self)\r\n    --print (\"Bouncer Cine Script Started!\")\r\n    \r\n    -- Set variable on self to remember if the Rancher has been found\r\n    self:SetVar(\"RancherFound\", false)                                                      \r\n\r\nend\r\n    \r\n\r\n-- Something touches the phantom object\r\nfunction onCollisionPhantom(self, msg)                                                      \r\n    \r\n    -- define the message sender from the collision as \"player\"    \r\n    local player = msg.objectID                                                             \r\n    \r\n    -- Define myMissionState as the current state of mission 136, for the TargetID\r\n    local PetFoodMissionStatus = player:GetMissionState{missionID = 111}.missionState       \r\n    \r\n    -- Cinematic should only happen once, and only during the Pet Food Mission\r\n    if (bCINEMA_ONCE == false and PetFoodMissionStatus == 2) then                           \r\n    \r\n        -- Have we looked for the Rancher yet?\r\n        if ( self:GetVar(\"RancherFound\") == false) then                                     \r\n\t\r\n\t\t\t-- Call function to find the Rancher\r\n            FindRancher(self)                                                               \r\n\t\t\t\r\n            -- Make sure to never call function again \r\n            self:SetVar(\"RancherFound\", true)                                               \r\n\t\r\n\t    end \r\n    \r\n        --print (\"Collision Detected\")\r\n        \r\n        -- Disable player control and set a timer to return it\r\n        --player:SetUserCtrlCompPause{bPaused = true}                                        \r\n        GAMEOBJ:GetTimer():AddTimerWithCancel( 5 , \"PauseTime\", self )                      \r\n        \r\n        -- Play cinematic.\r\n        player:PlayCinematic { pathName = \"Bouncer_Cine\" }                                  \r\n        player:DisplayTooltip { bShow = true, strText = \"CINEMATIC: Pet needs food. Pet Rancher gives food. Now try clicking your pet\", iTime = 10000 }\r\n        \r\n        -- Call up the Pet Rancher from where it was stored on they cylinder (self)\r\n        local PetRancher = getObjectByName(self, \"PetRancher\")                              \r\n\r\n        -- Play animation on Pet Rancher (two methods)\r\n        --PetRancher:PlayAnimation{animationID = \"throw-food\"}                              \r\n        Emote.emote(PetRancher, PetRancher, \"throw-food\" )\r\n        \r\n        -- Update bool so that cinematic never plays again.\r\n        bCINEMA_ONCE = true                                                                 \r\n\r\n    end\r\n\r\nend\r\n\r\n\r\n\r\nfunction FindRancher(self)                        \r\n  --print (\"Inside FindRancher Function\")\r\n\r\n\tlocal cylinder = self:GetObjectsInGroup{ group = self:GetVar(\"grp_name\") }.objects\r\n\t\r\n    for i = 1, table.maxn (cylinder) do\r\n        \r\n        --print (\"looking for Rancher\")\r\n        --print (self:GetVar(\"grp_name\"))\r\n            \r\n        --print(tostring(table.maxn (cylinder)))\r\n        --print(tostring(cylinder[i]:GetLOT().objtemplate))\r\n        \r\n        \r\n        \r\n        if (cylinder[i]:GetLOT().objtemplate) == 3257  then                --3257 is Pet Rancher\r\n        \r\n        --print( type(cylinder[i]:GetLOT().objtemplate))\r\n        --print( type(3257))\r\n        \t\t\r\n        storeObjectByName(self, \"PetRancher\", cylinder[i])                  -- Stores the Pet Ranch ID under the name Pet Rancher\r\n        storeObjectByName(cylinder[i], \"cylinder\", self)\r\n        --print (\"Rancher has been found\")\r\n            \r\n        end\r\n\r\n    end         \r\n      \t\r\nend\r\n\r\n\r\n--------------------------------------------------------------\r\n-- Timers\r\n--------------------------------------------------------------\r\nfunction onTimerDone(self, msg)\r\n\t\r\n    if (msg.name == \"PauseTime\") then\r\n        \r\n        print (\"Timer is done!\")\r\n\t    \r\n        -- Get the player again (local variables aren't shared by different functions) and return player control\r\n        local player = GAMEOBJ:GetObjectByID(GAMEOBJ:GetLocalCharID())\r\n        --player:SetUserCtrlCompPause{bPaused = false}                                        \r\n\r\n    end\r\n\t\r\nend\r\n\r\n \r\n]]"},{"type":"Comment","value":"","raw":"--"}]}