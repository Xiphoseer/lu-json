{"type":"Chunk","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"o_mis","raw":"'o_mis'"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"npcName"}],"init":[{"type":"StringLiteral","value":"Rusty","raw":"'Rusty'"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"missionCamDist"}],"init":[{"type":"NumericLiteral","value":10,"raw":"10"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"misID"}],"init":[{"type":"NumericLiteral","value":318,"raw":"318"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"camTime"}],"init":[{"type":"NumericLiteral","value":16,"raw":"16"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onClientUse"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"oPos"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetPosition"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"oDir"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectDirectionVectors"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"camPos"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"BinaryExpression","operator":"+","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"pos"},"base":{"type":"Identifier","name":"oPos"}}},"right":{"type":"BinaryExpression","operator":"*","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"forward"},"base":{"type":"Identifier","name":"oDir"}}},"right":{"type":"Identifier","name":"missionCamDist"},"inParens":true}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"pos"},"base":{"type":"Identifier","name":"oPos"}}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"BinaryExpression","operator":"+","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"pos"},"base":{"type":"Identifier","name":"oPos"}}},"right":{"type":"BinaryExpression","operator":"*","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"forward"},"base":{"type":"Identifier","name":"oDir"}}},"right":{"type":"Identifier","name":"missionCamDist"},"inParens":true}}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Teleport"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pos"},"value":{"type":"Identifier","name":"camPos"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"MissionDisplay_","raw":"'MissionDisplay_'"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"_Cam","raw":"'_Cam'"}}}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onMissionDialogueOK"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bIsComplete"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"missionID"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"Identifier","name":"misID"}}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetUserCtrlCompPause"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bPaused"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"Mission_","raw":"'Mission_'"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"_Cam","raw":"'_Cam'"}}}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"camTime"},{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"Cam","raw":"'Cam'"}},{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTerminateInteraction"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"}]},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"Cam","raw":"'Cam'"}},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetUserCtrlCompPause"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bPaused"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}}]}]}]}],"comments":[{"type":"Comment","value":"//////////////////////////////////////////////////////////////////////////////////","raw":"--//////////////////////////////////////////////////////////////////////////////////"},{"type":"Comment","value":" distance to teleport player away from npc","raw":"-- distance to teleport player away from npc"},{"type":"Comment","value":" missionID from DB","raw":"-- missionID from DB"},{"type":"Comment","value":" time to release player","raw":"-- time to release player"},{"type":"Comment","value":"//////////////////////////////////////////////////////////////////////////////////","raw":"--//////////////////////////////////////////////////////////////////////////////////"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Happens on client interaction (must register for picking)","raw":"-- Happens on client interaction (must register for picking)"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"+ (oDir.forward.y * posOffset)","raw":"--+ (oDir.forward.y * posOffset)"},{"type":"Comment","value":"print('Dialogue OK')","raw":"--print('Dialogue OK')"},{"type":"Comment","value":" freeze player and play cinematic","raw":"-- freeze player and play cinematic"},{"type":"Comment","value":" start timer to release player movement","raw":"-- start timer to release player movement"},{"type":"Comment","value":"print('terminate interaction')","raw":"--print('terminate interaction')"}]}