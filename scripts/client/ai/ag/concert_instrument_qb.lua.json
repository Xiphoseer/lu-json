{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"CONSTANTS"}],"init":[{"type":"TableConstructorExpression","fields":[]}]},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"GUITAR_LOT","raw":"\"GUITAR_LOT\""}}],"init":[{"type":"NumericLiteral","value":4039,"raw":"4039"}]},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"BASS_LOT","raw":"\"BASS_LOT\""}}],"init":[{"type":"NumericLiteral","value":4040,"raw":"4040"}]},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"KEYBOARD_LOT","raw":"\"KEYBOARD_LOT\""}}],"init":[{"type":"NumericLiteral","value":4041,"raw":"4041"}]},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"DRUM_LOT","raw":"\"DRUM_LOT\""}}],"init":[{"type":"NumericLiteral","value":4042,"raw":"4042"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onRebuildNotifyState"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"iState"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"NumericLiteral","value":2,"raw":"2"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"StunAndPlay"},"arguments":[{"type":"Identifier","name":"self"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"player"},"base":{"type":"Identifier","name":"msg"}},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"print"},"arguments":[{"type":"StringLiteral","value":"sending Stun & Play message","raw":"\"sending Stun & Play message\""}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"StunAndPlay"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"instrumentLOT"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"StringLiteral","value":"Concert_Cam","raw":"\"Concert_Cam\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":1,"raw":"1.0"},{"type":"StringLiteral","value":"ToolTipTimer","raw":"\"ToolTipTimer\""},{"type":"Identifier","name":"self"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"AnimationTime"}],"init":[{"type":"StringLiteral","value":"","raw":"\"\""}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"AnimationName"}],"init":[{"type":"StringLiteral","value":"","raw":"\"\""}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"SoundName"}],"init":[{"type":"StringLiteral","value":"","raw":"\"\""}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"instrumentLOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"GUITAR_LOT","raw":"\"GUITAR_LOT\""}}},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"AnimationName"}],"init":[{"type":"StringLiteral","value":"chicken","raw":"\"chicken\""}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"AnimationTime"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"time"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetAnimationTime"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"Identifier","name":"AnimationName"}}]}}}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"SoundName"}],"init":[{"type":"StringLiteral","value":"cow","raw":"\"cow\""}]}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"instrumentLOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"BASS_LOT","raw":"\"BASS_LOT\""}}},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"AnimationName"}],"init":[{"type":"StringLiteral","value":"headspin","raw":"\"headspin\""}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"AnimationTime"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"time"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetAnimationTime"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"Identifier","name":"AnimationName"}}]}}}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"SoundName"}],"init":[{"type":"StringLiteral","value":"digital_sign","raw":"\"digital_sign\""}]}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"instrumentLOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"KEYBOARD_LOT","raw":"\"KEYBOARD_LOT\""}}},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"AnimationName"}],"init":[{"type":"StringLiteral","value":"wave","raw":"\"wave\""}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"AnimationTime"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"time"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetAnimationTime"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"Identifier","name":"AnimationName"}}]}}}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"SoundName"}],"init":[{"type":"StringLiteral","value":"water_cooler_gubgub","raw":"\"water_cooler_gubgub\""}]}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"instrumentLOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"DRUM_LOT","raw":"\"DRUM_LOT\""}}},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"AnimationName"}],"init":[{"type":"StringLiteral","value":"biglove","raw":"\"biglove\""}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"AnimationTime"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"time"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetAnimationTime"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"Identifier","name":"AnimationName"}}]}}}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"SoundName"}],"init":[{"type":"StringLiteral","value":"grumpyidle_01m","raw":"\"grumpyidle_01m\""}]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetUserCtrlCompPause"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bPaused"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayAnimation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"Identifier","name":"AnimationName"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fPriority"},"value":{"type":"NumericLiteral","value":2,"raw":"2.0"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlaySound"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"strSoundName"},"value":{"type":"Identifier","name":"SoundName"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"AnimationTime"},{"type":"StringLiteral","value":"UnPausePlayer","raw":"\"UnPausePlayer\""},{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"UnPausePlayer","raw":"\"UnPausePlayer\""}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"leadOut"},"value":{"type":"NumericLiteral","value":1,"raw":"1.0"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetUserCtrlCompPause"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bPaused"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"ToolTipTimer","raw":"\"ToolTipTimer\""}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player2"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"DisplayTooltip"},"base":{"type":"Identifier","name":"player2"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bShow"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"strText"},"value":{"type":"CallExpression","base":{"type":"Identifier","name":"Localize"},"arguments":[{"type":"StringLiteral","value":"AG_TOOLTIP_CON_ROCKSTAR","raw":"\"AG_TOOLTIP_CON_ROCKSTAR\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"iTime"},"value":{"type":"NumericLiteral","value":5000,"raw":"5000"}}]}}}]}]}]}],"comments":[{"type":"Comment","value":"require('o_mis')","raw":"--require('o_mis')"},{"type":"Comment","value":"-------------------------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------------------------"},{"type":"Comment","value":" Client-side script for Concert instrument Quick Builds. When the instruments are built, they send a message","raw":"-- Client-side script for Concert instrument Quick Builds. When the instruments are built, they send a message"},{"type":"Comment","value":" to the zone script, which will then lock the mini-fig into an imagination-draining \"playing the instrument\" ","raw":"-- to the zone script, which will then lock the mini-fig into an imagination-draining \"playing the instrument\" "},{"type":"Comment","value":" animation until the player exits or runs out of imagination. The instrument's music track will be turned on ","raw":"-- animation until the player exits or runs out of imagination. The instrument's music track will be turned on "},{"type":"Comment","value":" for the duration.","raw":"-- for the duration."},{"type":"Comment","value":"-------------------------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------------------------"},{"type":"Comment","value":"print (\"starting up\")","raw":"--print (\"starting up\")"},{"type":"Comment","value":" When the Quick Build is completed, send a message to the zone script","raw":"-- When the Quick Build is completed, send a message to the zone script"},{"type":"Comment","value":"print (msg.iState) ","raw":"--print (msg.iState) "},{"type":"Comment","value":"self:GetObjectsInGroup{ group = \"Stage_Group\" }.objects:NotifyObject{objIDSender=self, name=\"RebuildComplete\", param1=self:GetLOT().objtemplate}","raw":"--self:GetObjectsInGroup{ group = \"Stage_Group\" }.objects:NotifyObject{objIDSender=self, name=\"RebuildComplete\", param1=self:GetLOT().objtemplate}"},{"type":"Comment","value":" Remove player control and play the appropriate animation","raw":"-- Remove player control and play the appropriate animation"},{"type":"Comment","value":"local player2 = GAMEOBJ:GetObjectByID(GAMEOBJ:GetLocalCharID())","raw":"--local player2 = GAMEOBJ:GetObjectByID(GAMEOBJ:GetLocalCharID())"},{"type":"Comment","value":"print (AnimationName)","raw":"--print (AnimationName)"},{"type":"Comment","value":" Get the player again (local variables aren't shared by different functions) and return player control","raw":"-- Get the player again (local variables aren't shared by different functions) and return player control"},{"type":"Comment","value":"Tool Tip must play later because Rebuild Code automatically closes any tool tips.","raw":"--Tool Tip must play later because Rebuild Code automatically closes any tool tips."},{"type":"Comment","value":"print (\"ToolTip Timer has FIRED \" .. player2:GetID())","raw":"--print (\"ToolTip Timer has FIRED \" .. player2:GetID())"}]}