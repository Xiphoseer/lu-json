{"type":"Chunk","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"o_mis","raw":"'o_mis'"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"c_AvantGardens","raw":"'c_AvantGardens'"}]}},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"REBUILD_STATE_COMPLETED","raw":"\"REBUILD_STATE_COMPLETED\""}}],"init":[{"type":"NumericLiteral","value":2,"raw":"2"}]},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"UPDATE_FREQUENCY","raw":"\"UPDATE_FREQUENCY\""}}],"init":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bBeingPlayed","raw":"\"bBeingPlayed\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"ResetEquippableIDs"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"checkingInstrumentAnim","raw":"\"checkingInstrumentAnim\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionX","raw":"\"targetPositionX\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionZ","raw":"\"targetPositionZ\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"leftInventoryObjectID","raw":"\"leftInventoryObjectID\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rightInventoryObjectID","raw":"\"rightInventoryObjectID\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"reequipPlayer","raw":"\"reequipPlayer\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onRebuildNotifyState"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsValidInstrument"},"arguments":[{"type":"Identifier","name":"instrumentLOT"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"iState"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"REBUILD_STATE_COMPLETED","raw":"\"REBUILD_STATE_COMPLETED\""}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"storeObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"player"},"base":{"type":"Identifier","name":"msg"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"QuickBuildWasBuilt"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"QuickBuildWasBuilt"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"SetPlayerControl"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"Hide","raw":"\"Hide\""},{"type":"Identifier","name":"self"}]}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"Play","raw":"\"Play\""},{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"IsValidInstrument"},"isLocal":false,"parameters":[{"type":"Identifier","name":"LOT"}],"body":[{"type":"ReturnStatement","arguments":[{"type":"LogicalExpression","operator":"or","left":{"type":"LogicalExpression","operator":"or","left":{"type":"LogicalExpression","operator":"or","left":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"LOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_LOT_GUITAR","raw":"\"INSTRUMENT_LOT_GUITAR\""}}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"LOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_LOT_BASS","raw":"\"INSTRUMENT_LOT_BASS\""}}}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"LOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_LOT_KEYBOARD","raw":"\"INSTRUMENT_LOT_KEYBOARD\""}}}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"LOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_LOT_DRUM","raw":"\"INSTRUMENT_LOT_DRUM\""}}},"inParens":true}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"PlayCinematic"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"szPathName"}],"init":[{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_CINEMATIC","raw":"\"INSTRUMENT_CINEMATIC\""}},"index":{"type":"Identifier","name":"instrumentLOT"}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"Identifier","name":"szPathName"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"PlayInstrumentAnim"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"playInstrumentAnim","raw":"\"playInstrumentAnim\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"param1"},"value":{"type":"Identifier","name":"instrumentLOT"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"AffectMusic"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"},{"type":"Identifier","name":"bActivate"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"szMusicName"}],"init":[{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_MUSIC","raw":"\"INSTRUMENT_MUSIC\""}},"index":{"type":"Identifier","name":"instrumentLOT"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"bActivate","inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"startMusic","raw":"\"startMusic\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"param1"},"value":{"type":"Identifier","name":"instrumentLOT"}}]}}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"stopMusic","raw":"\"stopMusic\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"param1"},"value":{"type":"Identifier","name":"instrumentLOT"}}]}}}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"PlayInstrument"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bBeingPlayed","raw":"\"bBeingPlayed\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"RememberInventoryItems"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"TrackRecentMovementKeys"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"PlayCinematic"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"ResetPlayersAnim"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"PlayInstrumentAnim"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"AffectMusic"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"StartUpdateTimer"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"StartImaginationCostTimer"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"Hide","raw":"\"Hide\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"HideQuickbuild"},"arguments":[{"type":"Identifier","name":"self"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"RepositionPlayer"},"arguments":[{"type":"Identifier","name":"self"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"Play","raw":"\"Play\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"PlayInstrument"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"CheckOnPlayer","raw":"\"CheckOnPlayer\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"UpdateBeingPlayed"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"DecreaseImagination","raw":"\"DecreaseImagination\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"DecreasePlayersImagination"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"EndPlayer","raw":"\"EndPlayer\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"EndActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"Unequip","raw":"\"Unequip\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"SetPlayerControl"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"UnequipEquippables"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"checkAnim","raw":"\"checkAnim\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckInstrumentAnim"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"checkInventory","raw":"\"checkInventory\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckInventoryItems"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"checkInstrumentEquippables","raw":"\"checkInstrumentEquippables\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckInstrumentEquippables"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"StopPlayingInstrument"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bBeingPlayed","raw":"\"bBeingPlayed\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"TrackRecentMovementKeys"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"leadOut"},"value":{"type":"NumericLiteral","value":1,"raw":"1.0"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"AffectMusic"},"arguments":[{"type":"Identifier","name":"self"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelTimer"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"StringLiteral","value":"CheckOnPlayer","raw":"\"CheckOnPlayer\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelTimer"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"StringLiteral","value":"DecreaseImagination","raw":"\"DecreaseImagination\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelTimer"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"StringLiteral","value":"checkAnim","raw":"\"checkAnim\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelTimer"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"StringLiteral","value":"checkInventory","raw":"\"checkInventory\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelTimer"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"StringLiteral","value":"checkInstrumentEquippables","raw":"\"checkInstrumentEquippables\""},{"type":"Identifier","name":"self"}]}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"PlaySmashAnim"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"StartUpdateTimer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"UPDATE_FREQUENCY","raw":"\"UPDATE_FREQUENCY\""}},{"type":"StringLiteral","value":"CheckOnPlayer","raw":"\"CheckOnPlayer\""},{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"StartImaginationCostTimer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_COST_FREQUENCY","raw":"\"INSTRUMENT_COST_FREQUENCY\""}},{"type":"StringLiteral","value":"DecreaseImagination","raw":"\"DecreaseImagination\""},{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"UpdateBeingPlayed"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bBeingPlayed","raw":"\"bBeingPlayed\""}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"bOutOfImagination"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"IsPlayerOutOfImagination"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"bMovement"}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"bOutOfImagination"},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bMovement"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"DidPlayerHitMovementKey"},"arguments":[{"type":"Identifier","name":"self"}]}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"Identifier","name":"bOutOfImagination"},"right":{"type":"Identifier","name":"bMovement"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"stopPlaying","raw":"\"stopPlaying\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}}]}}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"StartUpdateTimer"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"IsPlayerOutOfImagination"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"ReturnStatement","arguments":[{"type":"BinaryExpression","operator":"<=","left":{"type":"CallExpression","base":{"type":"Identifier","name":"GetPlayersImagination"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"NumericLiteral","value":0,"raw":"0"},"inParens":true}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"GetPlayersImagination"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"NumericLiteral","value":0,"raw":"0"}]}]},{"type":"ElseClause","body":[{"type":"ReturnStatement","arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"imagination"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetImagination"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"GetActivePlayer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"ReturnStatement","arguments":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"DecreasePlayersImagination"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"iOldAmount"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetPlayersImagination"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"iNewAmount"}],"init":[{"type":"BinaryExpression","operator":"-","left":{"type":"Identifier","name":"iOldAmount"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_IMAGINATION_COST","raw":"\"INSTRUMENT_IMAGINATION_COST\""}}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"<","left":{"type":"Identifier","name":"iNewAmount"},"right":{"type":"NumericLiteral","value":0,"raw":"0"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"iNewAmount"}],"init":[{"type":"NumericLiteral","value":0,"raw":"0"}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetImagination"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"imagination"},"value":{"type":"Identifier","name":"iNewAmount"}}]}}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"StartImaginationCostTimer"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"DidPlayerHitMovementKey"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"keysMsg"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetRecentMovementKeys"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}]},{"type":"ReturnStatement","arguments":[{"type":"LogicalExpression","operator":"or","left":{"type":"LogicalExpression","operator":"or","left":{"type":"LogicalExpression","operator":"or","left":{"type":"LogicalExpression","operator":"or","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bForwardPressed"},"base":{"type":"Identifier","name":"keysMsg"}},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bReversePressed"},"base":{"type":"Identifier","name":"keysMsg"}}},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bLeftPressed"},"base":{"type":"Identifier","name":"keysMsg"}}},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bRightPressed"},"base":{"type":"Identifier","name":"keysMsg"}}},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bJumpPressed"},"base":{"type":"Identifier","name":"keysMsg"}},"inParens":true}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"SetPlayerControl"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"bRestore"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"eChangeType"}],"init":[{"type":"StringLiteral","value":"PUSH","raw":"\"PUSH\""}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"bRestore"},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"eChangeType"}],"init":[{"type":"StringLiteral","value":"POP","raw":"\"POP\""}]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetStunned"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"StateChangeType"},"value":{"type":"Identifier","name":"eChangeType"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantMove"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantTurn"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantAttack"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantEquip"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantInteract"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"IsLocalPlayerActive"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"ReturnStatement","arguments":[{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""}]},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"inParens":true}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"TrackRecentMovementKeys"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"bTrack"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"TrackRecentMovementKeys"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bTrackForward"},"value":{"type":"Identifier","name":"bTrack"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bTrackReverse"},"value":{"type":"Identifier","name":"bTrack"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bTrackLeft"},"value":{"type":"Identifier","name":"bTrack"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bTrackRight"},"value":{"type":"Identifier","name":"bTrack"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bTrackJump"},"value":{"type":"Identifier","name":"bTrack"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"UnequipEquippables"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"bInstrumentEquippables"}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"equippableLeft","raw":"\"equippableLeft\""}]},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"NotifyObject"},"base":{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"equippableLeft","raw":"\"equippableLeft\""}]}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"unequip","raw":"\"unequip\""}}]}}},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bInstrumentEquippables"}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"equippableRight","raw":"\"equippableRight\""}]},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"NotifyObject"},"base":{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"equippableRight","raw":"\"equippableRight\""}]}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"unequip","raw":"\"unequip\""}}]}}},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bInstrumentEquippables"}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"bInstrumentEquippables","inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"checkInstrumentEquippables","raw":"\"checkInstrumentEquippables\""},{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"EndActivePlayer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"ResetPlayersAnim"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"storeObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"reequipPlayer","raw":"\"reequipPlayer\""},{"type":"Identifier","name":"player"}]}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"ReequipInventoryItems"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"checkingInstrumentAnim","raw":"\"checkingInstrumentAnim\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionX","raw":"\"targetPositionX\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionZ","raw":"\"targetPositionZ\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"reset","raw":"\"reset\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"PlaySmashAnim"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"szAnimName"}],"init":[{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_SMASH_ANIM","raw":"\"INSTRUMENT_SMASH_ANIM\""}},"index":{"type":"Identifier","name":"instrumentLOT"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"szAnimName"},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},"inParens":true},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"playSmashAnim","raw":"\"playSmashAnim\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"param1"},"value":{"type":"Identifier","name":"instrumentLOT"}}]}}}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"animLength"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"time"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetAnimationTime"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"Identifier","name":"szAnimName"}}]}}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"animLength"},{"type":"StringLiteral","value":"EndPlayer","raw":"\"EndPlayer\""},{"type":"Identifier","name":"self"}]}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"PlanWhenToUnequipAndRestorePlayerControl"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}]}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"szAnimName"},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"EndActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"HideQuickbuild"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_HIDE","raw":"\"INSTRUMENT_HIDE\""}},"index":{"type":"Identifier","name":"instrumentLOT"}},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0,"raw":"0.0"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"RepositionPlayer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"qbPos"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"pos"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetPosition"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"qbRot"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetRotation"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerPos"}],"init":[{"type":"Identifier","name":"qbPos"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerRot"}],"init":[{"type":"Identifier","name":"qbRot"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"instrumentLOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_LOT_DRUM","raw":"\"INSTRUMENT_LOT_DRUM\""}},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"drumOffset"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"NumericLiteral","value":0,"raw":"0.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"NumericLiteral","value":0,"raw":"0.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}}]}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"playerPos"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"newPosition"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetParallelPosition"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"referenceObject"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"offset"},"value":{"type":"Identifier","name":"drumOffset"}}]}}}]}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"instrumentLOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_LOT_BASS","raw":"\"INSTRUMENT_LOT_BASS\""}},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"drumOffset"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"NumericLiteral","value":5,"raw":"5.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"NumericLiteral","value":0,"raw":"0.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"NumericLiteral","value":0,"raw":"0.0"}}]}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"playerPos"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"newPosition"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetParallelPosition"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"referenceObject"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"offset"},"value":{"type":"Identifier","name":"drumOffset"}}]}}}]}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"instrumentLOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_LOT_GUITAR","raw":"\"INSTRUMENT_LOT_GUITAR\""}},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"drumOffset"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"NumericLiteral","value":5,"raw":"5.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"NumericLiteral","value":0,"raw":"0.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"NumericLiteral","value":0,"raw":"0.0"}}]}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"playerPos"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"newPosition"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetParallelPosition"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"referenceObject"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"offset"},"value":{"type":"Identifier","name":"drumOffset"}}]}}}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsLocalPlayerActive"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":true,"raw":"true"}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetPosition"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pos"},"value":{"type":"Identifier","name":"playerPos"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetRotation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"w"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"w"},"base":{"type":"Identifier","name":"playerRot"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"playerRot"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"playerRot"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"playerRot"}}}]}}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"instrumentLOT"},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_LOT_KEYBOARD","raw":"\"INSTRUMENT_LOT_KEYBOARD\""}},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"newRot"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"pos"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetPosition"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"newRot"}}],"init":[{"type":"NumericLiteral","value":0,"raw":"0.0"}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"newRot"}}],"init":[{"type":"NumericLiteral","value":1.5708,"raw":"1.5708"}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"newRot"}}],"init":[{"type":"NumericLiteral","value":0,"raw":"0.0"}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RotateObject"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"rotation"},"value":{"type":"Identifier","name":"newRot"}}]}}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionX","raw":"\"targetPositionX\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"playerPos"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionZ","raw":"\"targetPositionZ\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"playerPos"}}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"LoadEquippables"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""}]},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"leftLOT"}],"init":[{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_EQUIPPABLE_LOT_LEFT","raw":"\"INSTRUMENT_EQUIPPABLE_LOT_LEFT\""}},"index":{"type":"Identifier","name":"instrumentLOT"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"rightLOT"}],"init":[{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_EQUIPPABLE_LOT_RIGHT","raw":"\"INSTRUMENT_EQUIPPABLE_LOT_RIGHT\""}},"index":{"type":"Identifier","name":"instrumentLOT"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"config"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"equip","raw":"\"equip\""}},{"type":"TableValue","value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"owner","raw":"\"owner\""}},{"type":"TableValue","value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"|","raw":"\"|\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""}]}}}]}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"leftLOT"},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"LoadObject"},"base":{"type":"Identifier","name":"RESMGR"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"objectTemplate"},"value":{"type":"Identifier","name":"leftLOT"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"owner"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"rw"},"value":{"type":"NumericLiteral","value":1,"raw":"1.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bIsLocalPlayer"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bDroppedLoot"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"configData"},"value":{"type":"Identifier","name":"config"}}]}}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"rightLOT"},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"LoadObject"},"base":{"type":"Identifier","name":"RESMGR"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"objectTemplate"},"value":{"type":"Identifier","name":"rightLOT"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"owner"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"rw"},"value":{"type":"NumericLiteral","value":1,"raw":"1.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bIsLocalPlayer"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bDroppedLoot"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"configData"},"value":{"type":"Identifier","name":"config"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"IsValidLeftEquippable"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"LOT"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"LOT"},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"ReturnStatement","arguments":[{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"LOT"},"right":{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_EQUIPPABLE_LOT_LEFT","raw":"\"INSTRUMENT_EQUIPPABLE_LOT_LEFT\""}},"index":{"type":"Identifier","name":"instrumentLOT"}},"inParens":true}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"IsValidRightEquippable"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"LOT"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"LOT"},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"ReturnStatement","arguments":[{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"LOT"},"right":{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_EQUIPPABLE_LOT_RIGHT","raw":"\"INSTRUMENT_EQUIPPABLE_LOT_RIGHT\""}},"index":{"type":"Identifier","name":"instrumentLOT"}},"inParens":true}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onChildLoaded"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"childLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"childID"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"Identifier","name":"IsValidLeftEquippable"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"childLOT"}],"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"storeObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"equippableLeft","raw":"\"equippableLeft\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"childID"},"base":{"type":"Identifier","name":"msg"}}]}}]},{"type":"ElseifClause","condition":{"type":"CallExpression","base":{"type":"Identifier","name":"IsValidRightEquippable"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"childLOT"}],"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"storeObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"equippableRight","raw":"\"equippableRight\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"childID"},"base":{"type":"Identifier","name":"msg"}}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ResetEquippableIDs"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"equippableLeft","raw":"\"equippableLeft\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"equippableRight","raw":"\"equippableRight\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ResetPlayersAnim"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ResetPrimaryAnimation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ResetSecondaryAnimation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"PlanWhenToUnequipAndRestorePlayerControl"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"instrumentLOT"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"unequipTime"}],"init":[{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_UNEQUIP_TIME","raw":"\"INSTRUMENT_UNEQUIP_TIME\""}},"index":{"type":"Identifier","name":"instrumentLOT"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"unequipTime"},"right":{"type":"NumericLiteral","value":0,"raw":"0"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"SetPlayerControl"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"UnequipEquippables"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"unequipTime"},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"SetPlayerControl"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"unequipTime"},{"type":"StringLiteral","value":"Unequip","raw":"\"Unequip\""},{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onNotifyClientObject"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"stopPlaying","raw":"\"stopPlaying\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"StopPlayingInstrument"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"loadEquippables","raw":"\"loadEquippables\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"LoadEquippables"},"arguments":[{"type":"Identifier","name":"self"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"playerLeft","raw":"\"playerLeft\""},"inParens":true},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""}]},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"paramObj"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bBeingPlayed","raw":"\"bBeingPlayed\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"activePlayer","raw":"\"activePlayer\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"reset","raw":"\"reset\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"UnequipEquippables"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"checkInstrumentAnim","raw":"\"checkInstrumentAnim\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"checkingInstrumentAnim","raw":"\"checkingInstrumentAnim\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckInstrumentAnim"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"CheckInstrumentAnim"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"checkingInstrumentAnim","raw":"\"checkingInstrumentAnim\""}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"currentPos"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"pos"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetPosition"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"targetPosX"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionX","raw":"\"targetPositionX\""}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"targetPosZ"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionZ","raw":"\"targetPositionZ\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"targetPosX"},"right":{"type":"NilLiteral","value":null,"raw":"nil"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"targetPosZ"},"right":{"type":"NilLiteral","value":null,"raw":"nil"}},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"deltaX"}],"init":[{"type":"BinaryExpression","operator":"-","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"currentPos"}},"right":{"type":"Identifier","name":"targetPosX"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"deltaZ"}],"init":[{"type":"BinaryExpression","operator":"-","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"currentPos"}},"right":{"type":"Identifier","name":"targetPosZ"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"<","left":{"type":"Identifier","name":"deltaX"},"right":{"type":"NumericLiteral","value":0,"raw":"0.0"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"deltaX"}],"init":[{"type":"BinaryExpression","operator":"-","left":{"type":"NumericLiteral","value":0,"raw":"0.0"},"right":{"type":"Identifier","name":"deltaX"}}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"<","left":{"type":"Identifier","name":"deltaZ"},"right":{"type":"NumericLiteral","value":0,"raw":"0.0"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"deltaZ"}],"init":[{"type":"BinaryExpression","operator":"-","left":{"type":"NumericLiteral","value":0,"raw":"0.0"},"right":{"type":"Identifier","name":"deltaZ"}}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"tolerance"}],"init":[{"type":"NumericLiteral","value":0.5,"raw":"0.5"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"<","left":{"type":"Identifier","name":"deltaX"},"right":{"type":"Identifier","name":"tolerance"}},"right":{"type":"BinaryExpression","operator":"<","left":{"type":"Identifier","name":"deltaZ"},"right":{"type":"Identifier","name":"tolerance"}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"checkingInstrumentAnim","raw":"\"checkingInstrumentAnim\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionX","raw":"\"targetPositionX\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"targetPositionZ","raw":"\"targetPositionZ\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayAnimation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"IndexExpression","base":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"INSTRUMENT_ANIM","raw":"\"INSTRUMENT_ANIM\""}},"index":{"type":"Identifier","name":"instrumentLOT"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fPriority"},"value":{"type":"NumericLiteral","value":4,"raw":"4.0"}}]}}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"checkAnim","raw":"\"checkAnim\""},{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"RememberInventoryItems"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"leftObj"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objectID"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetEquippedItemInfo"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"slot"},"value":{"type":"StringLiteral","value":"special_l","raw":"\"special_l\""}}]}}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"rightObj"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objectID"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetEquippedItemInfo"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"slot"},"value":{"type":"StringLiteral","value":"special_r","raw":"\"special_r\""}}]}}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"bInventoryItemsEquipped"}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"leftObj"}},"arguments":[]},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"leftInventoryObjectID","raw":"\"leftInventoryObjectID\""},{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"|","raw":"\"|\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"leftObj"}},"arguments":[]}}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"UnEquipInventory"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"itemtounequip"},"value":{"type":"Identifier","name":"leftObj"}}]}}},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bInventoryItemsEquipped"}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"rightObj"}},"arguments":[]},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rightInventoryObjectID","raw":"\"rightInventoryObjectID\""},{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"|","raw":"\"|\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"rightObj"}},"arguments":[]}}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"UnEquipInventory"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"itemtounequip"},"value":{"type":"Identifier","name":"rightObj"}}]}}},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bInventoryItemsEquipped"}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"bInventoryItemsEquipped","inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"checkInventory","raw":"\"checkInventory\""},{"type":"Identifier","name":"self"}]}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"loadEquippables","raw":"\"loadEquippables\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"CheckInventoryItems"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetActivePlayer"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"leftObj"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objectID"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetEquippedItemInfo"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"slot"},"value":{"type":"StringLiteral","value":"special_l","raw":"\"special_l\""}}]}}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"rightObj"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objectID"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetEquippedItemInfo"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"slot"},"value":{"type":"StringLiteral","value":"special_r","raw":"\"special_r\""}}]}}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"leftObj"}},"arguments":[]},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"rightObj"}},"arguments":[]}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"checkInventory","raw":"\"checkInventory\""},{"type":"Identifier","name":"self"}]}}]},{"type":"ElseClause","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"instrumentLOT"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"loadEquippables","raw":"\"loadEquippables\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ReequipInventoryItems"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"reequipPlayer","raw":"\"reequipPlayer\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"}},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"reequipPlayer","raw":"\"reequipPlayer\""}]},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"leftObj"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"leftInventoryObjectID","raw":"\"leftInventoryObjectID\""}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"rightObj"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"rightInventoryObjectID","raw":"\"rightInventoryObjectID\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"leftObj"}},"arguments":[]},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"reequipItem","raw":"\"reequipItem\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"param1"},"value":{"type":"Identifier","name":"leftObj"}}]}}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"rightObj"}},"arguments":[]},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"reequipItem","raw":"\"reequipItem\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"param1"},"value":{"type":"Identifier","name":"rightObj"}}]}}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"leftInventoryObjectID","raw":"\"leftInventoryObjectID\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rightInventoryObjectID","raw":"\"rightInventoryObjectID\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"reequipPlayer","raw":"\"reequipPlayer\""},{"type":"NilLiteral","value":null,"raw":"nil"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"CheckInstrumentEquippables"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"reequipPlayer","raw":"\"reequipPlayer\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"player"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"bStillEquipped"}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"equippableLeft","raw":"\"equippableLeft\""}]},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"leftItem"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"equippableLeft","raw":"\"equippableLeft\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"isequipped"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"IsItemEquipped"},"base":{"type":"Identifier","name":"leftItem"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bStillEquipped"}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"equippableRight","raw":"\"equippableRight\""}]},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"rightItem"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"equippableRight","raw":"\"equippableRight\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"isequipped"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"IsItemEquipped"},"base":{"type":"Identifier","name":"rightItem"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bStillEquipped"}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"bStillEquipped","inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"checkInstrumentEquippables","raw":"\"checkInstrumentEquippables\""},{"type":"Identifier","name":"self"}]}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"ResetEquippableIDs"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]}],"comments":[{"type":"Comment","value":"-------------------------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------------------------"},{"type":"Comment","value":" Client-side script for Concert instrument Quick Builds.","raw":"-- Client-side script for Concert instrument Quick Builds."},{"type":"Comment","value":" When an instrument is built, it locks the mini-fig into an imagination-draining animation.","raw":"-- When an instrument is built, it locks the mini-fig into an imagination-draining animation."},{"type":"Comment","value":" This lasts until the player runs out of imagination or moves voluntarily.","raw":"-- This lasts until the player runs out of imagination or moves voluntarily."},{"type":"Comment","value":" Players will hear different music depending on which instruments are currently being played.","raw":"-- Players will hear different music depending on which instruments are currently being played."},{"type":"Comment","value":"-------------------------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Includes","raw":"-- Includes"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" constants","raw":"-- constants"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" copied from enum ERebuildChallengeState in lwoGame \\ include \\ LWORebuild.h","raw":"-- copied from enum ERebuildChallengeState in lwoGame \\ include \\ LWORebuild.h"},{"type":"Comment","value":" Challenge complete","raw":"-- Challenge complete"},{"type":"Comment","value":" while playing the instrument, how often we check whether the player hit a movement key to stop playing","raw":"-- while playing the instrument, how often we check whether the player hit a movement key to stop playing"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Startup","raw":"-- Startup"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" called anytime the rebuild object's state changes","raw":"-- called anytime the rebuild object's state changes"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" make sure we didn't attach this script to some object besides our quickbuild instruments","raw":"-- make sure we didn't attach this script to some object besides our quickbuild instruments"},{"type":"Comment","value":" When the Quick Build is completed, the player gets to play it if they have any imagination    ","raw":"-- When the Quick Build is completed, the player gets to play it if they have any imagination    "},{"type":"Comment","value":" take control away from the player","raw":"-- take control away from the player"},{"type":"Comment","value":" set timers for when to hide the completed quickbuild and show the player playing the instrument","raw":"-- set timers for when to hide the completed quickbuild and show the player playing the instrument"},{"type":"Comment","value":" do this quicky so we don't have to watch the finished quickbuild model to slam into place","raw":"-- do this quicky so we don't have to watch the finished quickbuild model to slam into place"},{"type":"Comment","value":" but we have to wait slightly first or get overridden by the quickbuild code","raw":"-- but we have to wait slightly first or get overridden by the quickbuild code"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" checks whether the given LOT is one of the instrument quickbuilds","raw":"-- checks whether the given LOT is one of the instrument quickbuilds"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" show the camera panning around the concert area","raw":"-- show the camera panning around the concert area"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" play the animation of the mini-fig playing the given instrument","raw":"-- play the animation of the mini-fig playing the given instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" start the animation","raw":"-- start the animation"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" add or remove music according to which instrument someone just started or stopped playing","raw":"-- add or remove music according to which instrument someone just started or stopped playing"},{"type":"Comment","value":" pass true to bActivate to turn the music on, or false to turn it off.","raw":"-- pass true to bActivate to turn the music on, or false to turn it off."},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" start the process of seeing the player playing the instrument","raw":"-- start the process of seeing the player playing the instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" remember that someone is using this instrument","raw":"-- remember that someone is using this instrument"},{"type":"Comment","value":" load any related equippables (guitar, bass, drumsticks), which will equip onto the player","raw":"-- load any related equippables (guitar, bass, drumsticks), which will equip onto the player"},{"type":"Comment","value":"self:FireEventServerSide{ args = \"swapEquippables\", senderID = player }","raw":"--self:FireEventServerSide{ args = \"swapEquippables\", senderID = player }"},{"type":"Comment","value":" start keeping track of movement key presses long enough to know if the player wants to break out of playing the instument","raw":"-- start keeping track of movement key presses long enough to know if the player wants to break out of playing the instument"},{"type":"Comment","value":" show the cinematic","raw":"-- show the cinematic"},{"type":"Comment","value":" play the animation of the mini-fig playing the given instrument","raw":"-- play the animation of the mini-fig playing the given instrument"},{"type":"Comment","value":" try to stop the quickbuild victory anim","raw":"-- try to stop the quickbuild victory anim"},{"type":"Comment","value":" start the appropriate music","raw":"-- start the appropriate music"},{"type":"Comment","value":" start a timer for when to check whether the instrument is still being played","raw":"-- start a timer for when to check whether the instrument is still being played"},{"type":"Comment","value":" start a timer for decreasing the player's imagination","raw":"-- start a timer for decreasing the player's imagination"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" timers","raw":"-- timers"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" have the player stop playing the instrument","raw":"-- have the player stop playing the instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" stop checking to see if the player finished playing the instrument","raw":"-- stop checking to see if the player finished playing the instrument"},{"type":"Comment","value":" stop keeping track of movement key presses","raw":"-- stop keeping track of movement key presses"},{"type":"Comment","value":" make sure the cinematic is stopped","raw":"-- make sure the cinematic is stopped"},{"type":"Comment","value":" don't want to hear this instrument anymore","raw":"-- don't want to hear this instrument anymore"},{"type":"Comment","value":" cancel timers that may be running","raw":"-- cancel timers that may be running"},{"type":"Comment","value":" show the player smashing the instrument","raw":"-- show the player smashing the instrument"},{"type":"Comment","value":" and plan when to unequip any equippables for this instrument","raw":"-- and plan when to unequip any equippables for this instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" start a timer for when to check whether the player is still playing the instrument","raw":"-- start a timer for when to check whether the player is still playing the instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" start a timer for when to decrease the player's imagination","raw":"-- start a timer for when to decrease the player's imagination"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" check whether the intrument is still being played","raw":"-- check whether the intrument is still being played"},{"type":"Comment","value":" this stops if the player runs out of imagination or takes control by moving","raw":"-- this stops if the player runs out of imagination or takes control by moving"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" check whether the player as run out of imagination","raw":"-- check whether the player as run out of imagination"},{"type":"Comment","value":" if not, check whether the player hit a movement key","raw":"-- if not, check whether the player hit a movement key"},{"type":"Comment","value":" if the player has run out of imagination or hit a movement key, then kick them off the instrument","raw":"-- if the player has run out of imagination or hit a movement key, then kick them off the instrument"},{"type":"Comment","value":" otherwise, set a new timer to check again","raw":"-- otherwise, set a new timer to check again"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" returns whether the player has run out of imagination","raw":"-- returns whether the player has run out of imagination"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" returns how much imagination the player currently has","raw":"-- returns how much imagination the player currently has"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" returns the ID of the active player","raw":"-- returns the ID of the active player"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" takes some imagination away from the player","raw":"-- takes some imagination away from the player"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" get how much imagination the player has now","raw":"-- get how much imagination the player has now"},{"type":"Comment","value":" subtract the cost of using the instrument","raw":"-- subtract the cost of using the instrument"},{"type":"Comment","value":" update their imagination","raw":"-- update their imagination"},{"type":"Comment","value":" start a new timer for when to decrease their imagination next","raw":"-- start a new timer for when to decrease their imagination next"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" returns whether the player hit one of the movement keys","raw":"-- returns whether the player hit one of the movement keys"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" takes away or gives back player control","raw":"-- takes away or gives back player control"},{"type":"Comment","value":" (pass in false to take it away, true to turn it back on)","raw":"-- (pass in false to take it away, true to turn it back on)"},{"type":"Comment","value":" Make sure you match calls to this carefully because the \"PUSH\" and \"POP\" sent to SetStunned","raw":"-- Make sure you match calls to this carefully because the \"PUSH\" and \"POP\" sent to SetStunned"},{"type":"Comment","value":" increment or decrement the control's corresponding variable.","raw":"-- increment or decrement the control's corresponding variable."},{"type":"Comment","value":" (Each \"true\" sent to SetStunned below is used to know which controls' variables to adjust.)","raw":"-- (Each \"true\" sent to SetStunned below is used to know which controls' variables to adjust.)"},{"type":"Comment","value":" You can see how this works at LwoGame \\ source \\ LWOControllablePhysComponent.cpp in method msgSetStunned","raw":"-- You can see how this works at LwoGame \\ source \\ LWOControllablePhysComponent.cpp in method msgSetStunned"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" note: we can't use SetUserCtrlCompPause because","raw":"-- note: we can't use SetUserCtrlCompPause because"},{"type":"Comment","value":" we still need to receive player movement values in order to know","raw":"-- we still need to receive player movement values in order to know"},{"type":"Comment","value":" if they want to break out of the instrument before running out of imagination.","raw":"-- if they want to break out of the instrument before running out of imagination."},{"type":"Comment","value":" So we use SetStunned instead.","raw":"-- So we use SetStunned instead."},{"type":"Comment","value":" SetStunned also lets the player move the camera up and down,","raw":"-- SetStunned also lets the player move the camera up and down,"},{"type":"Comment","value":" which is consistent with what is allowed while they buid the quickbuild.","raw":"-- which is consistent with what is allowed while they buid the quickbuild."},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" check whether the active player is also the local player","raw":"-- check whether the active player is also the local player"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" tell the player's LWOUserControlComponent to start or stop tracking recent presses.","raw":"-- tell the player's LWOUserControlComponent to start or stop tracking recent presses."},{"type":"Comment","value":" When off, it only knows which key presses occurred that frame.","raw":"-- When off, it only knows which key presses occurred that frame."},{"type":"Comment","value":" If we turn on this tracking, it will rememeber key presses long enough for us to send a query several frames later and","raw":"-- If we turn on this tracking, it will rememeber key presses long enough for us to send a query several frames later and"},{"type":"Comment","value":" still find out if they key was pressed recently.","raw":"-- still find out if they key was pressed recently."},{"type":"Comment","value":" We need to use this since our timer allows us to send queries every so often - not every frame.","raw":"-- We need to use this since our timer allows us to send queries every so often - not every frame."},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" only let the active player turn his own tracking on or off","raw":"-- only let the active player turn his own tracking on or off"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" unequip the instrument equippables from the player","raw":"-- unequip the instrument equippables from the player"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" if this instrument added any equippables, unequip them and","raw":"-- if this instrument added any equippables, unequip them and"},{"type":"Comment","value":" start a timer to keep checking when they're gone and the inventory items can be re-equipped","raw":"-- start a timer to keep checking when they're gone and the inventory items can be re-equipped"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" once the anim of the player smashing the instrument finishes, forget about our active player","raw":"-- once the anim of the player smashing the instrument finishes, forget about our active player"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" reset player's anim so they'll do idles again","raw":"-- reset player's anim so they'll do idles again"},{"type":"Comment","value":" re-equip any inventory items the player had in-hand before playing the instrument","raw":"-- re-equip any inventory items the player had in-hand before playing the instrument"},{"type":"Comment","value":" forget about the active player","raw":"-- forget about the active player"},{"type":"Comment","value":" break the quickbuild","raw":"-- break the quickbuild"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" show the anim of the player smashing the instrument","raw":"-- show the anim of the player smashing the instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" get the name of the anim","raw":"-- get the name of the anim"},{"type":"Comment","value":" play the animation","raw":"-- play the animation"},{"type":"Comment","value":" find out how long the anim is","raw":"-- find out how long the anim is"},{"type":"Comment","value":" set a timer for when to reset the quickbuild","raw":"-- set a timer for when to reset the quickbuild"},{"type":"Comment","value":" unequip equippable items and restore player control","raw":"-- unequip equippable items and restore player control"},{"type":"Comment","value":" or set a timer to do it partway through the smash anim","raw":"-- or set a timer to do it partway through the smash anim"},{"type":"Comment","value":" if there is no smashing anim, reset the quickbuild now","raw":"-- if there is no smashing anim, reset the quickbuild now"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" hide the completed quickbuild, if appropriate for this instrument","raw":"-- hide the completed quickbuild, if appropriate for this instrument"},{"type":"Comment","value":" the guitar and bass need to be hidden because the equippable item shows the whole instrument","raw":"-- the guitar and bass need to be hidden because the equippable item shows the whole instrument"},{"type":"Comment","value":" the drums do not because their equippables are just the drumsticks","raw":"-- the drums do not because their equippables are just the drumsticks"},{"type":"Comment","value":" the keyboard does not because it has no equippables","raw":"-- the keyboard does not because it has no equippables"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" move the player to the best looking position to play this particular instrument","raw":"-- move the player to the best looking position to play this particular instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" get the quickbuild's position and rotation     ","raw":"-- get the quickbuild's position and rotation     "},{"type":"Comment","value":" special case: the player pos needs to be adjusted a little for the drums to put the player behind the drumset","raw":"-- special case: the player pos needs to be adjusted a little for the drums to put the player behind the drumset"},{"type":"Comment","value":" and for the guitar and bass because they are located right on the edge of the state in Happy Flower","raw":"-- and for the guitar and bass because they are located right on the edge of the state in Happy Flower"},{"type":"Comment","value":"player:Teleport{ pos = playerPos, bSetRotation = true, w = playerRot.w, x = playerRot.x, y = playerRot.y, z = playerRot.z }","raw":"--player:Teleport{ pos = playerPos, bSetRotation = true, w = playerRot.w, x = playerRot.x, y = playerRot.y, z = playerRot.z }"},{"type":"Comment","value":" special case: the player's rotation needs to be adjusted a little for the keyboard","raw":"-- special case: the player's rotation needs to be adjusted a little for the keyboard"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" ask the resource manager to load the corresponding equippable item(s) onto the player","raw":"-- ask the resource manager to load the corresponding equippable item(s) onto the player"},{"type":"Comment","value":" guitar and bass: equip the whole instrument","raw":"-- guitar and bass: equip the whole instrument"},{"type":"Comment","value":" drums: equip a drumstick into each hand","raw":"-- drums: equip a drumstick into each hand"},{"type":"Comment","value":" keyboard: no equippables","raw":"-- keyboard: no equippables"},{"type":"Comment","value":" once an equippable is ready, L_AG_CONCERT_INSTRUMENT_EQUIPPABLE_CLIENT.lua will equip it to the player","raw":"-- once an equippable is ready, L_AG_CONCERT_INSTRUMENT_EQUIPPABLE_CLIENT.lua will equip it to the player"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" CONFIG_EQUIP in lwoCommon \\ include \\ LwoConfigData.h","raw":"-- CONFIG_EQUIP in lwoCommon \\ include \\ LwoConfigData.h"},{"type":"Comment","value":" CONFIG_OWNER","raw":"-- CONFIG_OWNER"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" checks whether the given LOT is the left hand equippable for this instrument","raw":"-- checks whether the given LOT is the left hand equippable for this instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" checks whether the given LOT is the right hand equippable for this instrument","raw":"-- checks whether the given LOT is the right hand equippable for this instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" child loaded (the equippables)","raw":"-- child loaded (the equippables)"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" remember the object ID of this equippable so we can easily unequip later","raw":"-- remember the object ID of this equippable so we can easily unequip later"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" reset the object ID's of the equippable items","raw":"-- reset the object ID's of the equippable items"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" tell the player to play idles again","raw":"-- tell the player to play idles again"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" unequip equippable items and restore player control","raw":"-- unequip equippable items and restore player control"},{"type":"Comment","value":" or set a timer to do it partway through the smash anim","raw":"-- or set a timer to do it partway through the smash anim"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" if this instrument has equippable items, set a timer for when to unequip them","raw":"-- if this instrument has equippable items, set a timer for when to unequip them"},{"type":"Comment","value":" for the bass and guitar, the amount of time to wait depends on when during the smash anim it would look best","raw":"-- for the bass and guitar, the amount of time to wait depends on when during the smash anim it would look best"},{"type":"Comment","value":" unequip and restore control now for the drums, which has no smash anim","raw":"-- unequip and restore control now for the drums, which has no smash anim"},{"type":"Comment","value":" the keyboard has no equippables, but restore player control now","raw":"-- the keyboard has no equippables, but restore player control now"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" notification received from server-side script","raw":"-- notification received from server-side script"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" RepositionPlayer moves the player to wherever looks best for this instrument","raw":"-- RepositionPlayer moves the player to wherever looks best for this instrument"},{"type":"Comment","value":" and starts the anim of playing the instrument,","raw":"-- and starts the anim of playing the instrument,"},{"type":"Comment","value":" but other clients will see the player walk from the old spot to the new one","raw":"-- but other clients will see the player walk from the old spot to the new one"},{"type":"Comment","value":" which makes the walk anim overstrike the instrument anim.","raw":"-- which makes the walk anim overstrike the instrument anim."},{"type":"Comment","value":" check and see if this client now sees the active player at the desired position.","raw":"-- check and see if this client now sees the active player at the desired position."},{"type":"Comment","value":" if so, show the instrument playing anim ","raw":"-- if so, show the instrument playing anim "},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" before creating the instrument's equippables, check if the player already has inventory items equipped","raw":"-- before creating the instrument's equippables, check if the player already has inventory items equipped"},{"type":"Comment","value":" if so, unequip the inventory items and","raw":"-- if so, unequip the inventory items and"},{"type":"Comment","value":" remember them so we can reequip them once done with the instrument","raw":"-- remember them so we can reequip them once done with the instrument"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" find out the LWOObjectID's of the items in the mini-fig's hands","raw":"-- find out the LWOObjectID's of the items in the mini-fig's hands"},{"type":"Comment","value":" check which hand(s) this instrument needs to add equippables to","raw":"-- check which hand(s) this instrument needs to add equippables to"},{"type":"Comment","value":" if we need to wait for inventory items to unequip,","raw":"-- if we need to wait for inventory items to unequip,"},{"type":"Comment","value":" set up a timer for checking if it's okay to load the instrument equippables.","raw":"-- set up a timer for checking if it's okay to load the instrument equippables."},{"type":"Comment","value":" if there weren't any inventory items equipped, load the instrument equippables now","raw":"-- if there weren't any inventory items equipped, load the instrument equippables now"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" check whether the inventory items are unequipped yet","raw":"-- check whether the inventory items are unequipped yet"},{"type":"Comment","value":" if so, equip the instrument equippables","raw":"-- if so, equip the instrument equippables"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" the player had inventory items in-hand before playing the instrument.","raw":"-- the player had inventory items in-hand before playing the instrument."},{"type":"Comment","value":" re-equip them.","raw":"-- re-equip them."},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" only allow the local player to re-equip its own inventory items","raw":"-- only allow the local player to re-equip its own inventory items"},{"type":"Comment","value":" remember the LWOObjectID's of the inventory items that we unequipped earlier","raw":"-- remember the LWOObjectID's of the inventory items that we unequipped earlier"},{"type":"Comment","value":" re-equip the left-hand item, if there was one","raw":"-- re-equip the left-hand item, if there was one"},{"type":"Comment","value":" re-equip the right-hand item, if there was one","raw":"-- re-equip the right-hand item, if there was one"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" check whether the insturment's equppibable items are unequipped yet","raw":"-- check whether the insturment's equppibable items are unequipped yet"},{"type":"Comment","value":" if so, re-equip the previously-equipped inventory items, if any","raw":"-- if so, re-equip the previously-equipped inventory items, if any"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" check whether either instrument equippable is still equipped","raw":"-- check whether either instrument equippable is still equipped"}]}