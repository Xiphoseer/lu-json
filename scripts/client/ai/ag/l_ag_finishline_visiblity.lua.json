{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"finishLineFlag"}],"init":[{"type":"NumericLiteral","value":33,"raw":"33"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"Identifier","name":"playerID"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"player"}},"arguments":[]},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bFlag"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetFlag"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iFlagID"},"value":{"type":"Identifier","name":"finishLineFlag"}}]}}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetCollisionGroupToOriginal"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetCollisionGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"colGroup"},"value":{"type":"NumericLiteral","value":16,"raw":"16"}}]}}}]}]}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":1,"raw":"1.0"},{"type":"StringLiteral","value":"RetryStartup","raw":"\"RetryStartup\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"RetryStartup","raw":"\"RetryStartup\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"onStartup"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]}],"comments":[{"type":"Comment","value":" This script is attached to the start/finish line objects in AG.","raw":"-- This script is attached to the start/finish line objects in AG."},{"type":"Comment","value":" It handles showing or hiding the objects after determining if ","raw":"-- It handles showing or hiding the objects after determining if "},{"type":"Comment","value":" the player has previously built the finish line.","raw":"-- the player has previously built the finish line."},{"type":"Comment","value":" make sure the player is ready","raw":"-- make sure the player is ready"},{"type":"Comment","value":" check if the player flag has been set","raw":"-- check if the player flag has been set"},{"type":"Comment","value":"print(\"Showing finish line\")","raw":"--print(\"Showing finish line\")"},{"type":"Comment","value":"print(\"Hiding finish line\")","raw":"--print(\"Hiding finish line\")"},{"type":"Comment","value":" the player is not ready (i.e. not added to the world yet), ","raw":"-- the player is not ready (i.e. not added to the world yet), "},{"type":"Comment","value":" start a timer to check again in a sec","raw":"-- start a timer to check again in a sec"},{"type":"Comment","value":"print(\"Player not ready, retrying in 1 sec\")","raw":"--print(\"Player not ready, retrying in 1 sec\")"},{"type":"Comment","value":" also, initially hide the finish line","raw":"-- also, initially hide the finish line"},{"type":"Comment","value":"print(\"Hiding finish line\")","raw":"--print(\"Hiding finish line\")"},{"type":"Comment","value":" try again...","raw":"-- try again..."}]}