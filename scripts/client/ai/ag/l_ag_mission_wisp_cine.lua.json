{"type":"Chunk","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"o_mis","raw":"'o_mis'"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"npcName"}],"init":[{"type":"StringLiteral","value":"Wisp","raw":"'Wisp'"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"misID"}],"init":[{"type":"NumericLiteral","value":311,"raw":"311"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"camTime"}],"init":[{"type":"NumericLiteral","value":3.5,"raw":"3.5"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"misID_2"}],"init":[{"type":"NumericLiteral","value":335,"raw":"335"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"camTime_2"}],"init":[{"type":"NumericLiteral","value":4.5,"raw":"4.5"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"missionCamDist"}],"init":[{"type":"NumericLiteral","value":10,"raw":"10"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onClientUse"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"MissionDisplay_","raw":"'MissionDisplay_'"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"_Cam","raw":"'_Cam'"}}}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"missionCinematic"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"mission"},{"type":"Identifier","name":"time"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetUserCtrlCompPause"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bPaused"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"Mission_","raw":"'Mission_'"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"_Cam_","raw":"'_Cam_'"},"right":{"type":"CallExpression","base":{"type":"Identifier","name":"tostring"},"arguments":[{"type":"Identifier","name":"mission"}]}}}}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"camTime"},{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"Cam","raw":"'Cam'"}},{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onMissionDialogueOK"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}]}}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bIsComplete"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"missionID"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"Identifier","name":"misID"}}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"missionCinematic"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"misID"},{"type":"Identifier","name":"camTime"}]}}]},{"type":"ElseifClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bIsComplete"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"missionID"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"Identifier","name":"misID_2"}}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"missionCinematic"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"misID_2"},{"type":"Identifier","name":"camTime_2"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onNotifyMission"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"<=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"missionState"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"NumericLiteral","value":1,"raw":"1"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"MissionDisplay_","raw":"'MissionDisplay_'"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"_Cam","raw":"'_Cam'"}}}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTerminateInteraction"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"}]},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.2,"raw":"0.2"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"Cam","raw":"'Cam'"}},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetUserCtrlCompPause"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bPaused"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}}]}]}]}],"comments":[{"type":"Comment","value":"//////////////////////////////////////////////////////////////////////////////////","raw":"--//////////////////////////////////////////////////////////////////////////////////"},{"type":"Comment","value":" missionID from DB","raw":"-- missionID from DB"},{"type":"Comment","value":" time to release player","raw":"-- time to release player"},{"type":"Comment","value":" missionID from DB","raw":"-- missionID from DB"},{"type":"Comment","value":" time to release player","raw":"-- time to release player"},{"type":"Comment","value":" distance to teleport player away from npc","raw":"-- distance to teleport player away from npc"},{"type":"Comment","value":"//////////////////////////////////////////////////////////////////////////////////","raw":"--//////////////////////////////////////////////////////////////////////////////////"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Happens on client interaction (must register for picking)","raw":"-- Happens on client interaction (must register for picking)"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"local oPos = self:GetPosition()    ","raw":"--local oPos = self:GetPosition()    "},{"type":"Comment","value":"local oDir = self:GetObjectDirectionVectors()","raw":"--local oDir = self:GetObjectDirectionVectors()"},{"type":"Comment","value":"local camPos = {x = oPos.pos.x + (oDir.forward.x * missionCamDist), y = oPos.pos.y, z = oPos.pos.z + (oDir.forward.z * missionCamDist)} --+ (oDir.forward.y * posOffset)","raw":"--local camPos = {x = oPos.pos.x + (oDir.forward.x * missionCamDist), y = oPos.pos.y, z = oPos.pos.z + (oDir.forward.z * missionCamDist)} --+ (oDir.forward.y * posOffset)"},{"type":"Comment","value":"player:Teleport{pos = camPos}","raw":"--player:Teleport{pos = camPos}"},{"type":"Comment","value":" freeze player and play cinematic","raw":"-- freeze player and play cinematic"},{"type":"Comment","value":" start timer to release player movement","raw":"-- start timer to release player movement"},{"type":"Comment","value":"print('Dialogue OK')","raw":"--print('Dialogue OK')"},{"type":"Comment","value":"print('terminate interaction')","raw":"--print('terminate interaction')"}]}