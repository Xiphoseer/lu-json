{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"myPriority"}],"init":[{"type":"NumericLiteral","value":0.8,"raw":"0.8"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"donationVendorComponent"}],"init":[{"type":"NumericLiteral","value":100,"raw":"100"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"split"},"isLocal":false,"parameters":[{"type":"Identifier","name":"str"},{"type":"Identifier","name":"pat"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"t"}],"init":[{"type":"TableConstructorExpression","fields":[]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"Identifier","name":"str"},"right":{"type":"Identifier","name":"pat"}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"gsub"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"str"},"right":{"type":"Identifier","name":"pat"}},{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"(.-)","raw":"\"(.-)\""},"right":{"type":"Identifier","name":"pat"}},{"type":"FunctionDeclaration","identifier":null,"isLocal":false,"parameters":[{"type":"Identifier","name":"result"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"insert"},"base":{"type":"Identifier","name":"table"}},"arguments":[{"type":"Identifier","name":"t"},{"type":"Identifier","name":"result"}]}}]}]}}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"t"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"myActivityID","raw":"\"myActivityID\""},{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"percentComplete","raw":"\"percentComplete\""},{"type":"NumericLiteral","value":0,"raw":"0"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"donationsRemaining","raw":"\"donationsRemaining\""},{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"groupID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"groupID","raw":"\"groupID\""}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"groups"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"split"},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"groupID","raw":"'groupID'"}]},{"type":"StringLiteral","value":";","raw":"';'"}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"members"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"IndexExpression","base":{"type":"Identifier","name":"groups"},"index":{"type":"NumericLiteral","value":1,"raw":"1"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSpawners"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSelf"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"k"},{"type":"Identifier","name":"member"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"pairs"},"arguments":[{"type":"Identifier","name":"members"}]}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bHasComponent"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"HasComponentType"},"base":{"type":"Identifier","name":"member"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iComponent"},"value":{"type":"Identifier","name":"donationVendorComponent"}}]}}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"donationValues"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"UpdateDonationValues"},"base":{"type":"Identifier","name":"member"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"myActivityID","raw":"\"myActivityID\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"activityID"},"base":{"type":"Identifier","name":"donationValues"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"percentComplete","raw":"\"percentComplete\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fPercentComplete"},"base":{"type":"Identifier","name":"donationValues"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"donationsRemaining","raw":"\"donationsRemaining\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"totalRemaining"},"base":{"type":"Identifier","name":"donationValues"}}]}}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onCheckUseRequirements"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"\"isInUse\""}]},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bCanUse"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onMessageBoxRespond"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"TerminateInteraction"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"type"},"value":{"type":"StringLiteral","value":"fromInteraction","raw":"'fromInteraction'"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ObjIDTerminator"},"value":{"type":"Identifier","name":"self"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onGetPriorityPickListType"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":">","left":{"type":"Identifier","name":"myPriority"},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fCurrentPickTypePriority"},"base":{"type":"Identifier","name":"msg"}},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fCurrentPickTypePriority"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"Identifier","name":"myPriority"}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ePickType"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"NumericLiteral","value":14,"raw":"14"}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onUpdateDonationValues"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"myActivityID","raw":"\"myActivityID\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"activityID"},"base":{"type":"Identifier","name":"msg"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"percentComplete","raw":"\"percentComplete\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fPercentComplete"},"base":{"type":"Identifier","name":"msg"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"donationsRemaining","raw":"\"donationsRemaining\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"totalRemaining"},"base":{"type":"Identifier","name":"msg"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendMessage"},"base":{"type":"Identifier","name":"UI"}},"arguments":[{"type":"StringLiteral","value":"UpdateDonationValues","raw":"\"UpdateDonationValues\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"percentComplete","raw":"\"percentComplete\""}},{"type":"TableValue","value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fPercentComplete"},"base":{"type":"Identifier","name":"msg"}}}]}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"donationsRemaining","raw":"\"donationsRemaining\""}},{"type":"TableValue","value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"totalRemaining"},"base":{"type":"Identifier","name":"msg"}}}]}}]}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onClientUse"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"}]},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendMessage"},"base":{"type":"Identifier","name":"UI"}},"arguments":[{"type":"StringLiteral","value":"pushGameState","raw":"\"pushGameState\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"state","raw":"\"state\""}},{"type":"TableValue","value":{"type":"StringLiteral","value":"CommunityMissionLeaderboard","raw":"\"CommunityMissionLeaderboard\""}}]}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"context","raw":"\"context\""}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"percentComplete","raw":"\"percentComplete\""}},{"type":"TableValue","value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"percentComplete","raw":"\"percentComplete\""}]}}]}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"donationsRemaining","raw":"\"donationsRemaining\""}},{"type":"TableValue","value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"donationsRemaining","raw":"\"donationsRemaining\""}]}}]}}]}}]}}]}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendMessage"},"base":{"type":"Identifier","name":"UI"}},"arguments":[{"type":"StringLiteral","value":"ToggleLeaderboard","raw":"\"ToggleLeaderboard\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"id","raw":"\"id\""}},{"type":"TableValue","value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"myActivityID","raw":"\"myActivityID\""}]}}]}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"visible","raw":"\"visible\""}},{"type":"TableValue","value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"hideReplay","raw":"\"hideReplay\""}},{"type":"TableValue","value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"callbackObject","raw":"\"callbackObject\""}},{"type":"TableValue","value":{"type":"Identifier","name":"self"}}]}}]}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTerminateInteraction"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendMessage"},"base":{"type":"Identifier","name":"UI"}},"arguments":[{"type":"StringLiteral","value":"popGameState","raw":"\"popGameState\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"state","raw":"\"state\""}},{"type":"TableValue","value":{"type":"StringLiteral","value":"CommunityMissionLeaderboard","raw":"\"CommunityMissionLeaderboard\""}}]}}]}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendMessage"},"base":{"type":"Identifier","name":"UI"}},"arguments":[{"type":"StringLiteral","value":"ToggleLeaderboard","raw":"\"ToggleLeaderboard\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"id","raw":"\"id\""}},{"type":"TableValue","value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"myActivityID","raw":"\"myActivityID\""}]}}]}},{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"visible","raw":"\"visible\""}},{"type":"TableValue","value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}]}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}}]}],"comments":[{"type":"Comment","value":" ================================================","raw":"-- ================================================"},{"type":"Comment","value":" L_DONATION_VENDOR.lua","raw":"-- L_DONATION_VENDOR.lua"},{"type":"Comment","value":" Client Side for the Donation Vendor Plaque","raw":"-- Client Side for the Donation Vendor Plaque"},{"type":"Comment","value":" updated 12/09/10 Val ... ensuring the plaque gets its initial values regardless of the order in which objects load in","raw":"-- updated 12/09/10 Val ... ensuring the plaque gets its initial values regardless of the order in which objects load in"},{"type":"Comment","value":" ================================================","raw":"-- ================================================"},{"type":"Comment","value":" request info because we don't know in what order things will spawn in","raw":"-- request info because we don't know in what order things will spawn in"},{"type":"Comment","value":"-----------------------------------------","raw":"-------------------------------------------"},{"type":"Comment","value":" see if the plaque is in use before allowing the player from using it again","raw":"-- see if the plaque is in use before allowing the player from using it again"},{"type":"Comment","value":"-----------------------------------------","raw":"-------------------------------------------"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" sent when the object story box is closed;","raw":"-- sent when the object story box is closed;"},{"type":"Comment","value":" this can be done by hitting the x, esc or enter","raw":"-- this can be done by hitting the x, esc or enter"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Interactive pick type","raw":"-- Interactive pick type"},{"type":"Comment","value":"print ('update: ' .. msg.fPercentComplete .. ' ' .. msg.totalRemaining .. ' ' .. self:GetVar(\"myActivityID\"))","raw":"--print ('update: ' .. msg.fPercentComplete .. ' ' .. msg.totalRemaining .. ' ' .. self:GetVar(\"myActivityID\"))"}]}