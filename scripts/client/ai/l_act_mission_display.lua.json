{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"missionCamDist"}],"init":[{"type":"NumericLiteral","value":10,"raw":"10"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"npcName"}],"init":[{"type":"StringLiteral","value":"","raw":"''"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"StringLiteral","value":"","raw":"''"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"npcName"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"npcName","raw":"'npcName'"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"npcName"},"right":{"type":"StringLiteral","value":"","raw":"''"}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"print"},"arguments":[{"type":"StringLiteral","value":"Missing npcName in ConfigData","raw":"'Missing npcName in ConfigData'"}]}}]}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"oRot"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetRotation"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rotX","raw":"'rotX'"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"oRot"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rotY","raw":"'rotY'"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"oRot"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rotZ","raw":"'rotZ'"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"oRot"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rotW","raw":"'rotW'"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"w"},"base":{"type":"Identifier","name":"oRot"}}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onClientUse"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetRotation"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rotX","raw":"'rotX'"}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rotY","raw":"'rotY'"}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rotZ","raw":"'rotZ'"}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"w"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"rotW","raw":"'rotW'"}]}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"MissionDisplay_","raw":"'MissionDisplay_'"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"npcName","raw":"'npcName'"}]},"right":{"type":"StringLiteral","value":"_Cam","raw":"'_Cam'"}}}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onMissionDialogueOK"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"npcName"}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onNotifyMission"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"<=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"missionState"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"NumericLiteral","value":1,"raw":"1"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"MissionDisplay_","raw":"'MissionDisplay_'"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"npcName","raw":"'npcName'"}]},"right":{"type":"StringLiteral","value":"_Cam","raw":"'_Cam'"}}}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTerminateInteraction"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"DialogueOK","raw":"'DialogueOK'"}]},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onMissionDialogueCancelled"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":0.5,"raw":"0.5"}}]}}}]}],"comments":[{"type":"Comment","value":"-- Script that can be attached to any misison giver on the client in HF. Config data","raw":"---- Script that can be attached to any misison giver on the client in HF. Config data"},{"type":"Comment","value":"-- variables must be set in HF. missionID, cinemaName, cinemaTime","raw":"---- variables must be set in HF. missionID, cinemaName, cinemaTime"},{"type":"Comment","value":"-- Created: 6/16/09 mrb...","raw":"---- Created: 6/16/09 mrb..."},{"type":"Comment","value":"--//////////////////////////////////////////////////////////////////////////////////","raw":"----//////////////////////////////////////////////////////////////////////////////////"},{"type":"Comment","value":"-- local variables","raw":"---- local variables"},{"type":"Comment","value":" distance to teleport player away from npc","raw":"-- distance to teleport player away from npc"},{"type":"Comment","value":" name of the npc giving in the Config Data of HF","raw":"-- name of the npc giving in the Config Data of HF"},{"type":"Comment","value":"--//////////////////////////////////////////////////////////////////////////////////","raw":"----//////////////////////////////////////////////////////////////////////////////////"},{"type":"Comment","value":" get the varables set in HF in the mission givers configData, if mission print error","raw":"-- get the varables set in HF in the mission givers configData, if mission print error"},{"type":"Comment","value":" name of npc in HF","raw":"-- name of npc in HF"},{"type":"Comment","value":" the player","raw":"-- the player"},{"type":"Comment","value":"local oPos = self:GetPosition()    ","raw":"--local oPos = self:GetPosition()    "},{"type":"Comment","value":"local teleOffset = missionCamDist + 5","raw":"--local teleOffset = missionCamDist + 5"},{"type":"Comment","value":"local oDir = self:GetObjectDirectionVectors()","raw":"--local oDir = self:GetObjectDirectionVectors()"},{"type":"Comment","value":"local telePos = {x = oPos.pos.x + (oDir.forward.x * teleOffset), y = oPos.pos.y, z = oPos.pos.z + (oDir.forward.z * teleOffset)}   ","raw":"--local telePos = {x = oPos.pos.x + (oDir.forward.x * teleOffset), y = oPos.pos.y, z = oPos.pos.z + (oDir.forward.z * teleOffset)}   "},{"type":"Comment","value":"player:Teleport{pos = camPos}","raw":"--player:Teleport{pos = camPos}"},{"type":"Comment","value":"if msg.bIsComplete == false then   ","raw":"--if msg.bIsComplete == false then   "},{"type":"Comment","value":"    player:SetUserCtrlCompPause{bPaused = true}       ","raw":"--    player:SetUserCtrlCompPause{bPaused = true}       "},{"type":"Comment","value":"end","raw":"--end"}]}