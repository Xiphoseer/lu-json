{"type":"Chunk","body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"TVfileCache"}],"init":[{"type":"TableConstructorExpression","fields":[]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onRenderComponentReady"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"SetNextImage"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"random"},"base":{"type":"Identifier","name":"math"}},"arguments":[{"type":"NumericLiteral","value":30,"raw":"30"},{"type":"NumericLiteral","value":45,"raw":"45"}]},{"type":"StringLiteral","value":"LUPTVTimer","raw":"\"LUPTVTimer\""},{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"TVInitDirectory"},"isLocal":false,"parameters":[{"type":"Identifier","name":"dir"}],"body":[{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"TVfileCache"},"index":{"type":"Identifier","name":"dir"}}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetFilesInDir"},"base":{"type":"Identifier","name":"RESMGR"}},"arguments":[{"type":"Identifier","name":"dir"},{"type":"StringLiteral","value":"dds","raw":"\"dds\""},{"type":"BooleanLiteral","value":true,"raw":"true"},{"type":"StringLiteral","value":"","raw":"\"\""}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"LUPTVTimer","raw":"\"LUPTVTimer\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"SetNextImage"},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"random"},"base":{"type":"Identifier","name":"math"}},"arguments":[{"type":"NumericLiteral","value":30,"raw":"30"},{"type":"NumericLiteral","value":45,"raw":"45"}]},{"type":"StringLiteral","value":"LUPTVTimer","raw":"\"LUPTVTimer\""},{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"TVGetDirectory"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"imageDir"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"imageDir","raw":"\"imageDir\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"imageDir"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"imageDir"}],"init":[{"type":"StringLiteral","value":"textures/lup","raw":"\"textures/lup\""}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"temp"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"TVGetDirFromCache"},"arguments":[{"type":"Identifier","name":"imageDir"}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"temp"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"TVGetDirFromCache"},"isLocal":false,"parameters":[{"type":"Identifier","name":"imageDir"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"dir"}],"init":[{"type":"IndexExpression","base":{"type":"Identifier","name":"TVfileCache"},"index":{"type":"Identifier","name":"imageDir"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"dir"},"right":{"type":"NilLiteral","value":null,"raw":"nil"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"TVInitDirectory"},"arguments":[{"type":"Identifier","name":"imageDir"}]}},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"dir"}],"init":[{"type":"IndexExpression","base":{"type":"Identifier","name":"TVfileCache"},"index":{"type":"Identifier","name":"imageDir"}}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"dir"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"SetNextImage"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"imageDir"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"TVGetDirectory"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"numFiles"}],"init":[{"type":"UnaryExpression","operator":"#","argument":{"type":"Identifier","name":"imageDir"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":">=","left":{"type":"Identifier","name":"numFiles"},"right":{"type":"NumericLiteral","value":1,"raw":"1"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"lastIdx"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"fileIdx","raw":"\"fileIdx\""}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"newIdx"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"random"},"base":{"type":"Identifier","name":"math"}},"arguments":[{"type":"NumericLiteral","value":1,"raw":"1"},{"type":"Identifier","name":"numFiles"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"newIdx"},"right":{"type":"Identifier","name":"lastIdx"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"newIdx"}],"init":[{"type":"BinaryExpression","operator":"+","left":{"type":"Identifier","name":"newIdx"},"right":{"type":"NumericLiteral","value":1,"raw":"1"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":">","left":{"type":"Identifier","name":"newIdx"},"right":{"type":"Identifier","name":"numFiles"},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"newIdx"}],"init":[{"type":"NumericLiteral","value":1,"raw":"1"}]}]}]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"fileIdx","raw":"\"fileIdx\""},{"type":"Identifier","name":"newIdx"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendMessage"},"base":{"type":"Identifier","name":"UI"}},"arguments":[{"type":"StringLiteral","value":"SetLUPTVImage","raw":"\"SetLUPTVImage\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"ImageName","raw":"\"ImageName\""}},{"type":"TableValue","value":{"type":"IndexExpression","base":{"type":"Identifier","name":"imageDir"},"index":{"type":"Identifier","name":"newIdx"}}}]}}]},{"type":"Identifier","name":"self"}]}}]}]}]}],"comments":[{"type":"Comment","value":" ***********************************************************","raw":"-- ***********************************************************"},{"type":"Comment","value":" HF config data format","raw":"-- HF config data format"},{"type":"Comment","value":" imageDir -> 0:directory (relative to client/res/textures)","raw":"-- imageDir -> 0:directory (relative to client/res/textures)"},{"type":"Comment","value":" ***********************************************************","raw":"-- ***********************************************************"},{"type":"Comment","value":" This is global to all objects running this script.  Normally this is forbidden, but I actually want this global","raw":"-- This is global to all objects running this script.  Normally this is forbidden, but I actually want this global"},{"type":"Comment","value":"function onStartup()","raw":"--function onStartup()"},{"type":"Comment","value":"end","raw":"--end"},{"type":"Comment","value":" Load up the first image when the render component is ready ","raw":"-- Load up the first image when the render component is ready "},{"type":"Comment","value":" call like this RESMGR:GetFilesInDir(string directory, string extension (blank for all extensions), bool check sub directories, string wildcard);","raw":"-- call like this RESMGR:GetFilesInDir(string directory, string extension (blank for all extensions), bool check sub directories, string wildcard);"},{"type":"Comment","value":" Swap images and reset the timer","raw":"-- Swap images and reset the timer"},{"type":"Comment","value":" You can set which directory to load from.  By default it is textures/lup/ and all subdirectories","raw":"-- You can set which directory to load from.  By default it is textures/lup/ and all subdirectories"},{"type":"Comment","value":" Get the directory from the cache.","raw":"-- Get the directory from the cache."},{"type":"Comment","value":" If that directory hasn't been processed yet, then init that directory and then return","raw":"-- If that directory hasn't been processed yet, then init that directory and then return"},{"type":"Comment","value":" Load up the next image at random","raw":"-- Load up the next image at random"},{"type":"Comment","value":" make sure we're not loading the same image twice","raw":"-- make sure we're not loading the same image twice"}]}