{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"iTemplateID"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"NumericLiteral","value":9516,"raw":"9516"}},{"type":"TableValue","value":{"type":"NumericLiteral","value":9517,"raw":"9517"}},{"type":"TableValue","value":{"type":"NumericLiteral","value":9518,"raw":"9518"}}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"missionNum"}],"init":[{"type":"NumericLiteral","value":809,"raw":"809"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onModularBuildExit"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bCompleted"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerID"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"missionState"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetMissionState"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"missionID"},"value":{"type":"Identifier","name":"missionNum"}}]}}},"right":{"type":"NumericLiteral","value":2,"raw":"2"}},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"vLOTsUsed"},"base":{"type":"Identifier","name":"msg"}},"body":[{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"i"},{"type":"Identifier","name":"v"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"ipairs"},"arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"vLOTsUsed"},"base":{"type":"Identifier","name":"msg"}}]}],"body":[{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"j"},{"type":"Identifier","name":"t"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"ipairs"},"arguments":[{"type":"Identifier","name":"iTemplateID"}]}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"v"},"right":{"type":"Identifier","name":"t"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"UpdateMissionTask"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"taskType"},"value":{"type":"StringLiteral","value":"complete","raw":"\"complete\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value"},"value":{"type":"Identifier","name":"missionNum"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value2"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"target"},"value":{"type":"Identifier","name":"self"}}]}}},{"type":"ReturnStatement","arguments":[{"type":"NilLiteral","value":null,"raw":"nil"}]}]}]}]}]}]}]},{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"k"},{"type":"Identifier","name":"v"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"ipairs"},"arguments":[{"type":"Identifier","name":"iTemplateID"}]}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CheckPlayerAssemblyForUniqueModuleByLOT"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iObjTemplate"},"value":{"type":"Identifier","name":"v"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"iAssemblyTemplate"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"modularBuildID"},"base":{"type":"Identifier","name":"msg"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"i64modelSubkey"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"i64modelSubkey"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"callbackTarget"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"playerID"},"value":{"type":"Identifier","name":"player"}}]}}}]}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onModuleAssemblyDBDataToLua"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bDataReady"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"DisplayTooltip"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerID"},"base":{"type":"Identifier","name":"msg"}}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bShow"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"strText"},"value":{"type":"CallExpression","base":{"type":"Identifier","name":"Localize"},"arguments":[{"type":"StringLiteral","value":"MODULAR_ROCKET_DB_FAIL","raw":"\"MODULAR_ROCKET_DB_FAIL\""}]}}]}}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bModuleFound"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"BooleanLiteral","value":true,"raw":"true"}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerID"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"missionState"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetMissionState"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"missionID"},"value":{"type":"Identifier","name":"missionNum"}}]}}},"right":{"type":"NumericLiteral","value":2,"raw":"2"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"UpdateMissionTask"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"taskType"},"value":{"type":"StringLiteral","value":"complete","raw":"\"complete\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value"},"value":{"type":"Identifier","name":"missionNum"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value2"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"target"},"value":{"type":"Identifier","name":"self"}}]}}}]}]}]}]}]}],"comments":[{"type":"Comment","value":"-------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------"},{"type":"Comment","value":"This script is on the rocket module build area in Brick annex of Nimbus Station","raw":"--This script is on the rocket module build area in Brick annex of Nimbus Station"},{"type":"Comment","value":" It checks the rocket the player build in the modular build area for certain rocket part","raw":"-- It checks the rocket the player build in the modular build area for certain rocket part"},{"type":"Comment","value":" if the player builds a rocket and it contains the defined modules, update the mission","raw":"-- if the player builds a rocket and it contains the defined modules, update the mission"},{"type":"Comment","value":"-------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------"},{"type":"Comment","value":" the LOT of the module within the iAssemblyTemplate you are searching for.","raw":"-- the LOT of the module within the iAssemblyTemplate you are searching for."},{"type":"Comment","value":" mission on mardolf to build a rocket with a certain rocket part","raw":"-- mission on mardolf to build a rocket with a certain rocket part"},{"type":"Comment","value":" The player exits the modular build","raw":"-- The player exits the modular build"},{"type":"Comment","value":" has the player completed a rocket?","raw":"-- has the player completed a rocket?"},{"type":"Comment","value":" is the player on the mission to build a rocket","raw":"-- is the player on the mission to build a rocket"},{"type":"Comment","value":"see if any of the LOTs used are for our mission","raw":"--see if any of the LOTs used are for our mission"},{"type":"Comment","value":" send a check to the character database to see if the rocket contains a certain","raw":"-- send a check to the character database to see if the rocket contains a certain"},{"type":"Comment","value":" check return from the character database check","raw":"-- check return from the character database check"},{"type":"Comment","value":"","raw":"--"},{"type":"Comment","value":"\"Internal Database Error. Please build your rocket again\"}","raw":"--\"Internal Database Error. Please build your rocket again\"}"},{"type":"Comment","value":" does the rocket contain one of the define modules?","raw":"-- does the rocket contain one of the define modules?"},{"type":"Comment","value":" if the player is on the mission, update the mission","raw":"-- if the player is on the mission, update the mission"}]}