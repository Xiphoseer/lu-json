{"type":"Chunk","body":[{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"SetupActivity"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"nMaxUsers"},{"type":"Identifier","name":"getActivity"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"getActivity"},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetActivityParams"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"activityID"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"activityID","raw":"'activityID'"}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"modifyMaxUsers"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"maxUsers"},"value":{"type":"Identifier","name":"nMaxUsers"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"modifyActivityActive"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"activityActive"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetActivityParams"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"modifyMaxUsers"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"maxUsers"},"value":{"type":"Identifier","name":"nMaxUsers"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"modifyActivityActive"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"activityActive"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"IsPlayerInActivity"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"existMsg"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityUserExists"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}}]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"existMsg","inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bExists"},"base":{"type":"Identifier","name":"existMsg"}}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"UpdatePlayer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"removePlayer"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"removePlayer"},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RemoveActivityUser"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}}]}}}]},{"type":"ElseifClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"removePlayer"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddActivityUser"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"InitialActivityScore"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"NumericLiteral","value":0,"raw":"0"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"InitialActivityScore"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"scoreVar"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetActivityUserData"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"typeIndex"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value"},"value":{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"Identifier","name":"scoreVar"}]}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"UpdateActivityValue"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"valueIndex"},{"type":"Identifier","name":"valueVar"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"newValue"}],"init":[{"type":"BinaryExpression","operator":"+","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"outValue"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetActivityUserData"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"typeIndex"},"value":{"type":"Identifier","name":"valueIndex"}}]}}},"right":{"type":"Identifier","name":"valueVar"}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetActivityUserData"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"typeIndex"},"value":{"type":"Identifier","name":"valueIndex"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value"},"value":{"type":"Identifier","name":"newValue"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"SetActivityValue"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"valueIndex"},{"type":"Identifier","name":"valueVar"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetActivityUserData"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"typeIndex"},"value":{"type":"Identifier","name":"valueIndex"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value"},"value":{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"Identifier","name":"valueVar"}]}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"GetActivityValue"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"valueIndex"}],"body":[{"type":"ReturnStatement","arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"outValue"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetActivityUserData"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"typeIndex"},"value":{"type":"Identifier","name":"valueIndex"}}]}}}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"StopActivity"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"scoreVar"},{"type":"Identifier","name":"value1Var"},{"type":"Identifier","name":"value2Var"},{"type":"Identifier","name":"quit"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"quit"},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RemoveActivityUser"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}}]}}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetActivityUserData"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"typeIndex"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value"},"value":{"type":"Identifier","name":"scoreVar"}}]}}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"value1Var"},"right":{"type":"NilLiteral","value":null,"raw":"nil"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetActivityUserData"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"typeIndex"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value"},"value":{"type":"Identifier","name":"value1Var"}}]}}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"value2Var"},"right":{"type":"NilLiteral","value":null,"raw":"nil"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetActivityUserData"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"typeIndex"},"value":{"type":"NumericLiteral","value":2,"raw":"2"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"value"},"value":{"type":"Identifier","name":"value2Var"}}]}}}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"DistributeActivityRewards"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bAutoAddCurrency"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bAutoAddItems"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"UpdateActivityLeaderboard"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}}]}}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"actID"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"activityID"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetActivityID"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RequestActivitySummaryLeaderboardData"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"target"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"queryType"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"gameID"},"value":{"type":"Identifier","name":"actID"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"NotifyClientObject"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"ToggleLeaderBoard","raw":"\"ToggleLeaderBoard\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"param1"},"value":{"type":"Identifier","name":"actID"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"paramObj"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"rerouteID"},"value":{"type":"Identifier","name":"player"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RemoveActivityUser"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"GetLeaderboardData"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"activityID"},{"type":"Identifier","name":"EndNumOfResults"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"EndNumOfResults"},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RequestActivitySummaryLeaderboardData"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"user"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"target"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"gameID"},"value":{"type":"Identifier","name":"activityID"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"resultsEnd"},"value":{"type":"Identifier","name":"EndNumOfResults"}}]}}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RequestActivitySummaryLeaderboardData"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"user"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"target"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"gameID"},"value":{"type":"Identifier","name":"activityID"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ActivityTimerStart"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"timerName"},{"type":"Identifier","name":"updateTime"},{"type":"Identifier","name":"stopTime"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"stopTime"},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityTimerSet"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"Identifier","name":"timerName"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"updateInterval"},"value":{"type":"Identifier","name":"updateTime"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"duration"},"value":{"type":"Identifier","name":"stopTime"}}]}}}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityTimerSet"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"Identifier","name":"timerName"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"updateInterval"},"value":{"type":"Identifier","name":"updateTime"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ActivityTimerReset"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"timerName"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityTimerReset"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"Identifier","name":"timerName"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ActivityTimerStop"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"timerName"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityTimerStop"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"Identifier","name":"timerName"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ActivityTimerStopAllTimers"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityTimerStopAllTimers"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ActivityTimerAddTime"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"timerName"},{"type":"Identifier","name":"addTime"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityTimerModify"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"Identifier","name":"timerName"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"timeToAdd"},"value":{"type":"Identifier","name":"addTime"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ActivityTimerGetRemainingTime"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"timerName"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"timerInfo"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityTimerGet"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"Identifier","name":"timerName"}}]}}]},{"type":"ReturnStatement","arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"timeRemaining"},"base":{"type":"Identifier","name":"timerInfo"}}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"ActivityTimerGetCurrentTime"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"timerName"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"timerInfo"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ActivityTimerGet"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"Identifier","name":"timerName"}}]}}]},{"type":"ReturnStatement","arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"timeElapsed"},"base":{"type":"Identifier","name":"timerInfo"}}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"split"},"isLocal":false,"parameters":[{"type":"Identifier","name":"str"},{"type":"Identifier","name":"pat"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"t"}],"init":[{"type":"TableConstructorExpression","fields":[]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"gsub"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"str"},"right":{"type":"Identifier","name":"pat"}},{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"(.-)","raw":"\"(.-)\""},"right":{"type":"Identifier","name":"pat"}},{"type":"FunctionDeclaration","identifier":null,"isLocal":false,"parameters":[{"type":"Identifier","name":"result"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"insert"},"base":{"type":"Identifier","name":"table"}},"arguments":[{"type":"Identifier","name":"t"},{"type":"Identifier","name":"result"}]}}]}]}},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"t"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"freezePlayer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"bFreeze"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"eChangeType"}],"init":[{"type":"StringLiteral","value":"POP","raw":"\"POP\""}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"bFreeze"},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bDead"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"IsDead"},"base":{"type":"Identifier","name":"playerID"}},"arguments":[]}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"Try_Freeze_Again","raw":"\"Try_Freeze_Again\""},{"type":"Identifier","name":"self"}]}},{"type":"ReturnStatement","arguments":[]}]}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"eChangeType"}],"init":[{"type":"StringLiteral","value":"PUSH","raw":"\"PUSH\""}]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetStunned"},"base":{"type":"Identifier","name":"playerID"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"StateChangeType"},"value":{"type":"Identifier","name":"eChangeType"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantMove"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantAttack"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantUseItem"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantInteract"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bCanMove"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetStunned"},"base":{"type":"Identifier","name":"playerID"}},"arguments":[]}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"eChangeType"},"right":{"type":"StringLiteral","value":"PUSH","raw":"\"PUSH\""}}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"print"},"arguments":[{"type":"BinaryExpression","operator":"..","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetName"},"base":{"type":"Identifier","name":"playerID"}},"arguments":[]}},"right":{"type":"StringLiteral","value":" is still able to move","raw":"' is still able to move'"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"Try_Freeze_Again","raw":"\"Try_Freeze_Again\""},{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"SecondsToClock"},"isLocal":false,"parameters":[{"type":"Identifier","name":"sSeconds"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"nSeconds"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"Identifier","name":"sSeconds"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"nSeconds"},"right":{"type":"NumericLiteral","value":0,"raw":"0"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"nSeconds"},"right":{"type":"NilLiteral","value":null,"raw":"nil"}}},"body":[{"type":"ReturnStatement","arguments":[{"type":"StringLiteral","value":"00:00","raw":"\"00:00\""}]}]},{"type":"ElseClause","body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"nHours"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"format"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"StringLiteral","value":"%02.f","raw":"\"%02.f\""},{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"floor"},"base":{"type":"Identifier","name":"math"}},"arguments":[{"type":"BinaryExpression","operator":"/","left":{"type":"Identifier","name":"nSeconds"},"right":{"type":"NumericLiteral","value":3600,"raw":"3600"}}]}]}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"nMins"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"format"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"StringLiteral","value":"%02.f","raw":"\"%02.f\""},{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"floor"},"base":{"type":"Identifier","name":"math"}},"arguments":[{"type":"BinaryExpression","operator":"-","left":{"type":"BinaryExpression","operator":"/","left":{"type":"Identifier","name":"nSeconds"},"right":{"type":"NumericLiteral","value":60,"raw":"60"}},"right":{"type":"BinaryExpression","operator":"*","left":{"type":"Identifier","name":"nHours"},"right":{"type":"NumericLiteral","value":60,"raw":"60"},"inParens":true}}]}]}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"nSecs"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"format"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"StringLiteral","value":"%02.f","raw":"\"%02.f\""},{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"floor"},"base":{"type":"Identifier","name":"math"}},"arguments":[{"type":"BinaryExpression","operator":"-","left":{"type":"BinaryExpression","operator":"-","left":{"type":"Identifier","name":"nSeconds"},"right":{"type":"BinaryExpression","operator":"*","left":{"type":"Identifier","name":"nHours"},"right":{"type":"NumericLiteral","value":3600,"raw":"3600"}}},"right":{"type":"BinaryExpression","operator":"*","left":{"type":"Identifier","name":"nMins"},"right":{"type":"NumericLiteral","value":60,"raw":"60"}}}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"nMins"},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":":","raw":"\":\""},"right":{"type":"Identifier","name":"nSecs"}}}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"Try_Freeze_Again","raw":"\"Try_Freeze_Again\""}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"freezePlayer"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"starts"},"base":{"type":"Identifier","name":"string"}},"isLocal":false,"parameters":[{"type":"Identifier","name":"String"},{"type":"Identifier","name":"Start"}],"body":[{"type":"ReturnStatement","arguments":[{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"sub"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"Identifier","name":"String"},{"type":"NumericLiteral","value":1,"raw":"1"},{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"len"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"Identifier","name":"Start"}]}]},"right":{"type":"Identifier","name":"Start"}}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Generic Activity manager script, holds a bunch of useful functions","raw":"-- Generic Activity manager script, holds a bunch of useful functions"},{"type":"Comment","value":" for creating activities.","raw":"-- for creating activities."},{"type":"Comment","value":" updated mrb... 12/08/10","raw":"-- updated mrb... 12/08/10"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Sets up an activity of the object, only need to put in variable you want to change","raw":"-- Sets up an activity of the object, only need to put in variable you want to change"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" set max users to something high","raw":"-- set max users to something high"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Returns true/false if a player is in the activity","raw":"-- Returns true/false if a player is in the activity"},{"type":"Comment","value":" takes self and a PLAYER object","raw":"-- takes self and a PLAYER object"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" check if player is in activity","raw":"-- check if player is in activity"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Updates players for the activity: addPlayer defaults to true","raw":"-- Updates players for the activity: addPlayer defaults to true"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Response to Exit activity dialog and user pressed OK","raw":"-- Response to Exit activity dialog and user pressed OK"},{"type":"Comment","value":"print(tostring(removePlayer) .. ' ' .. self:GetActivityID().activityID)","raw":"--print(tostring(removePlayer) .. ' ' .. self:GetActivityID().activityID)"},{"type":"Comment","value":" remove the user","raw":"-- remove the user"},{"type":"Comment","value":"print('remove user ' .. player:GetName().name)","raw":"--print('remove user ' .. player:GetName().name)"},{"type":"Comment","value":" add the new user","raw":"-- add the new user"},{"type":"Comment","value":"print('add user ' .. player:GetName().name)","raw":"--print('add user ' .. player:GetName().name)"},{"type":"Comment","value":" start the activity for the new user","raw":"-- start the activity for the new user"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Stores the start time for the player in the activity and","raw":"-- Stores the start time for the player in the activity and"},{"type":"Comment","value":" sends messages to start it","raw":"-- sends messages to start it"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" adds the valueVar to the existing value of the index for the ","raw":"-- adds the valueVar to the existing value of the index for the "},{"type":"Comment","value":" player in the activity ","raw":"-- player in the activity "},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"print(newValue)","raw":"--print(newValue)"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Stores a vaariable for the player in the activity","raw":"-- Stores a vaariable for the player in the activity"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Gets the value of the activity index for the player","raw":"-- Gets the value of the activity index for the player"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" StopActivity message","raw":"-- StopActivity message"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" user is trying to cancel","raw":"-- user is trying to cancel"},{"type":"Comment","value":" remove the user from activity","raw":"-- remove the user from activity"},{"type":"Comment","value":" store the time as activity rating [1]","raw":"-- store the time as activity rating [1]"},{"type":"Comment","value":" distribute rewards        ","raw":"-- distribute rewards        "},{"type":"Comment","value":" Update Leaderboards for this user","raw":"-- Update Leaderboards for this user"},{"type":"Comment","value":" get the leaderboard data for the user and update summary screen if it exists","raw":"-- get the leaderboard data for the user and update summary screen if it exists"},{"type":"Comment","value":" remove the user from activity","raw":"-- remove the user from activity"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" GetLeaderboard Data message","raw":"-- GetLeaderboard Data message"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" get the leaderboard data for the user and update summary screen if it exists","raw":"-- get the leaderboard data for the user and update summary screen if it exists"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Start activity timer","raw":"-- Start activity timer"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Reset an activity timer","raw":"-- Reset an activity timer"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Stop activity timer","raw":"-- Stop activity timer"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"print('** stop activity timer ' .. timerName .. ' now **')","raw":"--print('** stop activity timer ' .. timerName .. ' now **')"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Stop activity timer","raw":"-- Stop activity timer"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Add time to activity timer","raw":"-- Add time to activity timer"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Get remaining activity timer time","raw":"-- Get remaining activity timer time"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Get remaining activity timer time","raw":"-- Get remaining activity timer time"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" splits a string based on the given pattern and returns a table","raw":"-- splits a string based on the given pattern and returns a table"},{"type":"Comment","value":"print('frozen')","raw":"--print('frozen')"},{"type":"Comment","value":"print('Player ' .. playerID:GetName().name .. ' ' .. eChangeType .. ' is frozen: ' .. tostring(self:GetVar('frozen')) .. ' ' .. tostring(playerID:GetStunned().bCanMove))","raw":"--print('Player ' .. playerID:GetName().name .. ' ' .. eChangeType .. ' is frozen: ' .. tostring(self:GetVar('frozen')) .. ' ' .. tostring(playerID:GetStunned().bCanMove))"},{"type":"Comment","value":"return \"00:00:00\";","raw":"--return \"00:00:00\";"},{"type":"Comment","value":"return nHours..\":\"..nMins..\":\"..nSecs","raw":"--return nHours..\":\"..nMins..\":\"..nSecs"}]}