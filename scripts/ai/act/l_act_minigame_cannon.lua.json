{"type":"Chunk","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"o_mis","raw":"'o_mis'"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"ballTemplateID"}],"init":[{"type":"NumericLiteral","value":2357,"raw":"2357"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerOffset"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"NumericLiteral","value":4,"raw":"4"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":4,"raw":"4"}}}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"velocity"}],"init":[{"type":"NumericLiteral","value":129,"raw":"129.0"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"minDist"}],"init":[{"type":"NumericLiteral","value":20,"raw":"20.0"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"refireRate"}],"init":[{"type":"NumericLiteral","value":800,"raw":"800.0"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"barrelOffset"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"NumericLiteral","value":4.3,"raw":"4.3"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"NumericLiteral","value":9,"raw":"9"}}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cannonTimeOut"}],"init":[{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1.0"}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"vec"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"initVelVec","raw":"\"initVelVec\""},{"type":"Identifier","name":"vec"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetShootingGalleryParams"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"playerPosOffset"},"value":{"type":"Identifier","name":"playerOffset"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"projectileVelocity"},"value":{"type":"Identifier","name":"velocity"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"cooldown"},"value":{"type":"Identifier","name":"refireRate"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"muzzlePosOffset"},"value":{"type":"Identifier","name":"barrelOffset"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"minDistance"},"value":{"type":"Identifier","name":"minDist"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"timeLimit"},"value":{"type":"Identifier","name":"cannonTimeOut"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onChildLoaded"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"templateID"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"Identifier","name":"ballTemplateID"}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"storeParent"},"arguments":[{"type":"Identifier","name":"self"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"childID"},"base":{"type":"Identifier","name":"msg"}}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"ballObj"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"childID"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"ballObj","inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetFaction"},"base":{"type":"Identifier","name":"ballObj"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"faction"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"faction"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetFaction"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}}]}}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"vec"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"initVelVec","raw":"\"initVelVec\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"vec"}},"right":{"type":"NumericLiteral","value":0,"raw":"0"}},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"vec"}},"right":{"type":"NumericLiteral","value":0,"raw":"0"}}},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"vec"}},"right":{"type":"NumericLiteral","value":0,"raw":"0"}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetProjectileParams"},"base":{"type":"Identifier","name":"ballObj"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"initVel"},"value":{"type":"Identifier","name":"vec"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"iProjectileType"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fLifeTime"},"value":{"type":"NumericLiteral","value":10,"raw":"10.0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"owner"},"value":{"type":"Identifier","name":"self"}}]}}}]}]}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onShootingGalleryFire"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"params"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CalculateFiringParameters"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"targetPos"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"targetPos"},"base":{"type":"Identifier","name":"msg"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bUseHighArc"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"vec"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"outVelVector"},"base":{"type":"Identifier","name":"params"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"vec"}},"right":{"type":"NumericLiteral","value":0,"raw":"0"}},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"vec"}},"right":{"type":"NumericLiteral","value":0,"raw":"0"}}},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"vec"}},"right":{"type":"NumericLiteral","value":0,"raw":"0"}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"initVelVec","raw":"\"initVelVec\""},{"type":"Identifier","name":"vec"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"spawnPos"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"outSpawnPos"},"base":{"type":"Identifier","name":"params"}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"LoadObject"},"base":{"type":"Identifier","name":"RESMGR"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"objectTemplate"},"value":{"type":"Identifier","name":"ballTemplateID"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"spawnPos"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"spawnPos"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"spawnPos"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"rw"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"owner"},"value":{"type":"Identifier","name":"self"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayFXEffect"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"effectType"},"value":{"type":"StringLiteral","value":"onfire","raw":"\"onfire\""}}]}}}]}]}]}],"comments":[{"type":"Comment","value":"L_ACT_CANNON.lua","raw":"--L_ACT_CANNON.lua"},{"type":"Comment","value":" Server Side","raw":"-- Server Side"},{"type":"Comment","value":" template for the projectile (water effect cannon ball)","raw":"-- template for the projectile (water effect cannon ball)"},{"type":"Comment","value":" offset to place the player during the activity","raw":"-- offset to place the player during the activity"},{"type":"Comment","value":" velocity of the projectile","raw":"-- velocity of the projectile"},{"type":"Comment","value":" max distance = (v^2 / g) where v = velocity and g = the effect of gravity from the database.","raw":"-- max distance = (v^2 / g) where v = velocity and g = the effect of gravity from the database."},{"type":"Comment","value":" original value = 100.  changed to 140","raw":"-- original value = 100.  changed to 140"},{"type":"Comment","value":" Minimum distance that the cannon can hit","raw":"-- Minimum distance that the cannon can hit"},{"type":"Comment","value":" cooldown time for firing","raw":"-- cooldown time for firing"},{"type":"Comment","value":" muzzle offset","raw":"-- muzzle offset"},{"type":"Comment","value":" cannon time out for activity","raw":"-- cannon time out for activity"},{"type":"Comment","value":" default the instance vars","raw":"-- default the instance vars"},{"type":"Comment","value":" set the parameters of the shooting gallery","raw":"-- set the parameters of the shooting gallery"},{"type":"Comment","value":" if we loaded a projectile, fire it","raw":"-- if we loaded a projectile, fire it"},{"type":"Comment","value":" store who the parent is","raw":"-- store who the parent is"},{"type":"Comment","value":" calculate firing parameters","raw":"-- calculate firing parameters"},{"type":"Comment","value":" save off the velocity","raw":"-- save off the velocity"},{"type":"Comment","value":" spawn the projectile","raw":"-- spawn the projectile"}]}