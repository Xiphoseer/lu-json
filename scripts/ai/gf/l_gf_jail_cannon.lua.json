{"type":"Chunk","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"o_mis","raw":"'o_mis'"}]}},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onUse"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"user"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"print"},"arguments":[{"type":"Identifier","name":"player"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"storeObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"Cannoneer","raw":"\"Cannoneer\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"user"},"base":{"type":"Identifier","name":"msg"}}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"JailCam_","raw":"\"JailCam_\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"Jail","raw":"'Jail'"}]}}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":3,"raw":"3"},{"type":"StringLiteral","value":"lightcannon","raw":"\"lightcannon\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetUserCtrlCompPause"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bPaused"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayAnimation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"StringLiteral","value":"scratch","raw":"\"scratch\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"Identifier","name":"self"},{"type":"StringLiteral","value":"Cannoneer","raw":"\"Cannoneer\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"lightcannon","raw":"\"lightcannon\""},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cineTime"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetCinematicInfo"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":[{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"JailCannonCam_","raw":"\"JailCannonCam_\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"Jail","raw":"'Jail'"}]}}]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"JailCannonCam_","raw":"\"JailCannonCam_\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"Jail","raw":"'Jail'"}]}}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":3,"raw":"3"},{"type":"StringLiteral","value":"explodedoor","raw":"\"explodedoor\""},{"type":"Identifier","name":"self"}]}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"explodedoor","raw":"\"explodedoor\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"JailNinjaCam_","raw":"\"JailNinjaCam_\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"Jail","raw":"'Jail'"}]}}}]}}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"ninja"}],"init":[{"type":"IndexExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"JailNinja","raw":"\"JailNinja\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"Jail","raw":"'Jail'"}]}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSpawners"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},"index":{"type":"NumericLiteral","value":1,"raw":"1"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"jailcell"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"JailCell","raw":"\"JailCell\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"Jail","raw":"'Jail'"}]}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSpawners"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"print"},"arguments":[{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"JailCell","raw":"\"JailCell\""},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"Jail","raw":"'Jail'"}]},"right":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":" ","raw":"\" \""},"right":{"type":"UnaryExpression","operator":"#","argument":{"type":"Identifier","name":"jailcell"}}}}}]}},{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"k"},{"type":"Identifier","name":"v"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"ipairs"},"arguments":[{"type":"Identifier","name":"jailcell"}]}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"print"},"arguments":[{"type":"StringLiteral","value":"v","raw":"\"v\""}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Die"},"base":{"type":"Identifier","name":"v"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"killType"},"value":{"type":"StringLiteral","value":"VIOLENT","raw":"\"VIOLENT\""}}]}}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":3,"raw":"3"},{"type":"StringLiteral","value":"alldone","raw":"\"alldone\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayAnimation"},"base":{"type":"Identifier","name":"ninja"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"StringLiteral","value":"sleep","raw":"'sleep'"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bPlayImmediate"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"alldone","raw":"\"alldone\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"print"},"arguments":[{"type":"StringLiteral","value":"alldone","raw":"\"alldone\""}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetUserCtrlCompPause"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bPaused"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}}]}]}]}],"comments":[{"type":"Comment","value":"function onGetPriorityPickListType(self, msg)\r\n\tlocal myPriority = 0.8\r\n    if ( myPriority > msg.fCurrentPickTypePriority ) then\r\n       msg.fCurrentPickTypePriority = myPriority\r\n       msg.ePickType = 14    -- Interactive pick type\r\n\tend\r\n\r\n    return msg\r\n\r\nend ","raw":"--[[function onGetPriorityPickListType(self, msg)\r\n\tlocal myPriority = 0.8\r\n    if ( myPriority > msg.fCurrentPickTypePriority ) then\r\n       msg.fCurrentPickTypePriority = myPriority\r\n       msg.ePickType = 14    -- Interactive pick type\r\n\tend\r\n\r\n    return msg\r\n\r\nend ]]"},{"type":"Comment","value":"","raw":"--"},{"type":"Comment","value":" set camera, lock player (teleport player?)","raw":"-- set camera, lock player (teleport player?)"},{"type":"Comment","value":" play animation on player","raw":"-- play animation on player"},{"type":"Comment","value":" start timer for cannon animation to start","raw":"-- start timer for cannon animation to start"},{"type":"Comment","value":"if player animation done","raw":"--if player animation done"},{"type":"Comment","value":" play cannon firing animation","raw":"-- play cannon firing animation"},{"type":"Comment","value":" play cinematic of cannon ball flying","raw":"-- play cinematic of cannon ball flying"},{"type":"Comment","value":"GAMEOBJ:DeleteObject(v)","raw":"--GAMEOBJ:DeleteObject(v)"}]}