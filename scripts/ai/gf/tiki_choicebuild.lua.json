{"type":"Chunk","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"c_GnarledForest","raw":"'c_GnarledForest'"}]}}],"comments":[{"type":"Comment","value":"------------------------------------------------------------------------------------------------------","raw":"--------------------------------------------------------------------------------------------------------"},{"type":"Comment","value":" Server-side script for Concert Props Choice Builds. Each prop can be built into 1 of 4 types.","raw":"-- Server-side script for Concert Props Choice Builds. Each prop can be built into 1 of 4 types."},{"type":"Comment","value":" If all 4 are built into the same thing, the Stage transforms, and 30 seconds later they all return to their \"default\" state (the object's render component)","raw":"-- If all 4 are built into the same thing, the Stage transforms, and 30 seconds later they all return to their \"default\" state (the object's render component)"},{"type":"Comment","value":" Based on scripts\\ai\\YRK\\L_TB_BENCH.lua","raw":"-- Based on scripts\\ai\\YRK\\L_TB_BENCH.lua"},{"type":"Comment","value":" 5023 AG - Stage Rocket               OLD 4029 AG � Fog Machine Choice Build","raw":"-- 5023 AG - Stage Rocket               OLD 4029 AG � Fog Machine Choice Build"},{"type":"Comment","value":" 4891 AG - Stage Spot Light           OLD 4030 AG � Spotlight Choice Build\t","raw":"-- 4891 AG - Stage Spot Light           OLD 4030 AG � Spotlight Choice Build\t"},{"type":"Comment","value":" 5024 AG - Stage laser                OLD 4031 AG � Laser Light Choice Build\t","raw":"-- 5024 AG - Stage laser                OLD 4031 AG � Laser Light Choice Build\t"},{"type":"Comment","value":" 4858 AG - Speaker                    OLD 4032 AG � Speaker Choice Build\t","raw":"-- 4858 AG - Speaker                    OLD 4032 AG � Speaker Choice Build\t"},{"type":"Comment","value":"HF waypoints used to spawn in choice builds","raw":"--HF waypoints used to spawn in choice builds"},{"type":"Comment","value":"Concert_Prop_1","raw":"--Concert_Prop_1"},{"type":"Comment","value":"Concert_Prop_2","raw":"--Concert_Prop_2"},{"type":"Comment","value":"Concert_Prop_3","raw":"--Concert_Prop_3"},{"type":"Comment","value":"Concert_Prop_4","raw":"--Concert_Prop_4"},{"type":"Comment","value":"-------------------------------------------------------------------------------------------------------","raw":"---------------------------------------------------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Includes","raw":"-- Includes"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"\r\n-- All the lot nums for the prop choicebuilds\r\nLOT_NUMS = {}\r\nLOT_NUMS[1] = { CONSTANTS[\"LOT_CHOICEBUILD_SMALL\"], \r\n\t\t\t\tCONSTANTS[\"LOT_CHOICEBUILD_MEDIUM\"],\r\n\t\t\t\tCONSTANTS[\"LOT_CHOICEBUILD_LARGE\"] }\r\n\r\n\r\nfunction onStartup(self)\r\n\r\nend\r\n\r\n\r\nfunction onTripleBuildSelect(self, msg)\r\n\t\r\n\tlocal canswap = 0\r\n\t\r\n\t-- Make sure we are allowed to spawn the piece they are requesting\r\n\tfor i = 1, #LOT_NUMS do\r\n\t\tfor a = 1, #LOT_NUMS[i] do\r\n\t\t\tif(LOT_NUMS[i][a] == msg.lotnum) then\r\n\t\t\t\tcanswap = 1 -- how do you break out of a loop in lua?\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\t\r\n\tif(canswap == 0) then\r\n\t\tprint(\"CANT SWAP\")\r\n\t\treturn\r\n\tend\r\n\t\t\r\n\tlocal mypos = self:GetPosition().pos\r\n\tlocal myRot = self:GetRotation()\r\n\t\r\n    --print (self:GetID())\r\n    self:GetParentObj().objIDParent:NotifyObject{ObjIDSender=self, name=\"ChoicebuildChanged\", param1=msg.lotnum}\r\n\tRESMGR:LoadObject { objectTemplate = msg.lotnum, x= mypos.x, y= mypos.y , z= mypos.z, owner = self:GetParentObj().objIDParent, rw= myRot.w, rx= myRot.x, ry= myRot.y, rz = myRot.z }\r\n\t\r\n    GAMEOBJ:DeleteObject(self)\r\n    \r\n\t--take imagination from the player\r\n\tmsg.user:SetImagination{imagination = msg.user:GetImagination{}.imagination - 1}\r\nend\r\n\r\n","raw":"--[[\r\n\r\n-- All the lot nums for the prop choicebuilds\r\nLOT_NUMS = {}\r\nLOT_NUMS[1] = { CONSTANTS[\"LOT_CHOICEBUILD_SMALL\"], \r\n\t\t\t\tCONSTANTS[\"LOT_CHOICEBUILD_MEDIUM\"],\r\n\t\t\t\tCONSTANTS[\"LOT_CHOICEBUILD_LARGE\"] }\r\n\r\n\r\nfunction onStartup(self)\r\n\r\nend\r\n\r\n\r\nfunction onTripleBuildSelect(self, msg)\r\n\t\r\n\tlocal canswap = 0\r\n\t\r\n\t-- Make sure we are allowed to spawn the piece they are requesting\r\n\tfor i = 1, #LOT_NUMS do\r\n\t\tfor a = 1, #LOT_NUMS[i] do\r\n\t\t\tif(LOT_NUMS[i][a] == msg.lotnum) then\r\n\t\t\t\tcanswap = 1 -- how do you break out of a loop in lua?\r\n\t\t\tend\r\n\t\tend\r\n\tend\r\n\t\r\n\tif(canswap == 0) then\r\n\t\tprint(\"CANT SWAP\")\r\n\t\treturn\r\n\tend\r\n\t\t\r\n\tlocal mypos = self:GetPosition().pos\r\n\tlocal myRot = self:GetRotation()\r\n\t\r\n    --print (self:GetID())\r\n    self:GetParentObj().objIDParent:NotifyObject{ObjIDSender=self, name=\"ChoicebuildChanged\", param1=msg.lotnum}\r\n\tRESMGR:LoadObject { objectTemplate = msg.lotnum, x= mypos.x, y= mypos.y , z= mypos.z, owner = self:GetParentObj().objIDParent, rw= myRot.w, rx= myRot.x, ry= myRot.y, rz = myRot.z }\r\n\t\r\n    GAMEOBJ:DeleteObject(self)\r\n    \r\n\t--take imagination from the player\r\n\tmsg.user:SetImagination{imagination = msg.user:GetImagination{}.imagination - 1}\r\nend\r\n\r\n]]"},{"type":"Comment","value":"","raw":"--"}]}