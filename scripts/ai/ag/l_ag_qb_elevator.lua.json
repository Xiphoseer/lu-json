{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"endTime"}],"init":[{"type":"NumericLiteral","value":4,"raw":"4"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"startTime"}],"init":[{"type":"NumericLiteral","value":8,"raw":"8"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"killTime"}],"init":[{"type":"NumericLiteral","value":10,"raw":"10"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"proxRadius"}],"init":[{"type":"NumericLiteral","value":5,"raw":"5"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onRebuildComplete"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetProximityRadius"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"elevatorProx","raw":"\"elevatorProx\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"radius"},"value":{"type":"Identifier","name":"proxRadius"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"qbPlayer","raw":"\"qbPlayer\""},{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"|","raw":"\"|\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"userID"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]}}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"delayTime"}],"init":[{"type":"BinaryExpression","operator":"-","left":{"type":"Identifier","name":"killTime"},"right":{"type":"Identifier","name":"endTime"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"<","left":{"type":"Identifier","name":"delayTime"},"right":{"type":"NumericLiteral","value":1,"raw":"1"}},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"delayTime"}],"init":[{"type":"NumericLiteral","value":1,"raw":"1"}]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"killTime"},{"type":"StringLiteral","value":"startKillTimer","raw":"\"startKillTimer\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"StopPathing"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onProximityUpdate"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"qbPlayerRdy","raw":"\"qbPlayerRdy\""}]},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"status"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"ENTER","raw":"\"ENTER\""}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objId"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"isChar"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"IsCharacter"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},"right":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"qbPlayerRdy","raw":"\"qbPlayerRdy\""}]}}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"qbPlayer"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"qbPlayer","raw":"\"qbPlayer\""}]},"right":{"type":"StringLiteral","value":"","raw":"\"\""}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelTimer"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"StringLiteral","value":"KillTimer","raw":"'KillTimer'"},{"type":"Identifier","name":"self"}]}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"player"}},"arguments":[]},"right":{"type":"Identifier","name":"qbPlayer"}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"qbPlayerRdy","raw":"\"qbPlayerRdy\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelAllTimers"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"UnsetProximityRadius"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"elevatorProx","raw":"\"elevatorProx\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"StartPathing"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"ElseifClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"StartTimer","raw":"\"StartTimer\""}]}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"StartTimer","raw":"\"StartTimer\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"startTime"},{"type":"StringLiteral","value":"StartElevator","raw":"\"StartElevator\""},{"type":"Identifier","name":"self"}]}}]}]}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onPlatformAtLastWaypoint"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"killTimerStartup"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"killTimerStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelAllTimers"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"endTime"},{"type":"StringLiteral","value":"KillTimer","raw":"\"KillTimer\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetNetworkVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"startEffect","raw":"\"startEffect\""},{"type":"Identifier","name":"endTime"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"StartElevator","raw":"\"StartElevator\""}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelAllTimers"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"UnsetProximityRadius"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"elevatorProx","raw":"\"elevatorProx\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"StartPathing"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"startKillTimer","raw":"\"startKillTimer\""}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"killTimerStartup"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"KillTimer","raw":"\"KillTimer\""}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Die"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"killerID"},"value":{"type":"Identifier","name":"self"}}]}}}]}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Server-side script for the monument elevators","raw":"-- Server-side script for the monument elevators"},{"type":"Comment","value":" ","raw":"-- "},{"type":"Comment","value":" mrb... 8/24/09 -- added in qb smash fx","raw":"-- mrb... 8/24/09 -- added in qb smash fx"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" constants","raw":"-- constants"},{"type":"Comment","value":" when the QB is finished being built by a player","raw":"-- when the QB is finished being built by a player"},{"type":"Comment","value":" start the proximity radius to watch for players getting on the elevator","raw":"-- start the proximity radius to watch for players getting on the elevator"},{"type":"Comment","value":" set the player who built the QB","raw":"-- set the player who built the QB"},{"type":"Comment","value":" add a timer that will kill the QB if no players get on in the killTime","raw":"-- add a timer that will kill the QB if no players get on in the killTime"},{"type":"Comment","value":" make sure we haven't already started pathing.","raw":"-- make sure we haven't already started pathing."},{"type":"Comment","value":"print('player entered')","raw":"--print('player entered')"},{"type":"Comment","value":" If a player collided with me, then do our stuff","raw":"-- If a player collided with me, then do our stuff"},{"type":"Comment","value":" the builder has entered so cancel the start timer and just start moving","raw":"-- the builder has entered so cancel the start timer and just start moving"},{"type":"Comment","value":"print('Builder entered')","raw":"--print('Builder entered')"},{"type":"Comment","value":" non-builder player entered so fire off the start timer incase the builder doesn't get on","raw":"-- non-builder player entered so fire off the start timer incase the builder doesn't get on"},{"type":"Comment","value":" moving platform reached the end of the path so start the kill timer","raw":"-- moving platform reached the end of the path so start the kill timer"},{"type":"Comment","value":" start the blink effect by sending to the client  ","raw":"-- start the blink effect by sending to the client  "},{"type":"Comment","value":" timers...","raw":"-- timers..."},{"type":"Comment","value":" start pathing the builder isn't coming","raw":"-- start pathing the builder isn't coming"},{"type":"Comment","value":" start the kill timer, the objects been around too long","raw":"-- start the kill timer, the objects been around too long"},{"type":"Comment","value":" destroy the mover","raw":"-- destroy the mover"}]}