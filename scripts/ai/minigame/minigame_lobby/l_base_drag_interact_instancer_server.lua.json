{"type":"Chunk","body":[{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetProximityRadius"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"radius"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"interaction_distance","raw":"\"interaction_distance\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"Interaction_Distance","raw":"\"Interaction_Distance\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onMatchGetDataForPlayer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bOK"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"droppedItem"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerChoices"},"base":{"type":"Identifier","name":"msg"}}},"right":{"type":"NilLiteral","value":null,"raw":"nil"}},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"activityID"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetActivityID"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"activityID"},"base":{"type":"Identifier","name":"msg"}}}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"modObj"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"droppedItem"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerChoices"},"base":{"type":"Identifier","name":"msg"}}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"LogicalExpression","operator":"or","left":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"modObj"}},"right":{"type":"BinaryExpression","operator":"<","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"itemCount"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetInvItemCount"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"player"},"base":{"type":"Identifier","name":"msg"}}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iObjID"},"value":{"type":"Identifier","name":"modObj"}}]}}},"right":{"type":"NumericLiteral","value":1,"raw":"1"}}},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objtemplate"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLOT"},"base":{"type":"Identifier","name":"modObj"}},"arguments":[]}},"right":{"type":"NumericLiteral","value":8092,"raw":"8092"}}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"droppedItem"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"finalValues"},"base":{"type":"Identifier","name":"msg"}}}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"droppedItem"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerChoices"},"base":{"type":"Identifier","name":"msg"}}}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bOK"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"points"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"NumericLiteral","value":1,"raw":"1"}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onCheckWithinBounds"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ownerID"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetItemOwner"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"requestingObj"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]}}},"arguments":[]}]},{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"k"},{"type":"Identifier","name":"v"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"ipairs"},"arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetProximityObjects"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"Interaction_Distance","raw":"\"Interaction_Distance\""}}]}}}]}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"v"}},"arguments":[]},"right":{"type":"Identifier","name":"playerID"}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetNetworkVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bPassedCheck","raw":"\"bPassedCheck\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"Identifier","name":"playerID"}},{"type":"TableValue","value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"requestingObj"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]}}]}]}},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"altMessage"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"StringLiteral","value":"MINGAME_LOBBY_DOUBLE_CLICK_MESSAGE","raw":"\"MINGAME_LOBBY_DOUBLE_CLICK_MESSAGE\""}]},{"type":"BreakStatement"}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Description: Server side script for verifying racing ","raw":"-- Description: Server side script for verifying racing "},{"type":"Comment","value":" instancing information. Add this script to a minigame instancer","raw":"-- instancing information. Add this script to a minigame instancer"},{"type":"Comment","value":" to add drag to interact and double click functionality.","raw":"-- to add drag to interact and double click functionality."},{"type":"Comment","value":"","raw":"--"},{"type":"Comment","value":" Updated 4/26/10 mrb... added proximity and onCheckWithinBounds","raw":"-- Updated 4/26/10 mrb... added proximity and onCheckWithinBounds"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" set up a proximity monitor based on the HF interaction distance","raw":"-- set up a proximity monitor based on the HF interaction distance"},{"type":"Comment","value":"Verify that the activityID the player is requesting matches my activity ID and the player dragged an item","raw":"--Verify that the activityID the player is requesting matches my activity ID and the player dragged an item"},{"type":"Comment","value":" Check the players inventory for the item and fail if not","raw":"-- Check the players inventory for the item and fail if not"},{"type":"Comment","value":" Save this out now for the destination map\t","raw":"-- Save this out now for the destination map\t"},{"type":"Comment","value":" Approve of the player selections","raw":"-- Approve of the player selections"},{"type":"Comment","value":" Calculate the players point worth","raw":"-- Calculate the players point worth"},{"type":"Comment","value":"print('onCheckWithinBounds ' .. msg.requestingObj:GetItemOwner().ownerID:GetName().name .. ' --> ' .. msg.requestingObj:GetName().name)","raw":"--print('onCheckWithinBounds ' .. msg.requestingObj:GetItemOwner().ownerID:GetName().name .. ' --> ' .. msg.requestingObj:GetName().name)"},{"type":"Comment","value":" loop through the objects in proximity and see if the player requesting the double click is there","raw":"-- loop through the objects in proximity and see if the player requesting the double click is there"}]}