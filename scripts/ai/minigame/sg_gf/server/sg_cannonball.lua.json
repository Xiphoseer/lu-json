{"type":"Chunk","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"require"},"arguments":[{"type":"StringLiteral","value":"o_mis","raw":"'o_mis'"}]}},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddObjectToGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"StringLiteral","value":"cannonball","raw":"\"cannonball\""}}]}}}]}],"comments":[{"type":"Comment","value":"L_ACT_CANNONBALL.lua","raw":"--L_ACT_CANNONBALL.lua"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Includes","raw":"-- Includes"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Ian G. There is now a detructible component attached to this object so we do not handle","raw":"-- Ian G. There is now a detructible component attached to this object so we do not handle"},{"type":"Comment","value":" get faction or isenemy in lua anymore.","raw":"-- get faction or isenemy in lua anymore."},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" return the parent's faction","raw":"-- return the parent's faction"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"function onGetFaction(self, msg)","raw":"--function onGetFaction(self, msg)"},{"type":"Comment","value":"\tmsg.faction = self:GetVar(\"My_Faction\")","raw":"--\tmsg.faction = self:GetVar(\"My_Faction\")"},{"type":"Comment","value":"end","raw":"--end"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Determine if the target is an enemy","raw":"-- Determine if the target is an enemy"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"function onIsEnemy(self, msg)","raw":"--function onIsEnemy(self, msg)"},{"type":"Comment","value":" get our faction from our parent","raw":"-- get our faction from our parent"},{"type":"Comment","value":"\tlocal myFaction = self:GetVar(\"My_Faction\")","raw":"--\tlocal myFaction = self:GetVar(\"My_Faction\")"},{"type":"Comment","value":" get the target's faction","raw":"-- get the target's faction"},{"type":"Comment","value":"\tlocal tgt = msg.targetID;","raw":"--\tlocal tgt = msg.targetID;"},{"type":"Comment","value":"\tlocal tgtFaction = tgt:GetFaction().faction","raw":"--\tlocal tgtFaction = tgt:GetFaction().faction"},{"type":"Comment","value":" target is an enemy if the faction is not the same as us","raw":"-- target is an enemy if the faction is not the same as us"},{"type":"Comment","value":"\tmsg.enemy = (myFaction ~= tgtFaction)","raw":"--\tmsg.enemy = (myFaction ~= tgtFaction)"},{"type":"Comment","value":"\treturn msg","raw":"--\treturn msg"},{"type":"Comment","value":"end","raw":"--end"}]}