{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"m_totalscore"}],"init":[{"type":"NumericLiteral","value":0,"raw":"0"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"CONSTANTS","raw":"\"CONSTANTS\""},{"type":"Identifier","name":"CONSTANTS"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"timelimit","raw":"\"timelimit\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"timeLimit"},"base":{"type":"IndexExpression","base":{"type":"Identifier","name":"waves"},"index":{"type":"NumericLiteral","value":1,"raw":"1"}}}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"enterCannon"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bLoaded","raw":"\"bLoaded\""}]},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cannon"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"StringLiteral","value":"cannonObject","raw":"\"cannonObject\""}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"getObjectByName"},"arguments":[{"type":"StringLiteral","value":"activityPlayer","raw":"\"activityPlayer\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"cannon"}},"right":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"player"}}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"cannon"}},"arguments":[],"inParens":true},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"player"}},"arguments":[],"inParens":true},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"freezePlayer"},"arguments":[{"type":"Identifier","name":"player"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bLoaded","raw":"\"bLoaded\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RequestActivityEnter"},"base":{"type":"Identifier","name":"cannon"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"bStart"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"userID"},"value":{"type":"Identifier","name":"player"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"freezePlayer"},"isLocal":false,"parameters":[{"type":"Identifier","name":"playerID"},{"type":"Identifier","name":"bFreeze"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"eChangeType"}],"init":[{"type":"StringLiteral","value":"POP","raw":"\"POP\""}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"bVisible"}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"bFreeze"},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"eChangeType"}],"init":[{"type":"StringLiteral","value":"PUSH","raw":"\"PUSH\""}]},{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bVisible"}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetStunned"},"base":{"type":"Identifier","name":"playerID"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"StateChangeType"},"value":{"type":"Identifier","name":"eChangeType"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantMove"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantAttack"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantInteract"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"mainPlayerLoaded"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerID"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelMission"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"missionID"},"value":{"type":"NumericLiteral","value":30,"raw":"30"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"storeObjectByName"},"arguments":[{"type":"StringLiteral","value":"activityPlayer","raw":"\"activityPlayer\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerID"},"base":{"type":"Identifier","name":"msg"}}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"mainObjectLoaded"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"templateID"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"IndexExpression","base":{"type":"Identifier","name":"CONSTANTS"},"index":{"type":"StringLiteral","value":"CANNON_TEMPLATEID","raw":"\"CANNON_TEMPLATEID\""}},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"storeObjectByName"},"arguments":[{"type":"StringLiteral","value":"cannonObject","raw":"\"cannonObject\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objectID"},"base":{"type":"Identifier","name":"msg"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"enterCannon"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onActivityStateChangeRequest"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"wsStringValue"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"clientready","raw":"'clientready'"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"enterCannon"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]}],"comments":[{"type":"Comment","value":" ================================================","raw":"-- ================================================"},{"type":"Comment","value":" SG Server Zone Script","raw":"-- SG Server Zone Script"},{"type":"Comment","value":" Server Side","raw":"-- Server Side"},{"type":"Comment","value":" updated 9/30/10 mrb... updated player loading","raw":"-- updated 9/30/10 mrb... updated player loading"},{"type":"Comment","value":" ================================================","raw":"-- ================================================"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Startup","raw":"-- Startup"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" put the player in the cannon, does not start the cannon","raw":"-- put the player in the cannon, does not start the cannon"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" get the cannon","raw":"-- get the cannon"},{"type":"Comment","value":" get the player","raw":"-- get the player"},{"type":"Comment","value":" if we have both start it","raw":"-- if we have both start it"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Called when Player Loads into Zone","raw":"-- Called when Player Loads into Zone"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"--print (\"Player Entered: \" .. msg.playerID:GetName().name)","raw":"----print (\"Player Entered: \" .. msg.playerID:GetName().name)"},{"type":"Comment","value":" stun and move player to level start location","raw":"-- stun and move player to level start location"},{"type":"Comment","value":" @TODO: Sometimes this teleport works and sometimes it does not.....ghosting distance?","raw":"-- @TODO: Sometimes this teleport works and sometimes it does not.....ghosting distance?"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Sent from an object after loading into zone","raw":"-- Sent from an object after loading into zone"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Cannon Object Loaded","raw":"-- Cannon Object Loaded"},{"type":"Comment","value":" store the cannon object for use later","raw":"-- store the cannon object for use later"},{"type":"Comment","value":" try to put hte player in the cannon","raw":"-- try to put hte player in the cannon"},{"type":"Comment","value":" put the player in the cannon","raw":"-- put the player in the cannon"}]}