{"type":"Chunk","body":[{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onCollisionPhantom"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"StringCallExpression","base":{"type":"Identifier","name":"print"},"argument":{"type":"StringLiteral","value":"hit","raw":"\"hit\""}}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"target"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objectID"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"elast"}],"init":[{"type":"NumericLiteral","value":200,"raw":"200.0"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"maximumSpeed"}],"init":[{"type":"NumericLiteral","value":300,"raw":"300.0"}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"vec"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"niUpVector"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetUpVector"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"vel"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"linVelocity"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLinearVelocity"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerVel"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"linVelocity"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLinearVelocity"},"base":{"type":"Identifier","name":"target"}},"arguments":[]}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Deflect"},"base":{"type":"Identifier","name":"target"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"direction"},"value":{"type":"Identifier","name":"vec"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"velocity"},"value":{"type":"Identifier","name":"vel"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"elasticity"},"value":{"type":"Identifier","name":"elast"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"maxSpeed"},"value":{"type":"Identifier","name":"maximumSpeed"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"playerVelocity"},"value":{"type":"Identifier","name":"playerVel"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"print"},"arguments":[{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"Direction:","raw":"\"Direction:\""},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"vec","raw":"\"vec\""}]}}]}},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]}],"comments":[{"type":"Comment","value":"require('o_mis')\r\n\r\nfunction onStartup(self, msg)\r\n\r\n    print \"pad starting up\"\r\n\r\n    local ControlObject = self:GetObjectsInGroup{ group = \"GP_Control\"}.objects[1]\r\n\r\n    print (tostring(ControlObject:GetLOT().objtemplate))\r\n\r\n\tGAMEOBJ:GetTimer():AddTimerWithCancel( 0.2, \"Notify\",self )\r\n    storeObjectByName(self, \"ControlObject\", ControlObject)\r\n\r\nend\r\n\r\nfunction onTimerDone(self, msg)\r\n\r\n\tif msg.name == \"Notify\" then\r\n        getObjectByName(self,\"ControlObject\"):NotifyObject{name = \"padloaded\", ObjIDSender = self}\r\n    end\r\n\r\nend \r\n\r\nfunction onCollisionPhantom(self, msg)\r\n\r\n    local player = msg.objectID\r\n    local bouncepos = self:GetPosition().pos \r\n    local mypos = player:GetPosition().pos\r\n\r\n    print \"Collide\"\r\n\r\n    if mypos.x > bouncepos.x then\r\n        msg.objectID:Knockback{vector={x=-10,y=40,z=0}}\r\n\r\n    elseif mypos.x < bouncepos.x then\r\n        msg.objectID:Knockback{vector={x=10,y=40,z=0}}\r\n    end\r\n\r\nend\r\n--","raw":"--[[require('o_mis')\r\n\r\nfunction onStartup(self, msg)\r\n\r\n    print \"pad starting up\"\r\n\r\n    local ControlObject = self:GetObjectsInGroup{ group = \"GP_Control\"}.objects[1]\r\n\r\n    print (tostring(ControlObject:GetLOT().objtemplate))\r\n\r\n\tGAMEOBJ:GetTimer():AddTimerWithCancel( 0.2, \"Notify\",self )\r\n    storeObjectByName(self, \"ControlObject\", ControlObject)\r\n\r\nend\r\n\r\nfunction onTimerDone(self, msg)\r\n\r\n\tif msg.name == \"Notify\" then\r\n        getObjectByName(self,\"ControlObject\"):NotifyObject{name = \"padloaded\", ObjIDSender = self}\r\n    end\r\n\r\nend \r\n\r\nfunction onCollisionPhantom(self, msg)\r\n\r\n    local player = msg.objectID\r\n    local bouncepos = self:GetPosition().pos \r\n    local mypos = player:GetPosition().pos\r\n\r\n    print \"Collide\"\r\n\r\n    if mypos.x > bouncepos.x then\r\n        msg.objectID:Knockback{vector={x=-10,y=40,z=0}}\r\n\r\n    elseif mypos.x < bouncepos.x then\r\n        msg.objectID:Knockback{vector={x=10,y=40,z=0}}\r\n    end\r\n\r\nend\r\n--]]"}]}