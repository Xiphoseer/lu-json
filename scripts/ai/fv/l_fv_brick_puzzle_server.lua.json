{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"resetBricks"}],"init":[{"type":"NumericLiteral","value":30,"raw":"30"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"mygroup"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tostring"},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"spawner_name","raw":"\"spawner_name\""}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"pipeNum"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"sub"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"Identifier","name":"mygroup"},{"type":"NumericLiteral","value":11,"raw":"11"},{"type":"NumericLiteral","value":11,"raw":"11"}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"pipeNum"},"right":{"type":"NumericLiteral","value":1,"raw":"1"}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"resetBricks"},{"type":"StringLiteral","value":"reset","raw":"\"reset\""},{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onDie"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"mygroup"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tostring"},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"spawner_name","raw":"\"spawner_name\""}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"pipeNum"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"sub"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"Identifier","name":"mygroup"},{"type":"NumericLiteral","value":11,"raw":"11"},{"type":"NumericLiteral","value":11,"raw":"11"}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"pipeGroup"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"sub"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"Identifier","name":"mygroup"},{"type":"NumericLiteral","value":1,"raw":"1"},{"type":"NumericLiteral","value":10,"raw":"10"}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"nextPipeNum"}],"init":[{"type":"BinaryExpression","operator":"+","left":{"type":"Identifier","name":"pipeNum"},"right":{"type":"NumericLiteral","value":1,"raw":"1"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"SamePipeSpawner"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetSpawnerByName"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":[{"type":"Identifier","name":"mygroup"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"SamePipeSpawner"},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SpawnerReset"},"base":{"type":"Identifier","name":"SamePipeSpawner"}},"arguments":[]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SpawnerDeactivate"},"base":{"type":"Identifier","name":"SamePipeSpawner"}},"arguments":[]}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"killerID"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"isChar"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"IsCharacter"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"killerID"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]}}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"nextPipe"}],"init":[{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"pipeGroup"},"right":{"type":"Identifier","name":"nextPipeNum"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"NextPipeSpawner"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetSpawnerByName"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":[{"type":"Identifier","name":"nextPipe"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"NextPipeSpawner"},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SpawnerActivate"},"base":{"type":"Identifier","name":"NextPipeSpawner"}},"arguments":[]}}]}]}]},{"type":"ElseClause","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"firstPipe"}],"init":[{"type":"BinaryExpression","operator":"..","left":{"type":"Identifier","name":"pipeGroup"},"right":{"type":"StringLiteral","value":"1","raw":"\"1\""}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"FirstPipeSpawner"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetSpawnerByName"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":[{"type":"Identifier","name":"firstPipe"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"FirstPipeSpawner"},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SpawnerActivate"},"base":{"type":"Identifier","name":"FirstPipeSpawner"}},"arguments":[]}}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"reset","raw":"\"reset\""},"inParens":true},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"iState"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetRebuildState"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}},"right":{"type":"NumericLiteral","value":0,"raw":"0"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RequestDie"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"killerID"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"killType"},"value":{"type":"StringLiteral","value":"SILENT","raw":"\"SILENT\""}}]}}}]}]}]}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"  Server script on smashable pipes for the blue brick puzzle","raw":"--  Server script on smashable pipes for the blue brick puzzle"},{"type":"Comment","value":" this script only works if the spawner networks are set up correctly, in numerical order ","raw":"-- this script only works if the spawner networks are set up correctly, in numerical order "},{"type":"Comment","value":" created Brandi... 8/25/10","raw":"-- created Brandi... 8/25/10"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" timer for the quickbuilds to reset if the player doesnt build them","raw":"-- timer for the quickbuilds to reset if the player doesnt build them"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" when the object is loaded","raw":"-- when the object is loaded"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" check to see if this object is the smashable only pipes","raw":"-- check to see if this object is the smashable only pipes"},{"type":"Comment","value":" get the name of the spawner network","raw":"-- get the name of the spawner network"},{"type":"Comment","value":" get the last value in the string and convert it to a number","raw":"-- get the last value in the string and convert it to a number"},{"type":"Comment","value":" start a timer for the quickbuilds to reset if the player doesnt build them","raw":"-- start a timer for the quickbuilds to reset if the player doesnt build them"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" when the object dies","raw":"-- when the object dies"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" get the name of the spawner network","raw":"-- get the name of the spawner network"},{"type":"Comment","value":" get the last value in the string and convert it to a number","raw":"-- get the last value in the string and convert it to a number"},{"type":"Comment","value":" get the first part of the spawner network, without the number","raw":"-- get the first part of the spawner network, without the number"},{"type":"Comment","value":" add 1 to the value of the spawner network","raw":"-- add 1 to the value of the spawner network"},{"type":"Comment","value":" deactivate and reset current spawner network","raw":"-- deactivate and reset current spawner network"},{"type":"Comment","value":" see if the object was killed by the player, if so spawn the next object","raw":"-- see if the object was killed by the player, if so spawn the next object"},{"type":"Comment","value":" create the string for the next spawner network","raw":"-- create the string for the next spawner network"},{"type":"Comment","value":"if object died on its own, then reset the puzzle back to the beginning","raw":"--if object died on its own, then reset the puzzle back to the beginning"},{"type":"Comment","value":" create a string for the first spawner network","raw":"-- create a string for the first spawner network"},{"type":"Comment","value":" activate the first spawner network","raw":"-- activate the first spawner network"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" when a timer is done","raw":"-- when a timer is done"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" timer on quickbuild when it first starts up","raw":"-- timer on quickbuild when it first starts up"},{"type":"Comment","value":" if the quickbuild hasnt been built yet, kill it","raw":"-- if the quickbuild hasnt been built yet, kill it"}]}