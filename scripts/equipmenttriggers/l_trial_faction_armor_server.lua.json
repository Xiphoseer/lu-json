{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"equipFlag"}],"init":[{"type":"NumericLiteral","value":126,"raw":"126"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onFactionTriggerItemEquipped"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"playerID"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"bEquipped"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bFlag"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetFlag"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iFlagID"},"value":{"type":"Identifier","name":"equipFlag"}}]}}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"bEquipped"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"owner"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ownerID"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetItemOwner"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"player"}},"arguments":[]},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"owner"}},"arguments":[]},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetFlag"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iFlagID"},"value":{"type":"Identifier","name":"equipFlag"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bFlag"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"player","raw":"\"player\""},{"type":"Identifier","name":"player"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":1,"raw":"1"},{"type":"StringLiteral","value":"FillStats","raw":"\"FillStats\""},{"type":"Identifier","name":"self"}]}}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"FillStats","raw":"\"FillStats\""}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"player","raw":"\"player\""}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"maxHealth"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"health"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetMaxHealth"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetHealth"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"health"},"value":{"type":"Identifier","name":"maxHealth"}}]}}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"maxArmor"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"armor"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetMaxArmor"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetArmor"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"armor"},"value":{"type":"Identifier","name":"maxArmor"}}]}}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"maxImagination"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"imagination"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetMaxImagination"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetImagination"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"imagination"},"value":{"type":"Identifier","name":"maxImagination"}}]}}}]}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" L_TRIAL_FACTION_ARMOR_SERVER.lua","raw":"-- L_TRIAL_FACTION_ARMOR_SERVER.lua"},{"type":"Comment","value":" Runs server side faction trial armor equipment functions","raw":"-- Runs server side faction trial armor equipment functions"},{"type":"Comment","value":" created abeechler - 6/27/11","raw":"-- created abeechler - 6/27/11"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" To be set upon wearing trial faction armor for the first time in a session","raw":"-- To be set upon wearing trial faction armor for the first time in a session"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Capture initial equip events for processing","raw":"-- Capture initial equip events for processing"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Player attempting equip","raw":"-- Player attempting equip"},{"type":"Comment","value":" Determine via flag info if this is a session first time equip","raw":"-- Determine via flag info if this is a session first time equip"},{"type":"Comment","value":" This is the first time in a session we are attempting to equip trial armor","raw":"-- This is the first time in a session we are attempting to equip trial armor"},{"type":"Comment","value":" Set our flag and heal our stats","raw":"-- Set our flag and heal our stats"},{"type":"Comment","value":" Save a hook to the equipping player","raw":"-- Save a hook to the equipping player"},{"type":"Comment","value":" Prepare for stat refill","raw":"-- Prepare for stat refill"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Called when timers are done","raw":"-- Called when timers are done"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" This is our first time donning the armor, apply all necessary stat refills","raw":"-- This is our first time donning the armor, apply all necessary stat refills"},{"type":"Comment","value":" Obtain a hook to the equipping player","raw":"-- Obtain a hook to the equipping player"},{"type":"Comment","value":" Fill the health to capacity","raw":"-- Fill the health to capacity"},{"type":"Comment","value":" Fill the armor to capacity","raw":"-- Fill the armor to capacity"},{"type":"Comment","value":" Fill the imagination to capacity","raw":"-- Fill the imagination to capacity"}]}