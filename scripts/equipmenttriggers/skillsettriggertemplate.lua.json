{"type":"Chunk","body":[{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onFactionTriggerItemEquipped"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddStatTrigger"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"trigger","raw":"\"trigger\""}]}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStatEventTriggered"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"Parent"},"base":{"type":"Identifier","name":"msg"}}},"arguments":{"type":"TableConstructorExpression","fields":[]}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"statValue"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"StatValue"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"statValue"},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"OldValue"},"base":{"type":"Identifier","name":"msg"}}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"setInfo"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"IsItemInSet"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"Parent"},"base":{"type":"Identifier","name":"msg"}}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"setItem"},"value":{"type":"Identifier","name":"self"}}]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"setIDs"},"base":{"type":"Identifier","name":"setInfo"}},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isFactionSkill","raw":"\"isFactionSkill\""}]},"right":{"type":"BooleanLiteral","value":true,"raw":"true"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"factionSkillReady","raw":"\"factionSkillReady\""}]},"right":{"type":"BooleanLiteral","value":true,"raw":"true"}}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"checkSetAndCast"},"arguments":[{"type":"Identifier","name":"self"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"setIDs"},"base":{"type":"Identifier","name":"setInfo"}},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"Parent"},"base":{"type":"Identifier","name":"msg"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"factionCooldownTime","raw":"\"factionCooldownTime\""}]},{"type":"StringLiteral","value":"skillCooldown","raw":"\"skillCooldown\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"factionSkillReady","raw":"\"factionSkillReady\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}}]},{"type":"ElseifClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isFactionSkill","raw":"\"isFactionSkill\""}]}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"checkSetAndCast"},"arguments":[{"type":"Identifier","name":"self"},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"setIDs"},"base":{"type":"Identifier","name":"setInfo"}},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"Parent"},"base":{"type":"Identifier","name":"msg"}}]}}]}]}]}]}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"checkSetAndCast"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"set"},{"type":"Identifier","name":"itemParent"}],"body":[{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"index"},{"type":"Identifier","name":"skillSetID"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"ipairs"},"arguments":[{"type":"Identifier","name":"set"}]}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"skillSetID"},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"skillSet","raw":"\"skillSet\""}]}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"equippedItems"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetEquippedItemsInSet"},"base":{"type":"Identifier","name":"itemParent"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"setID"},"value":{"type":"Identifier","name":"skillSetID"}}]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"<=","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"itemsRequired","raw":"\"itemsRequired\""}]},"right":{"type":"UnaryExpression","operator":"#","argument":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"setItems"},"base":{"type":"Identifier","name":"equippedItems"}}}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"selfID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"equipSet"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"setItems"},"base":{"type":"Identifier","name":"equippedItems"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"items1"}],"init":[{"type":"IndexExpression","base":{"type":"Identifier","name":"equipSet"},"index":{"type":"NumericLiteral","value":1,"raw":"1"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"itemsID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"items1"}},"arguments":[]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"selfID"},"right":{"type":"Identifier","name":"itemsID"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CastSkill"},"base":{"type":"Identifier","name":"itemParent"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"skillID"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"skillID","raw":"\"skillID\""}]}}]}}},{"type":"ReturnStatement","arguments":[]}]}]}]}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"skillCooldown","raw":"\"skillCooldown\""}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"factionSkillReady","raw":"\"factionSkillReady\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]}]}]}],"comments":[{"type":"Comment","value":" the value of the stat","raw":"-- the value of the stat"},{"type":"Comment","value":" Fire the toughness skill","raw":"-- Fire the toughness skill"},{"type":"Comment","value":"IsItemInSet will give us a list of all the sets an item is in","raw":"--IsItemInSet will give us a list of all the sets an item is in"},{"type":"Comment","value":"verify that we're firing from the right set","raw":"--verify that we're firing from the right set"},{"type":"Comment","value":"fetch all the currently equipped items from our set.","raw":"--fetch all the currently equipped items from our set."},{"type":"Comment","value":"if we are the first item in the list we're going to cast the skill.","raw":"--if we are the first item in the list we're going to cast the skill."},{"type":"Comment","value":"All the items in the set will get this far, but only one of them will have to","raw":"--All the items in the set will get this far, but only one of them will have to"},{"type":"Comment","value":"actually fire the skill","raw":"--actually fire the skill"}]}