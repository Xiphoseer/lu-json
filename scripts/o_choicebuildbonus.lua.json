{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"INDICES"}],"init":[{"type":"NilLiteral","value":null,"raw":"nil"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"SetGroupName"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"name"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"groupName","raw":"\"groupName\""},{"type":"Identifier","name":"name"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"InitializeIndices"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"INDICES"}],"init":[{"type":"TableConstructorExpression","fields":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"group"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"groupName","raw":"\"groupName\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSpawners"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"ForNumericStatement","variable":{"type":"Identifier","name":"i"},"start":{"type":"NumericLiteral","value":1,"raw":"1"},"end":{"type":"UnaryExpression","operator":"#","argument":{"type":"Identifier","name":"group"}},"step":null,"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"buildID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"IndexExpression","base":{"type":"Identifier","name":"group"},"index":{"type":"Identifier","name":"i"}}},"arguments":[]}]},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"INDICES"},"index":{"type":"Identifier","name":"buildID"}}],"init":[{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"IsValidBuildID"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"checkID"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"group"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"groupName","raw":"\"groupName\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSpawners"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"ForNumericStatement","variable":{"type":"Identifier","name":"i"},"start":{"type":"NumericLiteral","value":1,"raw":"1"},"end":{"type":"UnaryExpression","operator":"#","argument":{"type":"Identifier","name":"group"}},"step":null,"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"currentID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"IndexExpression","base":{"type":"Identifier","name":"group"},"index":{"type":"Identifier","name":"i"}}},"arguments":[]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"currentID"},"right":{"type":"Identifier","name":"checkID"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"SetIndex"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"buildID"},{"type":"Identifier","name":"newIndex"},{"type":"Identifier","name":"bCheckForBonus"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"IsValidBuildID"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"buildID"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"AssignmentStatement","variables":[{"type":"IndexExpression","base":{"type":"Identifier","name":"INDICES"},"index":{"type":"Identifier","name":"buildID"}}],"init":[{"type":"Identifier","name":"newIndex"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"bCheckForBonus"},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"Identifier","name":"DoAllChoicebuildsMatch"},"arguments":[{"type":"Identifier","name":"self"}]},"right":{"type":"BooleanLiteral","value":true,"raw":"true"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"index"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"GetIndexOfFirstChoicebuild"},"arguments":[{"type":"Identifier","name":"self"}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"RewardBonus"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"index"}]}}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"GetIndexOfFirstChoicebuild"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"group"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"groupName","raw":"\"groupName\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSpawners"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"UnaryExpression","operator":"#","argument":{"type":"Identifier","name":"group"}},"right":{"type":"NumericLiteral","value":0,"raw":"0"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"IndexExpression","base":{"type":"Identifier","name":"INDICES"},"index":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"IndexExpression","base":{"type":"Identifier","name":"group"},"index":{"type":"NumericLiteral","value":1,"raw":"1"}}},"arguments":[]}}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"DoAllChoicebuildsMatch"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"group"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"groupName","raw":"\"groupName\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSpawners"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"numChoicebuilds"}],"init":[{"type":"UnaryExpression","operator":"#","argument":{"type":"Identifier","name":"group"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"numChoicebuilds"},"right":{"type":"NumericLiteral","value":0,"raw":"0"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"checkIndex"}],"init":[{"type":"IndexExpression","base":{"type":"Identifier","name":"INDICES"},"index":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"IndexExpression","base":{"type":"Identifier","name":"group"},"index":{"type":"NumericLiteral","value":1,"raw":"1"}}},"arguments":[]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"checkIndex"},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]},{"type":"ForNumericStatement","variable":{"type":"Identifier","name":"i"},"start":{"type":"NumericLiteral","value":1,"raw":"1"},"end":{"type":"Identifier","name":"numChoicebuilds"},"step":null,"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"buildID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"IndexExpression","base":{"type":"Identifier","name":"group"},"index":{"type":"Identifier","name":"i"}}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"choiceIndex"}],"init":[{"type":"IndexExpression","base":{"type":"Identifier","name":"INDICES"},"index":{"type":"Identifier","name":"buildID"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"choiceIndex"},"right":{"type":"Identifier","name":"checkIndex"},"inParens":true},"body":[{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" include this script if you care when a group of choicebuilds all are set to the same choice","raw":"-- include this script if you care when a group of choicebuilds all are set to the same choice"},{"type":"Comment","value":" the script that includes it will need to:","raw":"-- the script that includes it will need to:"},{"type":"Comment","value":" call SetGroupName so this script knows what group the choicebuilds are in","raw":"-- call SetGroupName so this script knows what group the choicebuilds are in"},{"type":"Comment","value":" call InitializeIndices any time the choices are all reset","raw":"-- call InitializeIndices any time the choices are all reset"},{"type":"Comment","value":" call SetIndex any time one choice changes.  Pass in true if you want to check if they're all alike.","raw":"-- call SetIndex any time one choice changes.  Pass in true if you want to check if they're all alike."},{"type":"Comment","value":" define function RewardBonus with what you want to happen when all the choicebuilds are the same","raw":"-- define function RewardBonus with what you want to happen when all the choicebuilds are the same"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" vars","raw":"-- vars"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" the index of the current choice for each choicebuild","raw":"-- the index of the current choice for each choicebuild"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" remember the name of the group that ","raw":"-- remember the name of the group that "},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" set the index for every choicebuild in the group to -1","raw":"-- set the index for every choicebuild in the group to -1"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" create the array to store the indices in","raw":"-- create the array to store the indices in"},{"type":"Comment","value":" get the group of choicebuilds","raw":"-- get the group of choicebuilds"},{"type":"Comment","value":" set the index for each to -1","raw":"-- set the index for each to -1"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" returns whether the given choicebuild is in the group","raw":"-- returns whether the given choicebuild is in the group"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" get the group of choicebuilds","raw":"-- get the group of choicebuilds"},{"type":"Comment","value":" check each one's ID against the one passed in","raw":"-- check each one's ID against the one passed in"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" sets the index for the given choicebuild to the given value","raw":"-- sets the index for the given choicebuild to the given value"},{"type":"Comment","value":" if bCheckForBonus is true, then it also checks whether all the choicebuilds in the group match","raw":"-- if bCheckForBonus is true, then it also checks whether all the choicebuilds in the group match"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" NOTE: the script that includes this one is responsible for defining RewardBonus","raw":"-- NOTE: the script that includes this one is responsible for defining RewardBonus"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" returns the index of the first choicebuild in the group","raw":"-- returns the index of the first choicebuild in the group"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" returns whether or not all the choicebuilds in the group are set to the same index ","raw":"-- returns whether or not all the choicebuilds in the group are set to the same index "},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" get the group of choicebuilds","raw":"-- get the group of choicebuilds"},{"type":"Comment","value":" if we didn't find any choicebuilds, return false","raw":"-- if we didn't find any choicebuilds, return false"},{"type":"Comment","value":" get the index of the first choicebuild in the group.","raw":"-- get the index of the first choicebuild in the group."},{"type":"Comment","value":" we'll compare all the others to that","raw":"-- we'll compare all the others to that"},{"type":"Comment","value":" check whether all the choicebuilds are the same","raw":"-- check whether all the choicebuilds are the same"}]}