{"type":"Chunk","body":[{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"number"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"number","raw":"'number'"}]},"right":{"type":"NumericLiteral","value":0,"raw":"0"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cName"}],"init":[{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"binoc_","raw":"\"binoc_\""},"right":{"type":"Identifier","name":"number"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cTime"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetCinematicInfo"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":[{"type":"Identifier","name":"cName"}]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"cTime","inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cName"}],"init":[{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"binoc_","raw":"\"binoc_\""},"right":{"type":"Identifier","name":"number"}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"cName","raw":"\"cName\""},{"type":"Identifier","name":"cName"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onRenderComponentReady"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetControlledID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"player"}},"arguments":[]},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationRequest"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetZoneControlID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"PlayerReady","raw":"\"PlayerReady\""}}]}}},{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckFlags"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"notifyPlayerReady"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"zoneObj"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetControlledID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckFlags"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationCancel"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"PlayerReady","raw":"\"PlayerReady\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"CheckFlags"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"map"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetCurrentZoneID"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"number"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"number","raw":"'number'"}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"number","inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"flagNumber"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"BinaryExpression","operator":"..","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"sub"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"Identifier","name":"map"},{"type":"NumericLiteral","value":0,"raw":"0"},{"type":"NumericLiteral","value":2,"raw":"2"}]},"right":{"type":"Identifier","name":"number"}}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"map","inParens":true},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bFlag"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetFlag"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iFlagID"},"value":{"type":"Identifier","name":"flagNumber"}}]}}},"right":{"type":"BooleanLiteral","value":false,"raw":"false"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayFXEffect"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"binocular_alert","raw":"\"binocular_alert\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"effectType"},"value":{"type":"StringLiteral","value":"cast","raw":"\"cast\""}}]}}}]}]}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onCheckUseRequirements"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"beingUsed","raw":"\"beingUsed\""}]},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bCanUse"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onClientUse"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.1,"raw":"0.1"},{"type":"StringLiteral","value":"startBinoc","raw":"\"startBinoc\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"beingUsed","raw":"\"beingUsed\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationRequest"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"user"},"base":{"type":"Identifier","name":"msg"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"OnHit","raw":"\"OnHit\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onFireEventClientSide"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"args"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"achieve","raw":"\"achieve\""}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"StopFXEffect"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"binocular_alert","raw":"\"binocular_alert\""}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetControlledID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"startBinoc","raw":"\"startBinoc\""},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"oDir"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetRotation"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":0.5,"raw":"0.5"},{"type":"StringLiteral","value":"lookanimation","raw":"\"lookanimation\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetStunned"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"StateChangeType"},"value":{"type":"StringLiteral","value":"PUSH","raw":"\"PUSH\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantMove"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bIgnoreImmunity"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantTurn"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantEquip"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetRotation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"oDir"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"oDir"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"oDir"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"w"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"w"},"base":{"type":"Identifier","name":"oDir"}}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayAnimation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"StringLiteral","value":"binoculars-idle","raw":"\"binoculars-idle\""}}]}}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"lookanimation","raw":"\"lookanimation\""},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cName"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"cName","raw":"\"cName\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"cName","inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"Identifier","name":"cName"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationRequest"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetZoneControlID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"CinematicUpdate","raw":"\"CinematicUpdate\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendMessage"},"base":{"type":"Identifier","name":"UI"}},"arguments":[{"type":"StringLiteral","value":"pushGameState","raw":"\"pushGameState\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"state","raw":"\"state\""}},{"type":"TableValue","value":{"type":"StringLiteral","value":"cinematic","raw":"\"cinematic\""}}]}}]}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"soundName"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"sound","raw":"'sound'"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"soundName","inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayNDAudioEmitter"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"m_NDAudioEventGUID"},"value":{"type":"Identifier","name":"soundName"}}]}}}]}]}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"binocularExit"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetStunned"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"StateChangeType"},"value":{"type":"StringLiteral","value":"POP","raw":"\"POP\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantMove"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bIgnoreImmunity"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantTurn"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantEquip"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"notifyCinematicUpdate"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"zoneObj"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cName"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"cName","raw":"\"cName\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"event"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"ENDED","raw":"\"ENDED\""}},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"pathName"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"Identifier","name":"cName"}}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"binocularExit"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"notifyOnHit"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetStunned"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"StateChangeType"},"value":{"type":"StringLiteral","value":"POP","raw":"\"POP\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantMove"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bIgnoreImmunity"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantTurn"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bCantEquip"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CancelAllTimers"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"EndCinematic"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"binocularExit"},"arguments":[{"type":"Identifier","name":"self"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"binocularExit"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetControlledID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendMessage"},"base":{"type":"Identifier","name":"UI"}},"arguments":[{"type":"StringLiteral","value":"popGameState","raw":"\"popGameState\""},{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"state","raw":"\"state\""}},{"type":"TableValue","value":{"type":"StringLiteral","value":"cinematic","raw":"\"cinematic\""}}]}}]}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"TerminateInteraction"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"type"},"value":{"type":"StringLiteral","value":"fromInteraction","raw":"'fromInteraction'"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ObjIDTerminator"},"value":{"type":"Identifier","name":"self"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayAnimation"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"StringLiteral","value":"ben_is_king","raw":"\"ben_is_king\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"beingUsed","raw":"\"beingUsed\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationCancel"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"OnHit","raw":"\"OnHit\""}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationCancel"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetZoneControlID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"CinematicUpdate","raw":"\"CinematicUpdate\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onGetPriorityPickListType"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"beingUsed","raw":"\"beingUsed\""}],"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ePickType"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}}]}]},{"type":"ElseClause","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"myPriority"}],"init":[{"type":"NumericLiteral","value":0.8,"raw":"0.8"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":">","left":{"type":"Identifier","name":"myPriority"},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fCurrentPickTypePriority"},"base":{"type":"Identifier","name":"msg"}},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fCurrentPickTypePriority"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"Identifier","name":"myPriority"}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ePickType"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"NumericLiteral","value":14,"raw":"14"}]}]}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Script on the Binoculars","raw":"-- Script on the Binoculars"},{"type":"Comment","value":" plays an animation, the cinematic and updates the achievement","raw":"-- plays an animation, the cinematic and updates the achievement"},{"type":"Comment","value":" ","raw":"-- "},{"type":"Comment","value":" updated abeechler ... 7/27/11 - refactored scripts and added onHit exit interact functionality","raw":"-- updated abeechler ... 7/27/11 - refactored scripts and added onHit exit interact functionality"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"To set up ","raw":"--To set up "},{"type":"Comment","value":"\teach binocular cinematic must be named \"binoc_##\"","raw":"--\teach binocular cinematic must be named \"binoc_##\""},{"type":"Comment","value":"\ton each binocular, config data must be set for \"number\" and \"0:##\"","raw":"--\ton each binocular, config data must be set for \"number\" and \"0:##\""},{"type":"Comment","value":"\t## should corrispond with the binocular being used, and the cinematic you want to play","raw":"--\t## should corrispond with the binocular being used, and the cinematic you want to play"},{"type":"Comment","value":"\t## must be unique for the achievments to work, and there must be an entry for the binoc in the player flag","raw":"--\t## must be unique for the achievments to work, and there must be an entry for the binoc in the player flag"},{"type":"Comment","value":"\t\tdatabase table if that binoc is to be used for the achievement","raw":"--\t\tdatabase table if that binoc is to be used for the achievement"},{"type":"Comment","value":" Entries in the player plag table","raw":"-- Entries in the player plag table"},{"type":"Comment","value":"\t\tShould corraspond with the map number","raw":"--\t\tShould corraspond with the map number"},{"type":"Comment","value":"\t\tso all the binocs in the spaceship should start at 1001,1002,1003,etc...","raw":"--\t\tso all the binocs in the spaceship should start at 1001,1002,1003,etc..."},{"type":"Comment","value":"\t\t\tAG with 1101,1102,1103, etc...","raw":"--\t\t\tAG with 1101,1102,1103, etc..."},{"type":"Comment","value":"----------------------------------------------------------------------","raw":"------------------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Set default variable state","raw":"-- Set default variable state"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Catch binocular number for cinematic existence check\t\t","raw":"-- Catch binocular number for cinematic existence check\t\t"},{"type":"Comment","value":" Check for existence of an appropriate cinematic path ","raw":"-- Check for existence of an appropriate cinematic path "},{"type":"Comment","value":" Save the cinematic name for reference","raw":"-- Save the cinematic name for reference"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Turning on the effects on the binoculars based on ","raw":"-- Turning on the effects on the binoculars based on "},{"type":"Comment","value":" whether the player has looked through them before or not","raw":"-- whether the player has looked through them before or not"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Get the player","raw":"-- Get the player"},{"type":"Comment","value":" Tell the zone control object to tell the script when the local player is loaded","raw":"-- Tell the zone control object to tell the script when the local player is loaded"},{"type":"Comment","value":" Custom function","raw":"-- Custom function"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" The zone control object says the player is loaded","raw":"-- The zone control object says the player is loaded"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Get the player","raw":"-- Get the player"},{"type":"Comment","value":" Custom function to see if the players flag is set","raw":"-- Custom function to see if the players flag is set"},{"type":"Comment","value":" Cancel the notification request","raw":"-- Cancel the notification request"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Determine whether or not to play object alert effects","raw":"-- Determine whether or not to play object alert effects"},{"type":"Comment","value":" based on player flag state","raw":"-- based on player flag state"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Get the number on the binoc config data from HF","raw":"-- Get the number on the binoc config data from HF"},{"type":"Comment","value":" Make sure the script doesnt fail if the binoc doesnt have config data\t\t","raw":"-- Make sure the script doesnt fail if the binoc doesnt have config data\t\t"},{"type":"Comment","value":" Make player flag number","raw":"-- Make player flag number"},{"type":"Comment","value":" Skips the rest of the function if there is no map number","raw":"-- Skips the rest of the function if there is no map number"},{"type":"Comment","value":" If the player flag is false, the player hasnt looked though the binocs before","raw":"-- If the player flag is false, the player hasnt looked though the binocs before"},{"type":"Comment","value":" Turn on the binocular effect","raw":"-- Turn on the binocular effect"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Check to see if the player can use the binoculars","raw":"-- Check to see if the player can use the binoculars"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Check to make sure the player isnt currently using the binoculars","raw":"-- Check to make sure the player isnt currently using the binoculars"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Called on successful client use","raw":"-- Called on successful client use"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" 'SetUserCtrlCompPause' crashs the game when used in this function, so i moved ","raw":"-- 'SetUserCtrlCompPause' crashs the game when used in this function, so i moved "},{"type":"Comment","value":" everything to a onTimerDone function to avoid crashes - not ideal, but it works","raw":"-- everything to a onTimerDone function to avoid crashes - not ideal, but it works"},{"type":"Comment","value":" Listen for if the current user gets hit","raw":"-- Listen for if the current user gets hit"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Process server-sent messages","raw":"-- Process server-sent messages"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Turn off the binocular effect","raw":"-- Turn off the binocular effect"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Process timer events","raw":"-- Process timer events"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Obtain a reference to the player","raw":"-- Obtain a reference to the player"},{"type":"Comment","value":" Temp animation while we wait for an animation of the player looking through the binoculars\t","raw":"-- Temp animation while we wait for an animation of the player looking through the binoculars\t"},{"type":"Comment","value":" Play cinematic","raw":"-- Play cinematic"},{"type":"Comment","value":" Request notification from the player when the cinematic is done","raw":"-- Request notification from the player when the cinematic is done"},{"type":"Comment","value":" Grab the sound set in the config data of the binoc in HF","raw":"-- Grab the sound set in the config data of the binoc in HF"},{"type":"Comment","value":" Let the script run even if there isn't sound config data","raw":"-- Let the script run even if there isn't sound config data"},{"type":"Comment","value":" Utility function to handle necessary binocular exit events","raw":"-- Utility function to handle necessary binocular exit events"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Catch and process cinematic update events","raw":"-- Catch and process cinematic update events"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Get the currently desired playing binocular cinematic","raw":"-- Get the currently desired playing binocular cinematic"},{"type":"Comment","value":" Do nothing if the cinematic is not ending","raw":"-- Do nothing if the cinematic is not ending"},{"type":"Comment","value":" Utility function to handle necessary binocular exit events","raw":"-- Utility function to handle necessary binocular exit events"},{"type":"Comment","value":"-------------------------------------------","raw":"---------------------------------------------"},{"type":"Comment","value":" Sent when the object checks its pick type","raw":"-- Sent when the object checks its pick type"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Handle event interrupt processing","raw":"-- Handle event interrupt processing"},{"type":"Comment","value":" Utility function to handle necessary binocular exit events","raw":"-- Utility function to handle necessary binocular exit events"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Utility function used to handle interaction","raw":"-- Utility function used to handle interaction"},{"type":"Comment","value":" exit processing","raw":"-- exit processing"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Obtain a reference to the player","raw":"-- Obtain a reference to the player"},{"type":"Comment","value":" Remove cinematic bars","raw":"-- Remove cinematic bars"},{"type":"Comment","value":" Exit interaction","raw":"-- Exit interaction"},{"type":"Comment","value":" Reset animation","raw":"-- Reset animation"},{"type":"Comment","value":" Cancel the notification requests","raw":"-- Cancel the notification requests"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Sent when the object checks its pick type","raw":"-- Sent when the object checks its pick type"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Interactive pick type","raw":"-- Interactive pick type"}]}