{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"defaultAttachLocked"}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onOffCollisionPhantom"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetControlledID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"senderID"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]},"right":{"type":"Identifier","name":"playerID"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"bAttachLocked"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bAttachLocked","raw":"\"bAttachLocked\""}]},"right":{"type":"Identifier","name":"defaultAttachLocked"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"bAttachLocked"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cameraPath"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"cameraPath","raw":"\"cameraPath\""}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"leadOut"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"leadOut","raw":"\"leadOut\""}]},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1.0"}}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"Identifier","name":"cameraPath","inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"DetachCameraFromRail"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"Identifier","name":"cameraPath"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"leadOut"},"value":{"type":"Identifier","name":"leadOut"}}]}}}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationCancel"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"StartRailMovement","raw":"\"StartRailMovement\""}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationCancel"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"CancelRailMovement","raw":"\"CancelRailMovement\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"subscribeLock","raw":"\"subscribeLock\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onCollisionPhantom"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetControlledID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"playerID"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"senderID"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]},"right":{"type":"Identifier","name":"playerID"},"inParens":true},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"cameraPath"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"cameraPath","raw":"\"cameraPath\""}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"positionPath"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"positionPath","raw":"\"positionPath\""}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"alwaysFaceTarget"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"alwaysFaceTarget","raw":"\"alwaysFaceTarget\""}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"leadIn"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"leadIn","raw":"\"leadIn\""}]},"right":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1.0"}}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"biasAmount"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"biasAmount","raw":"\"biasAmount\""}]},"right":{"type":"NumericLiteral","value":0,"raw":"0"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"Identifier","name":"cameraPath"},"right":{"type":"Identifier","name":"positionPath"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AttachCameraToRail"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"pathName"},"value":{"type":"Identifier","name":"cameraPath"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"positionPathName"},"value":{"type":"Identifier","name":"positionPath"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"leadIn"},"value":{"type":"Identifier","name":"leadIn"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"alwaysFaceTarget"},"value":{"type":"Identifier","name":"alwaysFaceTarget"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"targetID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"biasAmount"},"value":{"type":"Identifier","name":"biasAmount"}}]}}}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"subscribeLock"}],"init":[{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"subscribeLock","raw":"\"subscribeLock\""}]},"right":{"type":"BooleanLiteral","value":false,"raw":"false"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"subscribeLock"},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationRequest"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"StartRailMovement","raw":"\"StartRailMovement\""}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationRequest"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"CancelRailMovement","raw":"\"CancelRailMovement\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"subscribeLock","raw":"\"subscribeLock\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"notifyStartRailMovement"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bAttachLocked","raw":"\"bAttachLocked\""},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"notifyCancelRailMovement"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"bAttachLocked","raw":"\"bAttachLocked\""},{"type":"BooleanLiteral","value":false,"raw":"false"}]}}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" L_CAM_RAIL_CLIENT.lua","raw":"-- L_CAM_RAIL_CLIENT.lua"},{"type":"Comment","value":" Client side script for camera volume processing while","raw":"-- Client side script for camera volume processing while"},{"type":"Comment","value":" travelling along a rail.","raw":"-- travelling along a rail."},{"type":"Comment","value":" created abeechler ... 8/23/11","raw":"-- created abeechler ... 8/23/11"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Allows the script to prevent offCollision messages while the player ","raw":"-- Allows the script to prevent offCollision messages while the player "},{"type":"Comment","value":" is travelling on a rail","raw":"-- is travelling on a rail"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Catch off collision messages and process to determine whether","raw":"-- Catch off collision messages and process to determine whether"},{"type":"Comment","value":" or not we should relinguish control of the camera","raw":"-- or not we should relinguish control of the camera"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Acquire a reference to the local player","raw":"-- Acquire a reference to the local player"},{"type":"Comment","value":" Is the sender the local client?","raw":"-- Is the sender the local client?"},{"type":"Comment","value":" Are we locked cuurently by rail travel?","raw":"-- Are we locked cuurently by rail travel?"},{"type":"Comment","value":" We have valid config data - remove volume camera control","raw":"-- We have valid config data - remove volume camera control"},{"type":"Comment","value":" Remove player script event notifications","raw":"-- Remove player script event notifications"},{"type":"Comment","value":" Allow subsequent notification requests","raw":"-- Allow subsequent notification requests"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Catch on collision messages, assuming control of the camera ","raw":"-- Catch on collision messages, assuming control of the camera "},{"type":"Comment","value":" when we have valid information to process","raw":"-- when we have valid information to process"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Acquire a reference to the local player","raw":"-- Acquire a reference to the local player"},{"type":"Comment","value":" Is the sender the local client?","raw":"-- Is the sender the local client?"},{"type":"Comment","value":" We have valid config data - assume volume camera control","raw":"-- We have valid config data - assume volume camera control"},{"type":"Comment","value":" Obtain the subscribe lock to determine whether or not we have a current ","raw":"-- Obtain the subscribe lock to determine whether or not we have a current "},{"type":"Comment","value":" notification subscription","raw":"-- notification subscription"},{"type":"Comment","value":" Subscribe to player script event notifications","raw":"-- Subscribe to player script event notifications"},{"type":"Comment","value":" Prevent subsequent notification requests","raw":"-- Prevent subsequent notification requests"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Determine when the local player is travelling along a rail","raw":"-- Determine when the local player is travelling along a rail"},{"type":"Comment","value":" to prevent off collision events","raw":"-- to prevent off collision events"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Determine when the local player is done travelling along a rail","raw":"-- Determine when the local player is done travelling along a rail"},{"type":"Comment","value":" to allow off collision events","raw":"-- to allow off collision events"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"}]}