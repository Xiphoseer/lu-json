{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"VisibilityObjectTable"}],"init":[{"type":"TableConstructorExpression","fields":[]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"setGameVariables"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"passedVisibilityObjectTable"}],"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"VisibilityObjectTable"}],"init":[{"type":"Identifier","name":"passedVisibilityObjectTable"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"baseOnScopeChanged"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bEnteredScope"},"base":{"type":"Identifier","name":"msg"}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetControlledID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationRequest"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetZoneControlID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"PlayerReady","raw":"\"PlayerReady\""}}]}}},{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckMissions"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onScopeChanged"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"baseOnScopeChanged"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"baseNotifyPlayerReady"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"zoneObj"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetControlledID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckMissions"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationCancel"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"PlayerReady","raw":"\"PlayerReady\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"notifyPlayerReady"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"zoneObj"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"baseNotifyPlayerReady"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"zoneObj"},{"type":"Identifier","name":"msg"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"CheckMissions"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"mySpawnerNom"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"spawner_name","raw":"\"spawner_name\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"IndexExpression","base":{"type":"Identifier","name":"VisibilityObjectTable"},"index":{"type":"Identifier","name":"mySpawnerNom"},"inParens":true},"body":[{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"i"},{"type":"Identifier","name":"missionID"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"ipairs"},"arguments":[{"type":"IndexExpression","base":{"type":"Identifier","name":"VisibilityObjectTable"},"index":{"type":"Identifier","name":"mySpawnerNom"}}]}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"missionstate"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"missionState"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetMissionState"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"missionID"},"value":{"type":"Identifier","name":"missionID"}}]}}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"missionstate"},"right":{"type":"NumericLiteral","value":2,"raw":"2"}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"missionstate"},"right":{"type":"NumericLiteral","value":10,"raw":"10"}}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}}]}}},{"type":"ReturnStatement","arguments":[]}]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"baseOnNotifyClientObject"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"SetVisibility","raw":"\"SetVisibility\""}},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"param1"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"NumericLiteral","value":1,"raw":"1"},"inParens":true},"right":{"type":"UnaryExpression","operator":"not","argument":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"visible"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}},"inParens":true},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}}]}}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"param1"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"NumericLiteral","value":0,"raw":"0"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVisible"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"visible"},"value":{"type":"BooleanLiteral","value":false,"raw":"false"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fadeTime"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}}]}}}]}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onNotifyClientObject"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"baseOnNotifyClientObject"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}]}}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" L_VIS_TOGGLE_OBJ.lua","raw":"-- L_VIS_TOGGLE_OBJ.lua"},{"type":"Comment","value":" Catches and processes notification events for visibiltiy ","raw":"-- Catches and processes notification events for visibiltiy "},{"type":"Comment","value":" toggle objects as sent from a TOGGLE_NOTIFIER object","raw":"-- toggle objects as sent from a TOGGLE_NOTIFIER object"},{"type":"Comment","value":" created abeechler - 6/8/11","raw":"-- created abeechler - 6/8/11"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Define empty tables that will be set from the ","raw":"-- Define empty tables that will be set from the "},{"type":"Comment","value":" specific notification object","raw":"-- specific notification object"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":" Variables passed from the object specific script that are used throughout this utility script","raw":"-- Variables passed from the object specific script that are used throughout this utility script"},{"type":"Comment","value":"--------------------------------------------------------------","raw":"----------------------------------------------------------------"},{"type":"Comment","value":"-------------------------------------------------------------","raw":"---------------------------------------------------------------"},{"type":"Comment","value":" The player has entered (or left) the ghosting range of the object","raw":"-- The player has entered (or left) the ghosting range of the object"},{"type":"Comment","value":"-------------------------------------------------------------","raw":"---------------------------------------------------------------"},{"type":"Comment","value":" If the player entered ghosting range","raw":"-- If the player entered ghosting range"},{"type":"Comment","value":" Tell the zone control object to notify the script when the local player is loaded","raw":"-- Tell the zone control object to notify the script when the local player is loaded"},{"type":"Comment","value":" Utility function used to process object visibility","raw":"-- Utility function used to process object visibility"},{"type":"Comment","value":" based on mission state","raw":"-- based on mission state"},{"type":"Comment","value":"-------------------------------------------------------------","raw":"---------------------------------------------------------------"},{"type":"Comment","value":" We have caught a player loaded notification","raw":"-- We have caught a player loaded notification"},{"type":"Comment","value":"-------------------------------------------------------------","raw":"---------------------------------------------------------------"},{"type":"Comment","value":" Get the player","raw":"-- Get the player"},{"type":"Comment","value":" Utility function used to process object visibility","raw":"-- Utility function used to process object visibility"},{"type":"Comment","value":" based on mission state","raw":"-- based on mission state"},{"type":"Comment","value":" Cancel the notification request","raw":"-- Cancel the notification request"},{"type":"Comment","value":"-------------------------------------------------------------","raw":"---------------------------------------------------------------"},{"type":"Comment","value":" Utility function used to process a player's current state on missions","raw":"-- Utility function used to process a player's current state on missions"},{"type":"Comment","value":" responsible for updating this object's visibility","raw":"-- responsible for updating this object's visibility"},{"type":"Comment","value":"-------------------------------------------------------------","raw":"---------------------------------------------------------------"},{"type":"Comment","value":" Get the name of the spawn network this object is on","raw":"-- Get the name of the spawn network this object is on"},{"type":"Comment","value":" We have a valid associated mission list to process","raw":"-- We have a valid associated mission list to process"},{"type":"Comment","value":" Determine if the player is on the mission","raw":"-- Determine if the player is on the mission"},{"type":"Comment","value":" The player is on the mission, turn the object visiblity on","raw":"-- The player is on the mission, turn the object visiblity on"},{"type":"Comment","value":" Turn the object visiblity off","raw":"-- Turn the object visiblity off"},{"type":"Comment","value":"-------------------------------------------------------------","raw":"---------------------------------------------------------------"},{"type":"Comment","value":" Additional visibility toggle utility provided for server ","raw":"-- Additional visibility toggle utility provided for server "},{"type":"Comment","value":" objects monitoring current mission completion status","raw":"-- objects monitoring current mission completion status"},{"type":"Comment","value":"-------------------------------------------------------------","raw":"---------------------------------------------------------------"}]}