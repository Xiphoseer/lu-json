{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"objAlertIconID"}],"init":[{"type":"NumericLiteral","value":107,"raw":"107"}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetProximityRadius"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iconID"},"value":{"type":"Identifier","name":"objAlertIconID"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"radius"},"value":{"type":"NumericLiteral","value":80,"raw":"80"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"Icon_Display_Distance","raw":"\"Icon_Display_Distance\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onCheckUseRequirements"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"}],"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bCanUse"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]},{"type":"ElseClause","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"preConVar"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"CheckPrecondition","raw":"\"CheckPrecondition\""}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"Identifier","name":"preConVar"},"right":{"type":"BinaryExpression","operator":"~=","left":{"type":"Identifier","name":"preConVar"},"right":{"type":"StringLiteral","value":"","raw":"\"\""}}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"check"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"CheckListOfPreconditionsFromLua"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objIDUser"},"base":{"type":"Identifier","name":"msg"}}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"PreconditionsToCheck"},"value":{"type":"Identifier","name":"preConVar"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"requestingID"},"value":{"type":"Identifier","name":"self"}}]}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bPass"},"base":{"type":"Identifier","name":"check"}}},"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"isFromUI"},"base":{"type":"Identifier","name":"msg"}},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"HasReasonFromScript"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"Script_IconID"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"IconID"},"base":{"type":"Identifier","name":"check"}}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"Script_Reason"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"FailedReason"},"base":{"type":"Identifier","name":"check"}}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"Script_Failed_Requirement"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"BooleanLiteral","value":true,"raw":"true"}]}]}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bCanUse"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]}]}]}]}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onNotifyClientObject"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"OpenBank","raw":"\"OpenBank\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"toggleActivatorIcon"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]},{"type":"ElseifClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"CloseBank","raw":"\"CloseBank\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"toggleActivatorIcon"},"arguments":[{"type":"Identifier","name":"self"},{"type":"BooleanLiteral","value":false,"raw":"false"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTerminateInteraction"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"FireEventServerSide"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"args"},"value":{"type":"StringLiteral","value":"ToggleBank","raw":"\"ToggleBank\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"senderID"},"value":{"type":"Identifier","name":"player"}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"toggleActivatorIcon"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"bHide"},{"type":"Identifier","name":"bFromTerminate"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"bHide"}},"body":[{"type":"AssignmentStatement","variables":[{"type":"Identifier","name":"bHide"}],"init":[{"type":"BooleanLiteral","value":false,"raw":"false"}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"bFromTerminate"}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"TerminateInteraction"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"type"},"value":{"type":"StringLiteral","value":"fromInteraction","raw":"'fromInteraction'"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ObjIDTerminator"},"value":{"type":"Identifier","name":"self"}}]}}}]}]}]},{"type":"ElseClause","body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RequestPickTypeUpdate"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onGetPriorityPickListType"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"\"isInUse\""}],"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ePickType"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}}]}]},{"type":"ElseClause","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"myPriority"}],"init":[{"type":"NumericLiteral","value":0.8,"raw":"0.8"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":">","left":{"type":"Identifier","name":"myPriority"},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fCurrentPickTypePriority"},"base":{"type":"Identifier","name":"msg"}},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fCurrentPickTypePriority"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"Identifier","name":"myPriority"}]},{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ePickType"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"NumericLiteral","value":14,"raw":"14"}]}]}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" L_BANK_INTERACT_CLIENT.lua","raw":"-- L_BANK_INTERACT_CLIENT.lua"},{"type":"Comment","value":" Script that adds interactive bank UI functionality to an object","raw":"-- Script that adds interactive bank UI functionality to an object"},{"type":"Comment","value":" created abeechler ... 2/16/11","raw":"-- created abeechler ... 2/16/11"},{"type":"Comment","value":" updated abeechler... 3/3/11\t\t-- Added obj icon prox radius","raw":"-- updated abeechler... 3/3/11\t\t-- Added obj icon prox radius"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Object Proximity Interact Icon ID ","raw":"-- Object Proximity Interact Icon ID "},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Adjust the interact display on set-up","raw":"-- Adjust the interact display on set-up"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Establish proximity radius for object identify icon display","raw":"-- Establish proximity radius for object identify icon display"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Check to see if the player can use the bank","raw":"-- Check to see if the player can use the bank"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Determine if interaction is valid based on current use","raw":"-- Determine if interaction is valid based on current use"},{"type":"Comment","value":" Obtain preconditions","raw":"-- Obtain preconditions"},{"type":"Comment","value":" We have a valid list of preconditions to check","raw":"-- We have a valid list of preconditions to check"},{"type":"Comment","value":" Failed the precondition check","raw":"-- Failed the precondition check"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Servers tell the client script when it is to","raw":"-- Servers tell the client script when it is to"},{"type":"Comment","value":" open the bank UI","raw":"-- open the bank UI"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Turn OFF object interaction","raw":"-- Turn OFF object interaction"},{"type":"Comment","value":" Turn ON object interaction","raw":"-- Turn ON object interaction"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Sent when the local player initiates a ","raw":"-- Sent when the local player initiates a "},{"type":"Comment","value":" termination of their bank interaction","raw":"-- termination of their bank interaction"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Turn OFF Bank UI","raw":"-- Turn OFF Bank UI"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Toggles the activator icon based on bHide, ","raw":"-- Toggles the activator icon based on bHide, "},{"type":"Comment","value":" to toggle it on you dont have to pass bHide","raw":"-- to toggle it on you dont have to pass bHide"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Show the icon, cancel notification, set isInUse to false","raw":"-- Show the icon, cancel notification, set isInUse to false"},{"type":"Comment","value":" Hide the icon, request notification, set isInUse to true","raw":"-- Hide the icon, request notification, set isInUse to true"},{"type":"Comment","value":" Request the interaction update","raw":"-- Request the interaction update"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Sent when the object checks its pick type","raw":"-- Sent when the object checks its pick type"},{"type":"Comment","value":"--------------------------------------------","raw":"----------------------------------------------"},{"type":"Comment","value":" Interactive pick type","raw":"-- Interactive pick type"}]}