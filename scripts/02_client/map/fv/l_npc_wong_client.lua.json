{"type":"Chunk","body":[{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onNotifyClientObject"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"reveal","raw":"\"reveal\""}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"paramObj"},"base":{"type":"Identifier","name":"msg"}}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"StartCelebrationEffect"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"rerouteID"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"backgroundObject"},"value":{"type":"NumericLiteral","value":12019,"raw":"12019"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"animation"},"value":{"type":"StringLiteral","value":"darkitect-reveal","raw":"\"darkitect-reveal\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"duration"},"value":{"type":"NumericLiteral","value":24,"raw":"24"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"celeLeadIn"},"value":{"type":"NumericLiteral","value":0.3,"raw":".3"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"celeLeadOut"},"value":{"type":"NumericLiteral","value":0.5,"raw":".5"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"cameraPathLOT"},"value":{"type":"NumericLiteral","value":12510,"raw":"12510"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"pathNodeName"},"value":{"type":"StringLiteral","value":"camera1","raw":"\"camera1\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"soundGUID"},"value":{"type":"StringLiteral","value":"{f75dd0a2-d7bf-4fe7-b68a-54e3a8b54341}","raw":"\"{f75dd0a2-d7bf-4fe7-b68a-54e3a8b54341}\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"mixerProgram"},"value":{"type":"StringLiteral","value":"Darkitect_Reveal","raw":"\"Darkitect_Reveal\""}}]}}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"envSettings"}],"init":[{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetEnvironmentSettings"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":{"type":"TableConstructorExpression","fields":[]}}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"specular","raw":"\"specular\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"specular"},"base":{"type":"Identifier","name":"envSettings"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"ambient","raw":"\"ambient\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ambient"},"base":{"type":"Identifier","name":"envSettings"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"directional","raw":"\"directional\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"directional"},"base":{"type":"Identifier","name":"envSettings"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"lightPosition","raw":"\"lightPosition\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"lightPosition"},"base":{"type":"Identifier","name":"envSettings"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"fogColor","raw":"\"fogColor\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fogColor"},"base":{"type":"Identifier","name":"envSettings"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"minDrawDistances","raw":"\"minDrawDistances\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"minDrawDistances"},"base":{"type":"Identifier","name":"envSettings"}}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"maxDrawDistances","raw":"\"maxDrawDistances\""},{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"maxDrawDistances"},"base":{"type":"Identifier","name":"envSettings"}}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ModifyEnvironmentSettings"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"ambient"},"value":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"r"},"value":{"type":"NumericLiteral","value":0.2,"raw":".2"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"g"},"value":{"type":"NumericLiteral","value":0.2,"raw":".2"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"b"},"value":{"type":"NumericLiteral","value":0.2,"raw":".2"}}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"directional"},"value":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"r"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"g"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"b"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"specular"},"value":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"r"},"value":{"type":"NumericLiteral","value":0.4,"raw":".4"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"g"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"b"},"value":{"type":"NumericLiteral","value":1,"raw":"1"}}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"lightPosition"},"value":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":17,"raw":"17"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"NumericLiteral","value":8,"raw":"8"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":2.5,"raw":"2.5"}}}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"blendTime"},"value":{"type":"NumericLiteral","value":0.3,"raw":".3"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fogColor"},"value":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"r"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"g"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"b"},"value":{"type":"NumericLiteral","value":0,"raw":"0"}}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"minDrawDistances"},"value":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"fogNear"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fogFar"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"postFogSolid"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"postFogFade"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"staticObjectDistance"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"dynamicObjectDistance"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"maxDrawDistances"},"value":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"fogNear"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fogFar"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"postFogSolid"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"postFogFade"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"staticObjectDistance"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"dynamicObjectDistance"},"value":{"type":"NumericLiteral","value":1000,"raw":"1000"}}]}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationRequest"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"CelebrationCompleted","raw":"\"CelebrationCompleted\""}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"notifyCelebrationCompleted"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"other"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"other"}},"arguments":[]}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"ModifyEnvironmentSettings"},"base":{"type":"Identifier","name":"LEVEL"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"ambient"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"ambient","raw":"\"ambient\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"directional"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"directional","raw":"\"directional\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"specular"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"specular","raw":"\"specular\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"lightPosition"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"lightPosition","raw":"\"lightPosition\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"fogColor"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"fogColor","raw":"\"fogColor\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"maxDrawDistances"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"maxDrawDistances","raw":"\"maxDrawDistances\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"minDrawDistances"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"minDrawDistances","raw":"\"minDrawDistances\""}]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"blendTime"},"value":{"type":"NumericLiteral","value":0.1,"raw":"0.1"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationCancel"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"other"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"CelebrationCompleted","raw":"\"CelebrationCompleted\""}}]}}}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Client side script to play the darkitect reveal","raw":"-- Client side script to play the darkitect reveal"},{"type":"Comment","value":" ","raw":"-- "},{"type":"Comment","value":" created brandi... 11/9/10","raw":"-- created brandi... 11/9/10"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" the server script will tell the client script when the player completes the mission","raw":"-- the server script will tell the client script when the player completes the mission"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" make sure its the right message","raw":"-- make sure its the right message"},{"type":"Comment","value":" get the player passed from the client","raw":"-- get the player passed from the client"},{"type":"Comment","value":" check player is the local player","raw":"-- check player is the local player"},{"type":"Comment","value":" start the darkitect reveal celebration effect","raw":"-- start the darkitect reveal celebration effect"},{"type":"Comment","value":" get the env settings so we can set it back after the reveal; have to set them all separate because we cant up nested tables in setvar","raw":"-- get the env settings so we can set it back after the reveal; have to set them all separate because we cant up nested tables in setvar"},{"type":"Comment","value":" change the env settings for the reveal","raw":"-- change the env settings for the reveal"},{"type":"Comment","value":" tell the player to tell the script when the celebration is done","raw":"-- tell the player to tell the script when the celebration is done"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" when the celebration is completed, put the env settings back","raw":"-- when the celebration is completed, put the env settings back"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" make sure the player is still there","raw":"-- make sure the player is still there"},{"type":"Comment","value":" set the env settings back to what they were","raw":"-- set the env settings back to what they were"},{"type":"Comment","value":" cancel the lua request","raw":"-- cancel the lua request"}]}