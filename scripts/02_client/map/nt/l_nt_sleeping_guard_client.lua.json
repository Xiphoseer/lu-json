{"type":"Chunk","body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"proxText"}],"init":[{"type":"TableConstructorExpression","fields":[{"type":"TableValue","value":{"type":"StringLiteral","value":"NPC_SLEEPING_KNIGHT_BANTER01","raw":"\"NPC_SLEEPING_KNIGHT_BANTER01\""}},{"type":"TableValue","value":{"type":"StringLiteral","value":"NPC_SLEEPING_KNIGHT_BANTER02","raw":"\"NPC_SLEEPING_KNIGHT_BANTER02\""}}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onStartup"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetProximityRadius"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"radius"},"value":{"type":"NumericLiteral","value":30,"raw":"30"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"name"},"value":{"type":"StringLiteral","value":"chatBubbleProx","raw":"\"chatBubbleProx\""}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onScriptNetworkVarUpdate"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"varName"},{"type":"Identifier","name":"varValue"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"pairs"},"arguments":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"tableOfVars"},"base":{"type":"Identifier","name":"msg"}}]}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"varName"},"right":{"type":"StringLiteral","value":"asleep","raw":"\"asleep\""}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RequestPickTypeUpdate"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onGetPriorityPickListType"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"myPriority"}],"init":[{"type":"NumericLiteral","value":0.8,"raw":"0.8"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":">","left":{"type":"Identifier","name":"myPriority"},"right":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fCurrentPickTypePriority"},"base":{"type":"Identifier","name":"msg"}},"inParens":true},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"fCurrentPickTypePriority"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"Identifier","name":"myPriority"}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"or","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"}]},"right":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetNetworkVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"asleep","raw":"'asleep'"}]}}},"body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ePickType"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}}]}]},{"type":"ElseClause","body":[{"type":"AssignmentStatement","variables":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"ePickType"},"base":{"type":"Identifier","name":"msg"}}],"init":[{"type":"NumericLiteral","value":14,"raw":"14"}]}]}]}]}]},{"type":"ReturnStatement","arguments":[{"type":"Identifier","name":"msg"}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onClientUse"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"},{"type":"BooleanLiteral","value":true,"raw":"true"}]}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"AddTimerWithCancel"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetTimer"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},"arguments":[{"type":"NumericLiteral","value":5,"raw":"5"},{"type":"StringLiteral","value":"talking","raw":"\"talking\""},{"type":"Identifier","name":"self"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"PlayAnimation"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"user"},"base":{"type":"Identifier","name":"msg"}}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"animationID"},"value":{"type":"StringLiteral","value":"talk","raw":"\"talk\""}},{"type":"TableKeyString","key":{"type":"Identifier","name":"bPlayImmediate"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"DisplayChatBubble"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"wsText"},"value":{"type":"CallExpression","base":{"type":"Identifier","name":"Localize"},"arguments":[{"type":"StringLiteral","value":"NPC_SLEEPING_KNIGHT_CLICKED01","raw":"\"NPC_SLEEPING_KNIGHT_CLICKED01\""}]}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onProximityUpdate"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"LogicalExpression","operator":"and","left":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"status"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"ENTER","raw":"\"ENTER\""}},"right":{"type":"BinaryExpression","operator":"==","left":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objId"},"base":{"type":"Identifier","name":"msg"}}},"arguments":[]},"right":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetID"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"num"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"random"},"base":{"type":"Identifier","name":"math"}},"arguments":[{"type":"NumericLiteral","value":1,"raw":"1"},{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"maxn"},"base":{"type":"Identifier","name":"table"}},"arguments":[{"type":"Identifier","name":"proxText"}]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"DisplayChatBubble"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"wsText"},"value":{"type":"CallExpression","base":{"type":"Identifier","name":"Localize"},"arguments":[{"type":"IndexExpression","base":{"type":"Identifier","name":"proxText"},"index":{"type":"Identifier","name":"num"}}]}}]}}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onTimerDone"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"talking","raw":"\"talking\""},"inParens":true},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"isInUse","raw":"'isInUse'"},{"type":"BooleanLiteral","value":false,"raw":"false"}]}},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"TerminateInteraction"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"type"},"value":{"type":"StringLiteral","value":"fromInteraction","raw":"'fromInteraction'"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ObjIDTerminator"},"value":{"type":"Identifier","name":"self"}}]}}},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"RequestPickTypeUpdate"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]}]}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" stripped down version of the NPC chat script for the guard in NT","raw":"-- stripped down version of the NPC chat script for the guard in NT"},{"type":"Comment","value":" created by Brandi... 4/12/11","raw":"-- created by Brandi... 4/12/11"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" create a table of proximity chat for the guard","raw":"-- create a table of proximity chat for the guard"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" set the guard up","raw":"-- set the guard up"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Set the proximity for the guard to chat when the player is near","raw":"-- Set the proximity for the guard to chat when the player is near"},{"type":"Comment","value":" the guard is not in use","raw":"-- the guard is not in use"},{"type":"Comment","value":" check to see if we have the correct message and deal with it","raw":"-- check to see if we have the correct message and deal with it"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" override pick type to be interactive","raw":"-- override pick type to be interactive"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" Interactive pick type   ","raw":"-- Interactive pick type   "},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" player interacts with the sleeping guard","raw":"-- player interacts with the sleeping guard"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" set the guard to in use","raw":"-- set the guard to in use"},{"type":"Comment","value":" start a timer to set the guard back","raw":"-- start a timer to set the guard back"},{"type":"Comment","value":" make the player look like they are talking to the guard","raw":"-- make the player look like they are talking to the guard"},{"type":"Comment","value":" guard chat \"zzzzzzz\"","raw":"-- guard chat \"zzzzzzz\""},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" handle proximity updates","raw":"-- handle proximity updates"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" if the player entered the guards proximity","raw":"-- if the player entered the guards proximity"},{"type":"Comment","value":" get a random text","raw":"-- get a random text"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" set the guard back to normal","raw":"-- set the guard back to normal"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"}]}