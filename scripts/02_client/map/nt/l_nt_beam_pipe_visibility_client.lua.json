{"type":"Chunk","body":[{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onScopeChanged"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bEnteredScope"},"base":{"type":"Identifier","name":"msg"}},"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},"body":[{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationRequest"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetZoneControlID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"PlayerReady","raw":"\"PlayerReady\""}}]}}},{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckFlag"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"notifyPlayerReady"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"zoneObj"},{"type":"Identifier","name":"msg"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"player"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectByID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetLocalCharID"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"player"}},"arguments":[]}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"CheckFlag"},"arguments":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}]}},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"SendLuaNotificationCancel"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"requestTarget"},"value":{"type":"Identifier","name":"player"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"messageName"},"value":{"type":"StringLiteral","value":"PlayerReady","raw":"\"PlayerReady\""}}]}}}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"CheckFlag"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"player"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"flag"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"flag","raw":"'flag'"}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"UnaryExpression","operator":"not","argument":{"type":"Identifier","name":"flag"}},"body":[{"type":"ReturnStatement","arguments":[]}]}]},{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"bFlag"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetFlag"},"base":{"type":"Identifier","name":"player"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"iFlagID"},"value":{"type":"Identifier","name":"flag"}}]}}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"SpawnPipe"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"onNotifyClientObject"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"},{"type":"Identifier","name":"msg"}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"name"},"base":{"type":"Identifier","name":"msg"}},"right":{"type":"StringLiteral","value":"PipeBuilt","raw":"\"PipeBuilt\""}},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"Identifier","name":"SpawnPipe"},"arguments":[{"type":"Identifier","name":"self"}]}}]}]}]},{"type":"FunctionDeclaration","identifier":{"type":"Identifier","name":"SpawnPipe"},"isLocal":false,"parameters":[{"type":"Identifier","name":"self"}],"body":[{"type":"LocalStatement","variables":[{"type":"Identifier","name":"flag"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetVar"},"base":{"type":"Identifier","name":"self"}},"arguments":[{"type":"StringLiteral","value":"flag","raw":"'flag'"}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"pipeNum"}],"init":[{"type":"CallExpression","base":{"type":"Identifier","name":"tonumber"},"arguments":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"sub"},"base":{"type":"Identifier","name":"string"}},"arguments":[{"type":"CallExpression","base":{"type":"Identifier","name":"tostring"},"arguments":[{"type":"Identifier","name":"flag"}]},{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}},{"type":"UnaryExpression","operator":"-","argument":{"type":"NumericLiteral","value":1,"raw":"1"}}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"fxObj"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"objects"},"base":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetObjectsInGroup"},"base":{"type":"Identifier","name":"self"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"group"},"value":{"type":"BinaryExpression","operator":"..","left":{"type":"StringLiteral","value":"BeamPipeFX","raw":"\"BeamPipeFX\""},"right":{"type":"Identifier","name":"pipeNum"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ignoreSpawners"},"value":{"type":"BooleanLiteral","value":true,"raw":"true"}}]}}}]},{"type":"ForGenericStatement","variables":[{"type":"Identifier","name":"k"},{"type":"Identifier","name":"v"}],"iterators":[{"type":"CallExpression","base":{"type":"Identifier","name":"ipairs"},"arguments":[{"type":"Identifier","name":"fxObj"}]}],"body":[{"type":"IfStatement","clauses":[{"type":"IfClause","condition":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"Exists"},"base":{"type":"Identifier","name":"v"}},"arguments":[]},"body":[{"type":"CallStatement","expression":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"DeleteObject"},"base":{"type":"Identifier","name":"GAMEOBJ"}},"arguments":[{"type":"Identifier","name":"v"}]}}]}]}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"mypos"}],"init":[{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"pos"},"base":{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetPosition"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}}]},{"type":"LocalStatement","variables":[{"type":"Identifier","name":"myrot"}],"init":[{"type":"CallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"GetRotation"},"base":{"type":"Identifier","name":"self"}},"arguments":[]}]},{"type":"CallStatement","expression":{"type":"TableCallExpression","base":{"type":"MemberExpression","indexer":":","identifier":{"type":"Identifier","name":"LoadObject"},"base":{"type":"Identifier","name":"RESMGR"}},"arguments":{"type":"TableConstructorExpression","fields":[{"type":"TableKeyString","key":{"type":"Identifier","name":"objectTemplate"},"value":{"type":"NumericLiteral","value":12939,"raw":"12939"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"x"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"mypos"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"y"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"mypos"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"z"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"mypos"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"rw"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"w"},"base":{"type":"Identifier","name":"myrot"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"rx"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"x"},"base":{"type":"Identifier","name":"myrot"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"ry"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"y"},"base":{"type":"Identifier","name":"myrot"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"rz"},"value":{"type":"MemberExpression","indexer":".","identifier":{"type":"Identifier","name":"z"},"base":{"type":"Identifier","name":"myrot"}}},{"type":"TableKeyString","key":{"type":"Identifier","name":"owner"},"value":{"type":"Identifier","name":"self"}},{"type":"TableKeyString","key":{"type":"Identifier","name":"configData"},"value":{"type":"Identifier","name":"config"}}]}}}]}],"comments":[{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" server script on the imagination pipes in the beam ","raw":"-- server script on the imagination pipes in the beam "},{"type":"Comment","value":" updated mrb... 10/26/10","raw":"-- updated mrb... 10/26/10"},{"type":"Comment","value":"------------------------------------------------------------","raw":"--------------------------------------------------------------"},{"type":"Comment","value":" if the player entered ghosting range","raw":"-- if the player entered ghosting range"},{"type":"Comment","value":" get the local player","raw":"-- get the local player"},{"type":"Comment","value":" tell the zone control object to tell the script when the local player is loaded","raw":"-- tell the zone control object to tell the script when the local player is loaded"},{"type":"Comment","value":" custom function to see if the players flag is set","raw":"-- custom function to see if the players flag is set"},{"type":"Comment","value":" the zone control object says the player is loaded","raw":"-- the zone control object says the player is loaded"},{"type":"Comment","value":" get the player","raw":"-- get the player"},{"type":"Comment","value":" custom function to see if the players flag is set","raw":"-- custom function to see if the players flag is set"},{"type":"Comment","value":" cancel the notification request","raw":"-- cancel the notification request"},{"type":"Comment","value":" get the flag number off the object, set through HF","raw":"-- get the flag number off the object, set through HF"},{"type":"Comment","value":" if there isnt a flag number, something is wrong and kill the script before it crashes","raw":"-- if there isnt a flag number, something is wrong and kill the script before it crashes"},{"type":"Comment","value":" see if the player has built this pipe before","raw":"-- see if the player has built this pipe before"},{"type":"Comment","value":" go to custom function","raw":"-- go to custom function"},{"type":"Comment","value":" server has notified the client script because the player built the quickbuild pipe","raw":"-- server has notified the client script because the player built the quickbuild pipe"},{"type":"Comment","value":" go to custom function","raw":"-- go to custom function"},{"type":"Comment","value":" CUSTOM FUNCTION: spawns static pipe and kills the fx object","raw":"-- CUSTOM FUNCTION: spawns static pipe and kills the fx object"},{"type":"Comment","value":" get the flag number off the object, set through HF","raw":"-- get the flag number off the object, set through HF"},{"type":"Comment","value":" parse the flag number to get the last digit","raw":"-- parse the flag number to get the last digit"},{"type":"Comment","value":" get the fx object assicated with this quickbuild using the last number of the flag number","raw":"-- get the fx object assicated with this quickbuild using the last number of the flag number"},{"type":"Comment","value":" make sure the object exists and delete it","raw":"-- make sure the object exists and delete it"},{"type":"Comment","value":" get the position and rotation of the quickbuild","raw":"-- get the position and rotation of the quickbuild"},{"type":"Comment","value":" spawn in the static pipe at the quickbuild pipes position","raw":"-- spawn in the static pipe at the quickbuild pipes position"}]}